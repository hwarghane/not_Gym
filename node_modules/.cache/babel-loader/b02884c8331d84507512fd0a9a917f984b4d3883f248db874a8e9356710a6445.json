{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\OneDrive\\\\Desktop\\\\project\\\\gym\\\\src\\\\contexts\\\\AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged, updateProfile, sendPasswordResetEmail } from 'firebase/auth';\nimport { ref, set, get } from 'firebase/database';\nimport { auth, database } from '../firebase/config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport const useAuth = () => {\n  _s();\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n_s(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const AuthProvider = ({\n  children\n}) => {\n  _s2();\n  const [currentUser, setCurrentUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [userProfile, setUserProfile] = useState(null);\n\n  // Sign up function\n  const signup = async (email, password, displayName) => {\n    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n    const user = userCredential.user;\n\n    // Update profile with display name\n    await updateProfile(user, {\n      displayName\n    });\n\n    // Create user profile in database\n    const userProfileData = {\n      uid: user.uid,\n      email: user.email,\n      displayName: displayName,\n      createdAt: Date.now(),\n      settings: {\n        units: 'lbs',\n        // lbs or kg\n        theme: 'dark',\n        notifications: true,\n        weeklyGoal: 4,\n        privacy: 'private'\n      },\n      stats: {\n        totalWorkouts: 0,\n        totalVolume: 0,\n        joinDate: Date.now()\n      }\n    };\n    await set(ref(database, `users/${user.uid}`), userProfileData);\n    setUserProfile(userProfileData);\n    return userCredential;\n  };\n\n  // Sign in function\n  const signin = async (email, password) => {\n    const userCredential = await signInWithEmailAndPassword(auth, email, password);\n    return userCredential;\n  };\n\n  // Sign out function\n  const logout = async () => {\n    setUserProfile(null);\n    return await signOut(auth);\n  };\n\n  // Reset password\n  const resetPassword = async email => {\n    return await sendPasswordResetEmail(auth, email);\n  };\n\n  // Load user profile\n  const loadUserProfile = async uid => {\n    try {\n      const userRef = ref(database, `users/${uid}`);\n      const snapshot = await get(userRef);\n      if (snapshot.exists()) {\n        setUserProfile(snapshot.val());\n      }\n    } catch (error) {\n      console.error('Error loading user profile:', error);\n    }\n  };\n\n  // Update user profile\n  const updateUserProfile = async updates => {\n    if (!currentUser) return;\n    const userRef = ref(database, `users/${currentUser.uid}`);\n    await set(userRef, {\n      ...userProfile,\n      ...updates\n    });\n    setUserProfile(prev => ({\n      ...prev,\n      ...updates\n    }));\n  };\n\n  // Get user data path for database operations\n  const getUserDataPath = path => {\n    if (!currentUser) return null;\n    return `users/${currentUser.uid}/${path}`;\n  };\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async user => {\n      setCurrentUser(user);\n      if (user) {\n        await loadUserProfile(user.uid);\n      } else {\n        setUserProfile(null);\n      }\n      setLoading(false);\n    });\n    return unsubscribe;\n  }, []);\n  const value = {\n    currentUser,\n    userProfile,\n    signup,\n    signin,\n    logout,\n    resetPassword,\n    updateUserProfile,\n    getUserDataPath,\n    loading\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: !loading && children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 5\n  }, this);\n};\n_s2(AuthProvider, \"Xey6YrJimIMNEMMx5vkorAHFkW4=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","signInWithEmailAndPassword","createUserWithEmailAndPassword","signOut","onAuthStateChanged","updateProfile","sendPasswordResetEmail","ref","set","get","auth","database","jsxDEV","_jsxDEV","AuthContext","useAuth","_s","context","Error","AuthProvider","children","_s2","currentUser","setCurrentUser","loading","setLoading","userProfile","setUserProfile","signup","email","password","displayName","userCredential","user","userProfileData","uid","createdAt","Date","now","settings","units","theme","notifications","weeklyGoal","privacy","stats","totalWorkouts","totalVolume","joinDate","signin","logout","resetPassword","loadUserProfile","userRef","snapshot","exists","val","error","console","updateUserProfile","updates","prev","getUserDataPath","path","unsubscribe","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/ASUS/OneDrive/Desktop/project/gym/src/contexts/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { \r\n  signInWithEmailAndPassword, \r\n  createUserWithEmailAndPassword, \r\n  signOut, \r\n  onAuthStateChanged,\r\n  updateProfile,\r\n  sendPasswordResetEmail\r\n} from 'firebase/auth';\r\nimport { ref, set, get } from 'firebase/database';\r\nimport { auth, database } from '../firebase/config';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [userProfile, setUserProfile] = useState(null);\r\n\r\n  // Sign up function\r\n  const signup = async (email, password, displayName) => {\r\n    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n    const user = userCredential.user;\r\n    \r\n    // Update profile with display name\r\n    await updateProfile(user, { displayName });\r\n    \r\n    // Create user profile in database\r\n    const userProfileData = {\r\n      uid: user.uid,\r\n      email: user.email,\r\n      displayName: displayName,\r\n      createdAt: Date.now(),\r\n      settings: {\r\n        units: 'lbs', // lbs or kg\r\n        theme: 'dark',\r\n        notifications: true,\r\n        weeklyGoal: 4,\r\n        privacy: 'private'\r\n      },\r\n      stats: {\r\n        totalWorkouts: 0,\r\n        totalVolume: 0,\r\n        joinDate: Date.now()\r\n      }\r\n    };\r\n    \r\n    await set(ref(database, `users/${user.uid}`), userProfileData);\r\n    setUserProfile(userProfileData);\r\n    \r\n    return userCredential;\r\n  };\r\n\r\n  // Sign in function\r\n  const signin = async (email, password) => {\r\n    const userCredential = await signInWithEmailAndPassword(auth, email, password);\r\n    return userCredential;\r\n  };\r\n\r\n  // Sign out function\r\n  const logout = async () => {\r\n    setUserProfile(null);\r\n    return await signOut(auth);\r\n  };\r\n\r\n  // Reset password\r\n  const resetPassword = async (email) => {\r\n    return await sendPasswordResetEmail(auth, email);\r\n  };\r\n\r\n  // Load user profile\r\n  const loadUserProfile = async (uid) => {\r\n    try {\r\n      const userRef = ref(database, `users/${uid}`);\r\n      const snapshot = await get(userRef);\r\n      if (snapshot.exists()) {\r\n        setUserProfile(snapshot.val());\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading user profile:', error);\r\n    }\r\n  };\r\n\r\n  // Update user profile\r\n  const updateUserProfile = async (updates) => {\r\n    if (!currentUser) return;\r\n    \r\n    const userRef = ref(database, `users/${currentUser.uid}`);\r\n    await set(userRef, { ...userProfile, ...updates });\r\n    setUserProfile(prev => ({ ...prev, ...updates }));\r\n  };\r\n\r\n  // Get user data path for database operations\r\n  const getUserDataPath = (path) => {\r\n    if (!currentUser) return null;\r\n    return `users/${currentUser.uid}/${path}`;\r\n  };\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\r\n      setCurrentUser(user);\r\n      if (user) {\r\n        await loadUserProfile(user.uid);\r\n      } else {\r\n        setUserProfile(null);\r\n      }\r\n      setLoading(false);\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  const value = {\r\n    currentUser,\r\n    userProfile,\r\n    signup,\r\n    signin,\r\n    logout,\r\n    resetPassword,\r\n    updateUserProfile,\r\n    getUserDataPath,\r\n    loading\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {!loading && children}\r\n    </AuthContext.Provider>\r\n  );\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}