/*! For license information please see main.daa77d1c.js.LICENSE.txt */
(()=>{"use strict";var e={43(e,t,n){e.exports=n(202)},153(e,t,n){var i=n(43),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,s={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,i)&&!l.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202(e,t){var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,m(x,v.prototype),x.isPureReactComponent=!0;var _=Array.isArray,w=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,i){var r,s={},a=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,r)&&!S.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:k.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,r,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return a=a(l=e),e=""===s?"."+E(l,0):s,_(a)?(r="",null!=e&&(r=e.replace(T,"$&/")+"/"),I(a,t,r,"",function(e){return e})):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+E(o=e[c],c);l+=I(o,t,r,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=I(o=o.value,t,r,u=s+E(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var i=[],r=0;return I(e,i,"","",function(e){return t.call(n,e,r++)}),i}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var j={current:null},R={transition:null},O={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:R,ReactCurrentOwner:k};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=D,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:r,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return j.current.useCallback(e,t)},t.useContext=function(e){return j.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return j.current.useDeferredValue(e)},t.useEffect=function(e,t){return j.current.useEffect(e,t)},t.useId=function(){return j.current.useId()},t.useImperativeHandle=function(e,t,n){return j.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return j.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return j.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return j.current.useMemo(e,t)},t.useReducer=function(e,t,n){return j.current.useReducer(e,t,n)},t.useRef=function(e){return j.current.useRef(e)},t.useState=function(e){return j.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return j.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return j.current.useTransition()},t.version="18.3.1"},234(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,a=r>>>1;i<a;){var o=2*(i+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<r&&0>s(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<r&&0>s(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function _(e){if(g=!1,x(e),!m)if(null!==i(c))m=!0,R(w);else{var t=i(u);null!==t&&O(_,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(C),C=-1),p=!0;var s=f;try{for(x(n),h=i(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===i(c)&&r(c),x(n)}else r(c);h=i(c)}if(null!==h)var l=!0;else{var d=i(u);null!==d&&O(_,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,N=null,C=-1,T=5,E=-1;function I(){return!(t.unstable_now()-E<T)}function P(){if(null!==N){var e=t.unstable_now();E=e;var n=!0;try{n=N(!0,e)}finally{n?k():(S=!1,N=null)}}else S=!1}if("function"===typeof b)k=function(){b(P)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,j=M.port2;M.port1.onmessage=P,k=function(){j.postMessage(null)}}else k=function(){v(P,0)};function R(e){N=e,S||(S=!0,k())}function O(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===i(c)&&e===i(u)&&(g?(y(C),C=-1):g=!0,O(_,s-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,R(w))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391(e,t,n){var i=n(950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},579(e,t,n){e.exports=n(153)},730(e,t,n){var i=n(43),r=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,i,r,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,i){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),w=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),j=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var A,L=Object.assign;function F(e){if(void 0===A)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);A=t&&t[1]||""}return"\n"+A+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==s[o]){var l="\n"+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function W(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case w:return"Portal";case N:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case j:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=q(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){J(e,t);var n=H(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),i=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=me(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,ke=null,Se=null;function Ne(e){if(e=br(e)){if("function"!==typeof we)throw Error(s(280));var t=e.stateNode;t&&(t=_r(t),we(e.stateNode,e.type,t))}}function Ce(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Te(){if(ke){var e=ke,t=Se;if(Se=ke=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Ee(e,t){return e(t)}function Ie(){}var Pe=!1;function Me(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ee(e,t,n)}finally{Pe=!1,(null!==ke||null!==Se)&&(Ie(),Te())}}function je(e,t){var n=e.stateNode;if(null===n)return null;var i=_r(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Re=!1}function De(e,t,n,i,r,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Ae=!1,Le=null,Fe=!1,ze=null,Ue={onError:function(e){Ae=!0,Le=e}};function We(e,t,n,i,r,s,a,o,l){Ae=!1,Le=null,De.apply(Ue,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(s(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return He(r),e;if(a===i)return He(r),t;a=a.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=a;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=a;break}if(l===i){o=!0,i=r,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,i=r;break}if(l===i){o=!0,i=a,n=r;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var Ge=r.unstable_scheduleCallback,Ke=r.unstable_cancelCallback,$e=r.unstable_shouldYield,Qe=r.unstable_requestPaint,Je=r.unstable_now,Xe=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~r;0!==o?i=dt(o):0!==(s&=a)&&(i=dt(s))}else 0!==(a=n&~r)?i=dt(a):0!==s&&(i=dt(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-at(t)),i|=e[n],t&=~r;return i}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-at(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,wt,kt,St,Nt,Ct=!1,Tt=[],Et=null,It=null,Pt=null,Mt=new Map,jt=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jt.delete(t.pointerId)}}function At(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=br(t))&&wt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Lt(e){var t=yr(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Nt(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=br(n))&&wt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);xe=i,n.target.dispatchEvent(i),xe=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Ct=!1,null!==Et&&Ft(Et)&&(Et=null),null!==It&&Ft(It)&&(It=null),null!==Pt&&Ft(Pt)&&(Pt=null),Mt.forEach(zt),jt.forEach(zt)}function Wt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ut)))}function Vt(e){function t(t){return Wt(t,e)}if(0<Tt.length){Wt(Tt[0],e);for(var n=1;n<Tt.length;n++){var i=Tt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Et&&Wt(Et,e),null!==It&&Wt(It,e),null!==Pt&&Wt(Pt,e),Mt.forEach(t),jt.forEach(t),n=0;n<Rt.length;n++)(i=Rt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Rt.shift()}var Bt=x.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,i){var r=bt,s=Bt.transition;Bt.transition=null;try{bt=1,Gt(e,t,n,i)}finally{bt=r,Bt.transition=s}}function Yt(e,t,n,i){var r=bt,s=Bt.transition;Bt.transition=null;try{bt=4,Gt(e,t,n,i)}finally{bt=r,Bt.transition=s}}function Gt(e,t,n,i){if(Ht){var r=$t(e,t,n,i);if(null===r)Hi(e,t,i,Kt,n),Dt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Et=At(Et,e,t,n,i,r),!0;case"dragenter":return It=At(It,e,t,n,i,r),!0;case"mouseover":return Pt=At(Pt,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Mt.set(s,At(Mt.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,jt.set(s,At(jt.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Dt(e,i),4&t&&-1<Ot.indexOf(e)){for(;null!==r;){var s=br(r);if(null!==s&&_t(s),null===(s=$t(e,t,n,i))&&Hi(e,t,i,Kt,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Hi(e,t,i,null,n)}}var Kt=null;function $t(e,t,n,i){if(Kt=null,null!==(e=yr(e=_e(i))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,i=n.length,r="value"in Jt?Jt.value:Jt.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===r[s-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,i,r,s){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=L({},cn,{view:0,detail:0}),hn=sn(dn),fn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(L({},fn,{dataTransfer:0})),gn=sn(L({},dn,{relatedTarget:0})),vn=sn(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(yn),xn=sn(L({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Nn(){return Sn}var Cn=L({},dn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(Cn),En=sn(L({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nn})),Pn=sn(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=L({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jn=sn(Mn),Rn=[9,13,27,32],On=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var An=u&&"TextEvent"in window&&!Dn,Ln=u&&(!On||Dn&&8<Dn&&11>=Dn),Fn=String.fromCharCode(32),zn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function qn(e,t,n,i){Ce(i),0<(t=Yi(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Yn=null,Gn=null;function Kn(e){Fi(e,0)}function $n(e){if(G(xr(e)))return e}function Qn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Zn="function"===typeof ei.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function ti(){Yn&&(Yn.detachEvent("onpropertychange",ni),Gn=Yn=null)}function ni(e){if("value"===e.propertyName&&$n(Gn)){var t=[];qn(t,Gn,e,_e(e)),Me(Kn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Gn=n,(Yn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Gn)}function si(e,t){if("click"===e)return $n(t)}function ai(e,t){if("input"===e||"change"===e)return $n(t)}var oi="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(oi(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!d.call(t,r)||!oi(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function di(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?di(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pi(e){var t=hi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&di(n.ownerDocument.documentElement,n)){if(null!==i&&fi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=ui(n,s);var a=ui(n,i);r&&a&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=u&&"documentMode"in document&&11>=document.documentMode,gi=null,vi=null,yi=null,bi=!1;function xi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==gi||gi!==K(i)||("selectionStart"in(i=gi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&li(yi,i)||(yi=i,0<(i=Yi(vi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gi)))}function _i(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionend:_i("Transition","TransitionEnd")},ki={},Si={};function Ni(e){if(ki[e])return ki[e];if(!wi[e])return e;var t,n=wi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Si)return ki[e]=n[t];return e}u&&(Si=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var Ci=Ni("animationend"),Ti=Ni("animationiteration"),Ei=Ni("animationstart"),Ii=Ni("transitionend"),Pi=new Map,Mi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ji(e,t){Pi.set(e,t),l(t,[e])}for(var Ri=0;Ri<Mi.length;Ri++){var Oi=Mi[Ri];ji(Oi.toLowerCase(),"on"+(Oi[0].toUpperCase()+Oi.slice(1)))}ji(Ci,"onAnimationEnd"),ji(Ti,"onAnimationIteration"),ji(Ei,"onAnimationStart"),ji("dblclick","onDoubleClick"),ji("focusin","onFocus"),ji("focusout","onBlur"),ji(Ii,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ai=new Set("cancel close invalid load scroll toggle".split(" ").concat(Di));function Li(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,a,o,l,c){if(We.apply(this,arguments),Ae){if(!Ae)throw Error(s(198));var u=Le;Ae=!1,Le=null,Fe||(Fe=!0,ze=u)}}(i,t,void 0,e),e.currentTarget=null}function Fi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;Li(r,o,c),s=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;Li(r,o,c),s=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zi(e,t){var n=t[mr];void 0===n&&(n=t[mr]=new Set);var i=e+"__bubble";n.has(i)||(Bi(t,e,2,!1),n.add(i))}function Ui(e,t,n){var i=0;t&&(i|=4),Bi(n,e,i,t)}var Wi="_reactListening"+Math.random().toString(36).slice(2);function Vi(e){if(!e[Wi]){e[Wi]=!0,a.forEach(function(t){"selectionchange"!==t&&(Ai.has(t)||Ui(t,!1,e),Ui(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Wi]||(t[Wi]=!0,Ui("selectionchange",!1,t))}}function Bi(e,t,n,i){switch(Qt(t)){case 1:var r=qt;break;case 4:r=Yt;break;default:r=Gt}n=r.bind(null,t,n,e),r=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Hi(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==o;){if(null===(a=yr(o)))return;if(5===(l=a.tag)||6===l){i=s=a;continue e}o=o.parentNode}}i=i.return}Me(function(){var i=s,r=_e(n),a=[];e:{var o=Pi.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Ci:case Ti:case Ei:l=vn;break;case Ii:l=Pn;break;case"scroll":l=hn;break;case"wheel":l=jn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=En}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=i;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=je(p,h))&&u.push(qi(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,r),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!yr(c)&&!c[pr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?yr(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=En,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:xr(l),f=null==c?o:xr(c),(o=new u(m,p+"leave",l,n,r)).target=d,o.relatedTarget=f,m=null,yr(r)===i&&((u=new u(h,p+"enter",c,n,r)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Gi(f))p++;for(f=0,m=h;m;m=Gi(m))f++;for(;0<p-f;)u=Gi(u),p--;for(;0<f-p;)h=Gi(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gi(u),h=Gi(h)}u=null}else u=null;null!==l&&Ki(a,o,l,u,!1),null!==c&&null!==d&&Ki(a,d,c,u,!0)}if("select"===(l=(o=i?xr(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Qn;else if(Hn(o))if(Jn)g=ai;else{g=ri;var v=ii}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=si);switch(g&&(g=g(e,i))?qn(a,g,n,r):(v&&v(e,o,i),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=i?xr(i):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gi=v,vi=i,yi=null);break;case"focusout":yi=vi=gi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,xi(a,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":xi(a,n,r)}var y;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(y=en()):(Xt="value"in(Jt=r)?Jt.value:Jt.textContent,Vn=!0)),0<(v=Yi(i,b)).length&&(b=new xn(b,e,null,n,r),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=Wn(n))&&(b.data=y))),(y=An?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!On&&Un(e,t)?(e=en(),Zt=Xt=Jt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Yi(i,"onBeforeInput")).length&&(r=new xn("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:i}),r.data=y))}Fi(a,t)})}function qi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=je(e,n))&&i.unshift(qi(e,s,r)),null!=(s=je(e,t))&&i.push(qi(e,s,r))),e=e.return}return i}function Gi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ki(e,t,n,i,r){for(var s=t._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===i)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=je(n,s))&&a.unshift(qi(n,l,o)):r||null!=(l=je(n,s))&&a.push(qi(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var $i=/\r\n?/g,Qi=/\u0000|\uFFFD/g;function Ji(e){return("string"===typeof e?e:""+e).replace($i,"\n").replace(Qi,"")}function Xi(e,t,n){if(t=Ji(t),Ji(e)!==t&&n)throw Error(s(425))}function Zi(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,ar="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(or)}:ir;function or(e){setTimeout(function(){throw e})}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Vt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Vt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),hr="__reactFiber$"+dr,fr="__reactProps$"+dr,pr="__reactContainer$"+dr,mr="__reactEvents$"+dr,gr="__reactListeners$"+dr,vr="__reactHandles$"+dr;function yr(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pr]||n[hr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[hr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function br(e){return!(e=e[hr]||e[pr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _r(e){return e[fr]||null}var wr=[],kr=-1;function Sr(e){return{current:e}}function Nr(e){0>kr||(e.current=wr[kr],wr[kr]=null,kr--)}function Cr(e,t){kr++,wr[kr]=e.current,e.current=t}var Tr={},Er=Sr(Tr),Ir=Sr(!1),Pr=Tr;function Mr(e,t){var n=e.type.contextTypes;if(!n)return Tr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function jr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Rr(){Nr(Ir),Nr(Er)}function Or(e,t,n){if(Er.current!==Tr)throw Error(s(168));Cr(Er,t),Cr(Ir,n)}function Dr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(s(108,B(e)||"Unknown",r));return L({},n,i)}function Ar(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tr,Pr=Er.current,Cr(Er,e),Cr(Ir,Ir.current),!0}function Lr(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=Dr(e,t,Pr),i.__reactInternalMemoizedMergedChildContext=e,Nr(Ir),Nr(Er),Cr(Er,e)):Nr(Ir),Cr(Ir,n)}var Fr=null,zr=!1,Ur=!1;function Wr(e){null===Fr?Fr=[e]:Fr.push(e)}function Vr(){if(!Ur&&null!==Fr){Ur=!0;var e=0,t=bt;try{var n=Fr;for(bt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Fr=null,zr=!1}catch(r){throw null!==Fr&&(Fr=Fr.slice(e+1)),Ge(Ze,Vr),r}finally{bt=t,Ur=!1}}return null}var Br=[],Hr=0,qr=null,Yr=0,Gr=[],Kr=0,$r=null,Qr=1,Jr="";function Xr(e,t){Br[Hr++]=Yr,Br[Hr++]=qr,qr=e,Yr=t}function Zr(e,t,n){Gr[Kr++]=Qr,Gr[Kr++]=Jr,Gr[Kr++]=$r,$r=e;var i=Qr;e=Jr;var r=32-at(i)-1;i&=~(1<<r),n+=1;var s=32-at(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Qr=1<<32-at(t)+r|n<<r|i,Jr=s+e}else Qr=1<<s|n<<r|i,Jr=e}function es(e){null!==e.return&&(Xr(e,1),Zr(e,1,0))}function ts(e){for(;e===qr;)qr=Br[--Hr],Br[Hr]=null,Yr=Br[--Hr],Br[Hr]=null;for(;e===$r;)$r=Gr[--Kr],Gr[Kr]=null,Jr=Gr[--Kr],Gr[Kr]=null,Qr=Gr[--Kr],Gr[Kr]=null}var ns=null,is=null,rs=!1,ss=null;function as(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,is=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$r?{id:Qr,overflow:Jr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,is=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(rs){var t=is;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=cr(n.nextSibling);var i=ns;t&&os(e,t)?as(i,n):(e.flags=-4097&e.flags|2,rs=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!rs)return us(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=is)){if(ls(e))throw hs(),Error(s(418));for(;t;)as(e,t),t=cr(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=ns?cr(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=is;e;)e=cr(e.nextSibling)}function fs(){is=ns=null,rs=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=x.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=i,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=jc(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Ac(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var s=n.type;return s===k?d(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===j&&ys(s)===t.type)?((i=r(t,n.props)).ref=gs(e,t,n),i.return=e,i):((i=Rc(n.type,n.key,n.props,null,e.mode,i)).ref=gs(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Lc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,i,s){return null===t||7!==t.tag?((t=Oc(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ac(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case w:return(t=Lc(t,e.mode,n)).return=e,t;case j:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Oc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===r?c(e,t,n,i):null;case w:return n.key===r?u(e,t,n,i):null;case j:return f(e,t,(r=n._init)(n._payload),i)}if(te(n)||D(n))return null!==r?null:d(e,t,n,i,null);vs(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case _:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case w:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case j:return p(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||D(i))return d(t,e=e.get(n)||null,i,r,null);vs(t,i)}return null}function m(r,s,o,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(r,d,o[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(r,d),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===o.length)return n(r,d),rs&&Xr(r,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(r,o[m],l))&&(s=a(d,s,m),null===u?c=d:u.sibling=d,u=d);return rs&&Xr(r,m),c}for(d=i(r,d);m<o.length;m++)null!==(g=p(d,r,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(r,e)}),rs&&Xr(r,m),c}function g(r,o,l,c){var u=D(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(r,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(r,m),o=a(b,o,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(r,m),rs&&Xr(r,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(r,y.value,c))&&(o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return rs&&Xr(r,g),u}for(m=i(r,m);!y.done;g++,y=l.next())null!==(y=p(m,r,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(r,e)}),rs&&Xr(r,g),u}return function e(i,s,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case _:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(i,u.sibling),(s=r(u,a.props.children)).return=i,i=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===j&&ys(c)===u.type){n(i,u.sibling),(s=r(u,a.props)).ref=gs(i,u,a),s.return=i,i=s;break e}n(i,u);break}t(i,u),u=u.sibling}a.type===k?((s=Oc(a.props.children,i.mode,l,a.key)).return=i,i=s):((l=Rc(a.type,a.key,a.props,null,i.mode,l)).ref=gs(i,s,a),l.return=i,i=l)}return o(i);case w:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(i,s.sibling),(s=r(s,a.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=Lc(a,i.mode,l)).return=i,i=s}return o(i);case j:return e(i,s,(u=a._init)(a._payload),l)}if(te(a))return m(i,s,a,l);if(D(a))return g(i,s,a,l);vs(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,a)).return=i,i=s):(n(i,s),(s=Ac(a,i.mode,l)).return=i,i=s),o(i)):n(i,s)}}var xs=bs(!0),_s=bs(!1),ws=Sr(null),ks=null,Ss=null,Ns=null;function Cs(){Ns=Ss=ks=null}function Ts(e){var t=ws.current;Nr(ws),e._currentValue=t}function Es(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Is(e,t){ks=e,Ns=Ss=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(Ns!==e)if(e={context:e,memoizedValue:t,next:null},null===Ss){if(null===ks)throw Error(s(308));Ss=e,ks.dependencies={lanes:0,firstContext:e}}else Ss=Ss.next=e;return t}var Ms=null;function js(e){null===Ms?Ms=[e]:Ms.push(e)}function Rs(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,js(t)):(n.next=r.next,r.next=n),t.interleaved=n,Os(e,i)}function Os(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ds=!1;function As(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ls(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Tl)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Os(e,n)}return null===(r=i.interleaved)?(t.next=t,js(i)):(t.next=r.next,r.next=t),i.interleaved=t,Os(e,n)}function Us(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ws(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vs(e,t,n,i){var r=e.updateQueue;Ds=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=r.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((i&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=L({},d,h);break e;case 2:Ds=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(h=o).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===u&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);Dl|=a,e.lanes=a,e.memoizedState=d}}function Bs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var Hs={},qs=Sr(Hs),Ys=Sr(Hs),Gs=Sr(Hs);function Ks(e){if(e===Hs)throw Error(s(174));return e}function $s(e,t){switch(Cr(Gs,t),Cr(Ys,e),Cr(qs,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Nr(qs),Cr(qs,t)}function Qs(){Nr(qs),Nr(Ys),Nr(Gs)}function Js(e){Ks(Gs.current);var t=Ks(qs.current),n=le(t,e.type);t!==n&&(Cr(Ys,e),Cr(qs,n))}function Xs(e){Ys.current===e&&(Nr(qs),Nr(Ys))}var Zs=Sr(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ia=x.ReactCurrentDispatcher,ra=x.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,ua=!1,da=0,ha=0;function fa(){throw Error(s(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oi(e[n],t[n]))return!1;return!0}function ma(e,t,n,i,r,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Xa:Za,e=n(i,r),ua){a=0;do{if(ua=!1,da=0,25<=a)throw Error(s(301));a+=1,la=oa=null,t.updateQueue=null,ia.current=eo,e=n(i,r)}while(ua)}if(ia.current=Ja,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,t)throw Error(s(300));return e}function ga(){var e=0!==da;return da=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ya(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function xa(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=oa,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var o=r.next;r.next=a.next,a.next=o}i.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,i=i.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((sa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=i):c=c.next=h,aa.lanes|=d,Dl|=d}u=u.next}while(null!==u&&u!==a);null===c?o=i:c.next=l,oi(i,t.memoizedState)||(bo=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{a=r.lane,aa.lanes|=a,Dl|=a,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _a(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{a=e(a,o.action),o=o.next}while(o!==r);oi(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function wa(){}function ka(e,t){var n=aa,i=ya(),r=t(),a=!oi(i.memoizedState,r);if(a&&(i.memoizedState=r,bo=!0),i=i.queue,Da(Ca.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Pa(9,Na.bind(null,n,i,r,t),void 0,null),null===El)throw Error(s(349));0!==(30&sa)||Sa(n,t,r)}return r}function Sa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Na(e,t,n,i){t.value=n,t.getSnapshot=i,Ta(t)&&Ea(e)}function Ca(e,t,n){return n(function(){Ta(t)&&Ea(e)})}function Ta(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oi(e,n)}catch(i){return!0}}function Ea(e){var t=Os(e,1);null!==t&&tc(t,e,1,-1)}function Ia(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Ga.bind(null,aa,e),[t.memoizedState,e]}function Pa(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ma(){return ya().memoizedState}function ja(e,t,n,i){var r=va();aa.flags|=e,r.memoizedState=Pa(1|t,n,void 0,void 0===i?null:i)}function Ra(e,t,n,i){var r=ya();i=void 0===i?null:i;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==i&&pa(i,a.deps))return void(r.memoizedState=Pa(t,n,s,i))}aa.flags|=e,r.memoizedState=Pa(1|t,n,s,i)}function Oa(e,t){return ja(8390656,8,e,t)}function Da(e,t){return Ra(2048,8,e,t)}function Aa(e,t){return Ra(4,2,e,t)}function La(e,t){return Ra(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4,4,Fa.bind(null,t,e),n)}function Ua(){}function Wa(e,t){var n=ya();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&pa(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Va(e,t){var n=ya();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&pa(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Ba(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(oi(n,t)||(n=mt(),aa.lanes|=n,Dl|=n,e.baseState=!0),t)}function Ha(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var i=ra.transition;ra.transition={};try{e(!1),t()}finally{bt=n,ra.transition=i}}function qa(){return ya().memoizedState}function Ya(e,t,n){var i=ec(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ka(e))$a(t,n);else if(null!==(n=Rs(e,t,n,i))){tc(n,e,i,Zl()),Qa(n,t,i)}}function Ga(e,t,n){var i=ec(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ka(e))$a(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,oi(o,a)){var l=t.interleaved;return null===l?(r.next=r,js(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Rs(e,t,r,i))&&(tc(n,e,i,r=Zl()),Qa(n,t,i))}}function Ka(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function $a(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qa(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Ja={readContext:Ps,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Xa={readContext:Ps,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Ps,useEffect:Oa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ja(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ja(4194308,4,e,t)},useInsertionEffect:function(e,t){return ja(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=va();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Ya.bind(null,aa,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ia,useDebugValue:Ua,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ia(!1),t=e[0];return e=Ha.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=aa,r=va();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===El)throw Error(s(349));0!==(30&sa)||Sa(i,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,Oa(Ca.bind(null,i,a,e),[e]),i.flags|=2048,Pa(9,Na.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=va(),t=El.identifierPrefix;if(rs){var n=Jr;t=":"+t+"R"+(n=(Qr&~(1<<32-at(Qr)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Ps,useCallback:Wa,useContext:Ps,useEffect:Da,useImperativeHandle:za,useInsertionEffect:Aa,useLayoutEffect:La,useMemo:Va,useReducer:xa,useRef:Ma,useState:function(){return xa(ba)},useDebugValue:Ua,useDeferredValue:function(e){return Ba(ya(),oa.memoizedState,e)},useTransition:function(){return[xa(ba)[0],ya().memoizedState]},useMutableSource:wa,useSyncExternalStore:ka,useId:qa,unstable_isNewReconciler:!1},eo={readContext:Ps,useCallback:Wa,useContext:Ps,useEffect:Da,useImperativeHandle:za,useInsertionEffect:Aa,useLayoutEffect:La,useMemo:Va,useReducer:_a,useRef:Ma,useState:function(){return _a(ba)},useDebugValue:Ua,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:Ba(t,oa.memoizedState,e)},useTransition:function(){return[_a(ba)[0],ya().memoizedState]},useMutableSource:wa,useSyncExternalStore:ka,useId:qa,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var io={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Zl(),r=ec(e),s=Fs(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,r))&&(tc(t,e,r,i),Us(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Zl(),r=ec(e),s=Fs(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,r))&&(tc(t,e,r,i),Us(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zl(),i=ec(e),r=Fs(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=zs(e,r,i))&&(tc(t,e,i,n),Us(t,e,i))}};function ro(e,t,n,i,r,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function so(e,t,n){var i=!1,r=Tr,s=t.contextType;return"object"===typeof s&&null!==s?s=Ps(s):(r=jr(t)?Pr:Er.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?Mr(e,r):Tr),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=io,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&io.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},As(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=Ps(s):(s=jr(t)?Pr:Er.current,r.context=Mr(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&io.enqueueReplaceState(r,r.state,null),Vs(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",i=t;do{n+=W(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Bl||(Bl=!0,Hl=i),uo(0,t)},n}function po(e,t,n){(n=Fs(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof i&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ho;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,zs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var yo=x.ReactCurrentOwner,bo=!1;function xo(e,t,n,i){t.child=null===e?_s(t,null,n,i):xs(t,e.child,n,i)}function _o(e,t,n,i,r){n=n.render;var s=t.ref;return Is(t,r),i=ma(e,t,n,i,s,r),n=ga(),null===e||bo?(rs&&n&&es(t),t.flags|=1,xo(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Bo(e,t,r))}function wo(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Mc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ko(e,t,s,i,r))}if(s=e.child,0===(e.lanes&r)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(a,i)&&e.ref===t.ref)return Bo(e,t,r)}return t.flags|=1,(e=jc(s,i)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(li(s,i)&&e.ref===t.ref){if(bo=!1,t.pendingProps=i=s,0===(e.lanes&r))return t.lanes=e.lanes,Bo(e,t,r);0!==(131072&e.flags)&&(bo=!0)}}return Co(e,t,n,i,r)}function So(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cr(jl,Ml),Ml|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cr(jl,Ml),Ml|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Cr(jl,Ml),Ml|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,Cr(jl,Ml),Ml|=i;return xo(e,t,r,n),t.child}function No(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,i,r){var s=jr(n)?Pr:Er.current;return s=Mr(t,s),Is(t,r),n=ma(e,t,n,i,s,r),i=ga(),null===e||bo?(rs&&i&&es(t),t.flags|=1,xo(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Bo(e,t,r))}function To(e,t,n,i,r){if(jr(n)){var s=!0;Ar(t)}else s=!1;if(Is(t,r),null===t.stateNode)Vo(e,t),so(t,n,i),oo(t,n,i,r),i=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ps(c):c=Mr(t,c=jr(n)?Pr:Er.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||l!==c)&&ao(t,a,i,c),Ds=!1;var h=t.memoizedState;a.state=h,Vs(t,i,a,r),l=t.memoizedState,o!==i||h!==l||Ir.current||Ds?("function"===typeof u&&(no(t,n,u,i),l=t.memoizedState),(o=Ds||ro(t,n,o,i,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,Ls(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ps(l):l=Mr(t,l=jr(n)?Pr:Er.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ao(t,a,i,l),Ds=!1,h=t.memoizedState,a.state=h,Vs(t,i,a,r);var p=t.memoizedState;o!==d||h!==p||Ir.current||Ds?("function"===typeof f&&(no(t,n,f,i),p=t.memoizedState),(c=Ds||ro(t,n,c,i,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),a.props=i,a.state=p,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return Eo(e,t,n,i,s,r)}function Eo(e,t,n,i,r,s){No(e,t);var a=0!==(128&t.flags);if(!i&&!a)return r&&Lr(t,n,!1),Bo(e,t,s);i=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=xs(t,e.child,null,s),t.child=xs(t,null,o,s)):xo(e,t,o,s),t.memoizedState=i.state,r&&Lr(t,n,!0),t.child}function Io(e){var t=e.stateNode;t.pendingContext?Or(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Or(0,t.context,!1),$s(e,t.containerInfo)}function Po(e,t,n,i,r){return fs(),ps(r),t.flags|=256,xo(e,t,n,i),t.child}var Mo,jo,Ro,Oo={dehydrated:null,treeContext:null,retryLane:0};function Do(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ao(e,t,n){var i,r=t.pendingProps,a=Zs.current,o=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Cr(Zs,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Dc(l,r,0,null),e=Oc(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Do(n),t.memoizedState=Oo,e):Lo(t,l));if(null!==(a=e.memoizedState)&&null!==(i=a.dehydrated))return function(e,t,n,i,r,a,o){if(n)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,i=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,r=t.mode,i=Dc({mode:"visible",children:i.children},r,0,null),(a=Oc(a,r,o,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,0!==(1&t.mode)&&xs(t,e.child,null,o),t.child.memoizedState=Do(o),t.memoizedState=Oo,a);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Fo(e,t,o,i=co(a=Error(s(419)),i,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(i=El)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|o))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Os(e,r),tc(i,e,r,-1))}return pc(),Fo(e,t,o,i=co(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,is=cr(r.nextSibling),ns=t,rs=!0,ss=null,null!==e&&(Gr[Kr++]=Qr,Gr[Kr++]=Jr,Gr[Kr++]=$r,Qr=e.id,Jr=e.overflow,$r=t),t=Lo(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,a,n);if(o){o=r.fallback,l=t.mode,i=(a=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==a?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=jc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==i?o=jc(i,o):(o=Oc(o,l,n,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=null===(l=e.child.memoizedState)?Do(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Oo,r}return e=(o=e.child).sibling,r=jc(o,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Lo(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,n,i){return null!==i&&ps(i),xs(t,e.child,null,n),(e=Lo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Es(e.return,t,n)}function Uo(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Wo(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(xo(e,t,i.children,n),0!==(2&(i=Zs.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,n,t);else if(19===e.tag)zo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Cr(Zs,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Uo(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ea(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Uo(t,!0,n,null,s);break;case"together":Uo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=jc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=jc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ho(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Yo(e,t,n){var i=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(t),null;case 1:case 17:return jr(t.type)&&Rr(),qo(t),null;case 3:return i=t.stateNode,Qs(),Nr(Ir),Nr(Er),na(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(sc(ss),ss=null))),qo(t),null;case 5:Xs(t);var r=Ks(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)jo(e,t,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return qo(t),null}if(e=Ks(qs.current),ds(t)){i=t.stateNode,n=t.type;var a=t.memoizedProps;switch(i[hr]=t,i[fr]=a,e=0!==(1&t.mode),n){case"dialog":zi("cancel",i),zi("close",i);break;case"iframe":case"object":case"embed":zi("load",i);break;case"video":case"audio":for(r=0;r<Di.length;r++)zi(Di[r],i);break;case"source":zi("error",i);break;case"img":case"image":case"link":zi("error",i),zi("load",i);break;case"details":zi("toggle",i);break;case"input":Q(i,a),zi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},zi("invalid",i);break;case"textarea":re(i,a),zi("invalid",i)}for(var l in ye(n,a),r=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==a.suppressHydrationWarning&&Xi(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Xi(i.textContent,c,e),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zi("scroll",i)}switch(n){case"input":Y(i),Z(i,a,!0);break;case"textarea":Y(i),ae(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=Zi)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[hr]=t,e[fr]=i,Mo(e,t),t.stateNode=e;e:{switch(l=be(n,i),n){case"dialog":zi("cancel",e),zi("close",e),r=i;break;case"iframe":case"object":case"embed":zi("load",e),r=i;break;case"video":case"audio":for(r=0;r<Di.length;r++)zi(Di[r],e);r=i;break;case"source":zi("error",e),r=i;break;case"img":case"image":case"link":zi("error",e),zi("load",e),r=i;break;case"details":zi("toggle",e),r=i;break;case"input":Q(e,i),r=$(e,i),zi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=L({},i,{value:void 0}),zi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),zi("invalid",e)}for(a in ye(n,r),c=r)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&zi("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":Y(e),Z(e,i,!1);break;case"textarea":Y(e),ae(e);break;case"option":null!=i.value&&e.setAttribute("value",""+H(i.value));break;case"select":e.multiple=!!i.multiple,null!=(a=i.value)?ne(e,!!i.multiple,a,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qo(t),null;case 6:if(e&&null!=t.stateNode)Ro(0,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(n=Ks(Gs.current),Ks(qs.current),ds(t)){if(i=t.stateNode,n=t.memoizedProps,i[hr]=t,(a=i.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xi(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xi(i.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[hr]=t,t.stateNode=i}return qo(t),null;case 13:if(Nr(Zs),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))hs(),fs(),t.flags|=98560,a=!1;else if(a=ds(t),null!==i&&null!==i.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[hr]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qo(t),a=!1}else null!==ss&&(sc(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Rl&&(Rl=3):pc())),null!==t.updateQueue&&(t.flags|=4),qo(t),null);case 4:return Qs(),null===e&&Vi(t.stateNode.containerInfo),qo(t),null;case 10:return Ts(t.type._context),qo(t),null;case 19:if(Nr(Zs),null===(a=t.memoizedState))return qo(t),null;if(i=0!==(128&t.flags),null===(l=a.rendering))if(i)Ho(a,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Ho(a,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cr(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>Wl&&(t.flags|=128,i=!0,Ho(a,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ea(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ho(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!rs)return qo(t),null}else 2*Je()-a.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,i=!0,Ho(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=Zs.current,Cr(Zs,i?1&n|2:1&n),t):(qo(t),null);case 22:case 23:return uc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Ml)&&(qo(t),6&t.subtreeFlags&&(t.flags|=8192)):qo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Go(e,t){switch(ts(t),t.tag){case 1:return jr(t.type)&&Rr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qs(),Nr(Ir),Nr(Er),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(Nr(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Nr(Zs),null;case 4:return Qs(),null;case 10:return Ts(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Mo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},jo=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Ks(qs.current);var s,a=null;switch(n){case"input":r=$(e,r),i=$(e,i),a=[];break;case"select":r=L({},r,{value:void 0}),i=L({},i,{value:void 0}),a=[];break;case"textarea":r=ie(e,r),i=ie(e,i),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Zi)}for(u in ye(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zi("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ro=function(e,t,n,i){n!==i&&(t.flags|=4)};var Ko=!1,$o=!1,Qo="function"===typeof WeakSet?WeakSet:Set,Jo=null;function Xo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){kc(e,t,i)}else n.current=null}function Zo(e,t,n){try{n()}catch(i){kc(e,t,i)}}var el=!1;function tl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&Zo(t,n,s)}r=r.next}while(r!==i)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function rl(e){var t=e.alternate;null!==t&&(e.alternate=null,rl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[fr],delete t[mr],delete t[gr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ol(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zi));else if(4!==i&&null!==(e=e.child))for(ol(e,t,n),e=e.sibling;null!==e;)ol(e,t,n),e=e.sibling}function ll(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}var cl=null,ul=!1;function dl(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(o){}switch(n.tag){case 5:$o||Xo(n,t);case 6:var i=cl,r=ul;cl=null,dl(e,t,n),ul=r,null!==(cl=i)&&(ul?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(ul?(e=cl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Vt(e)):lr(cl,n.stateNode));break;case 4:i=cl,r=ul,cl=n.stateNode.containerInfo,ul=!0,dl(e,t,n),cl=i,ul=r;break;case 0:case 11:case 14:case 15:if(!$o&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&Zo(n,t,a),r=r.next}while(r!==i)}dl(e,t,n);break;case 1:if(!$o&&(Xo(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){kc(n,t,o)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?($o=(i=$o)||null!==n.memoizedState,dl(e,t,n),$o=i):dl(e,t,n);break;default:dl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qo),t.forEach(function(t){var i=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}}function pl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,ul=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===cl)throw Error(s(160));hl(a,o,r),cl=null,ul=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){kc(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),gl(e),4&i){try{tl(3,e,e.return),nl(3,e)}catch(g){kc(e,e.return,g)}try{tl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:pl(t,e),gl(e),512&i&&null!==n&&Xo(n,n.return);break;case 5:if(pl(t,e),gl(e),512&i&&null!==n&&Xo(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(g){kc(e,e.return,g)}}if(4&i&&null!=(r=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(r,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(r,h):"dangerouslySetInnerHTML"===d?de(r,h):"children"===d?he(r,h):b(r,d,h,u)}switch(l){case"input":X(r,a);break;case"textarea":se(r,a);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(r,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(r,!!a.multiple,a.defaultValue,!0):ne(r,!!a.multiple,a.multiple?[]:"",!1))}r[fr]=a}catch(g){kc(e,e.return,g)}}break;case 6:if(pl(t,e),gl(e),4&i){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(g){kc(e,e.return,g)}}break;case 3:if(pl(t,e),gl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:pl(t,e),gl(e);break;case 13:pl(t,e),gl(e),8192&(r=e.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(Ul=Je())),4&i&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?($o=(u=$o)||d,pl(t,e),$o=u):pl(t,e),gl(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Jo=e,d=e.child;null!==d;){for(h=Jo=d;null!==Jo;){switch(p=(f=Jo).child,f.tag){case 0:case 11:case 14:case 15:tl(4,f,f.return);break;case 1:Xo(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){i=f,n=f.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){kc(i,n,g)}}break;case 5:Xo(f,f.return);break;case 22:if(null!==f.memoizedState){xl(h);continue}}null!==p?(p.return=f,Jo=p):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{r=h.stateNode,u?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pl(t,e),gl(e),4&i&&fl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(he(r,""),i.flags&=-33),ll(e,al(e),r);break;case 3:case 4:var a=i.stateNode.containerInfo;ol(e,al(e),a);break;default:throw Error(s(161))}}catch(o){kc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Jo=e,yl(e,t,n)}function yl(e,t,n){for(var i=0!==(1&e.mode);null!==Jo;){var r=Jo,s=r.child;if(22===r.tag&&i){var a=null!==r.memoizedState||Ko;if(!a){var o=r.alternate,l=null!==o&&null!==o.memoizedState||$o;o=Ko;var c=$o;if(Ko=a,($o=l)&&!c)for(Jo=r;null!==Jo;)l=(a=Jo).child,22===a.tag&&null!==a.memoizedState?_l(r):null!==l?(l.return=a,Jo=l):_l(r);for(;null!==s;)Jo=s,yl(s,t,n),s=s.sibling;Jo=r,Ko=o,$o=c}bl(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Jo=s):bl(e)}}function bl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$o||nl(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!$o)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Bs(t,a,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(s(163))}$o||512&t.flags&&il(t)}catch(f){kc(t,t.return,f)}}if(t===e){Jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jo=n;break}Jo=t.return}}function xl(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jo=n;break}Jo=t.return}}function _l(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{nl(4,t)}catch(l){kc(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){kc(t,r,l)}}var s=t.return;try{il(t)}catch(l){kc(t,s,l)}break;case 5:var a=t.return;try{il(t)}catch(l){kc(t,a,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var wl,kl=Math.ceil,Sl=x.ReactCurrentDispatcher,Nl=x.ReactCurrentOwner,Cl=x.ReactCurrentBatchConfig,Tl=0,El=null,Il=null,Pl=0,Ml=0,jl=Sr(0),Rl=0,Ol=null,Dl=0,Al=0,Ll=0,Fl=null,zl=null,Ul=0,Wl=1/0,Vl=null,Bl=!1,Hl=null,ql=null,Yl=!1,Gl=null,Kl=0,$l=0,Ql=null,Jl=-1,Xl=0;function Zl(){return 0!==(6&Tl)?Je():-1!==Jl?Jl:Jl=Je()}function ec(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Pl?Pl&-Pl:null!==ms.transition?(0===Xl&&(Xl=mt()),Xl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function tc(e,t,n,i){if(50<$l)throw $l=0,Ql=null,Error(s(185));vt(e,n,i),0!==(2&Tl)&&e===El||(e===El&&(0===(2&Tl)&&(Al|=n),4===Rl&&ac(e,Pl)),nc(e,i),1===n&&0===Tl&&0===(1&t.mode)&&(Wl=Je()+500,zr&&Vr()))}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&i)||(r[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var i=ht(e,e===El?Pl:0);if(0===i)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){zr=!0,Wr(e)}(oc.bind(null,e)):Wr(oc.bind(null,e)),ar(function(){0===(6&Tl)&&Vr()}),n=null;else{switch(xt(i)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Ec(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,Xl=0,0!==(6&Tl))throw Error(s(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var i=ht(e,e===El?Pl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=mc(e,i);else{t=i;var r=Tl;Tl|=2;var a=fc();for(El===e&&Pl===t||(Vl=null,Wl=Je()+500,dc(e,t));;)try{vc();break}catch(l){hc(e,l)}Cs(),Sl.current=a,Tl=r,null!==Il?t=0:(El=null,Pl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(i=r,t=rc(e,r))),1===t)throw n=Ol,dc(e,0),ac(e,i),nc(e,Je()),n;if(6===t)ac(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!oi(s(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=mc(e,i))&&(0!==(a=pt(e))&&(i=a,t=rc(e,a))),1===t))throw n=Ol,dc(e,0),ac(e,i),nc(e,Je()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:xc(e,zl,Vl);break;case 3:if(ac(e,i),(130023424&i)===i&&10<(t=Ul+500-Je())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&i)!==i){Zl(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(xc.bind(null,e,zl,Vl),t);break}xc(e,zl,Vl);break;case 4:if(ac(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var o=31-at(i);a=1<<o,(o=t[o])>r&&(r=o),i&=~a}if(i=r,10<(i=(120>(i=Je()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*kl(i/1960))-i)){e.timeoutHandle=ir(xc.bind(null,e,zl,Vl),i);break}xc(e,zl,Vl);break;default:throw Error(s(329))}}}return nc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function rc(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=zl,zl=n,null!==t&&sc(t)),e}function sc(e){null===zl?zl=e:zl.push.apply(zl,e)}function ac(e,t){for(t&=~Ll,t&=~Al,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),i=1<<n;e[n]=-1,t&=~i}}function oc(e){if(0!==(6&Tl))throw Error(s(327));_c();var t=ht(e,0);if(0===(1&t))return nc(e,Je()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var i=pt(e);0!==i&&(t=i,n=rc(e,i))}if(1===n)throw n=Ol,dc(e,0),ac(e,t),nc(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,zl,Vl),nc(e,Je()),null}function lc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(Wl=Je()+500,zr&&Vr())}}function cc(e){null!==Gl&&0===Gl.tag&&0===(6&Tl)&&_c();var t=Tl;Tl|=1;var n=Cl.transition,i=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=i,Cl.transition=n,0===(6&(Tl=t))&&Vr()}}function uc(){Ml=jl.current,Nr(jl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Il)for(n=Il.return;null!==n;){var i=n;switch(ts(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Rr();break;case 3:Qs(),Nr(Ir),Nr(Er),na();break;case 5:Xs(i);break;case 4:Qs();break;case 13:case 19:Nr(Zs);break;case 10:Ts(i.type._context);break;case 22:case 23:uc()}n=n.return}if(El=e,Il=e=jc(e.current,null),Pl=Ml=t,Rl=0,Ol=null,Ll=Al=Dl=0,zl=Fl=null,null!==Ms){for(t=0;t<Ms.length;t++)if(null!==(i=(n=Ms[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var a=s.next;s.next=r,i.next=a}n.pending=i}Ms=null}return e}function hc(e,t){for(;;){var n=Il;try{if(Cs(),ia.current=Ja,ca){for(var i=aa.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ca=!1}if(sa=0,la=oa=aa=null,ua=!1,da=0,Nl.current=null,null===n||null===n.return){Rl=1,Ol=t,Il=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&mo(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(a,u,t),pc();break e}c=Error(s(426))}else if(rs&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),ps(lo(c,l));break e}}a=c=lo(c,l),4!==Rl&&(Rl=2),null===Fl?Fl=[a]:Fl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Ws(a,fo(0,c,t));break e;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Ws(a,po(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(x){t=x,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function fc(){var e=Sl.current;return Sl.current=Ja,null===e?Ja:e}function pc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===El||0===(268435455&Dl)&&0===(268435455&Al)||ac(El,Pl)}function mc(e,t){var n=Tl;Tl|=2;var i=fc();for(El===e&&Pl===t||(Vl=null,dc(e,t));;)try{gc();break}catch(r){hc(e,r)}if(Cs(),Tl=n,Sl.current=i,null!==Il)throw Error(s(261));return El=null,Pl=0,Rl}function gc(){for(;null!==Il;)yc(Il)}function vc(){for(;null!==Il&&!$e();)yc(Il)}function yc(e){var t=wl(e.alternate,e,Ml);e.memoizedProps=e.pendingProps,null===t?bc(e):Il=t,Nl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Yo(n,t,Ml)))return void(Il=n)}else{if(null!==(n=Go(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Rl=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Rl&&(Rl=5)}function xc(e,t,n){var i=bt,r=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,i){do{_c()}while(null!==Gl);if(0!==(6&Tl))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-at(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,a),e===El&&(Il=El=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Ec(tt,function(){return _c(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var o=bt;bt=1;var l=Tl;Tl|=4,Nl.current=null,function(e,t){if(er=Ht,fi(e=hi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(_){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==r&&3!==h.nodeType||(l=o+r),h!==a||0!==i&&3!==h.nodeType||(c=o+i),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===r&&(l=o),f===a&&++d===i&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Ht=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(s(163))}}catch(_){kc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}m=el,el=!1}(e,n),ml(n,e),pi(tr),Ht=!!er,tr=er=null,e.current=n,vl(n,e,r),Qe(),Tl=l,bt=o,Cl.transition=a}else e.current=n;if(Yl&&(Yl=!1,Gl=e,Kl=r),a=e.pendingLanes,0===a&&(ql=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Je()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Bl)throw Bl=!1,e=Hl,Hl=null,e;0!==(1&Kl)&&0!==e.tag&&_c(),a=e.pendingLanes,0!==(1&a)?e===Ql?$l++:($l=0,Ql=e):$l=0,Vr()}(e,t,n,i)}finally{Cl.transition=r,bt=i}return null}function _c(){if(null!==Gl){var e=xt(Kl),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Gl)var i=!1;else{if(e=Gl,Gl=null,Kl=0,0!==(6&Tl))throw Error(s(331));var r=Tl;for(Tl|=4,Jo=e.current;null!==Jo;){var a=Jo,o=a.child;if(0!==(16&Jo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Jo=u;null!==Jo;){var d=Jo;switch(d.tag){case 0:case 11:case 15:tl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Jo=h;else for(;null!==Jo;){var f=(d=Jo).sibling,p=d.return;if(rl(d),d===u){Jo=null;break}if(null!==f){f.return=p,Jo=f;break}Jo=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Jo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(a=Jo).flags))switch(a.tag){case 0:case 11:case 15:tl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Jo=y;break e}Jo=a.return}}var b=e.current;for(Jo=b;null!==Jo;){var x=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,Jo=x;else e:for(o=b;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(w){kc(l,l.return,w)}if(l===o){Jo=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Jo=_;break e}Jo=l.return}}if(Tl=r,Vr(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(w){}i=!0}return i}finally{bt=n,Cl.transition=t}}return!1}function wc(e,t,n){e=zs(e,t=fo(0,t=lo(n,t),1),1),t=Zl(),null!==e&&(vt(e,1,t),nc(e,t))}function kc(e,t,n){if(3===e.tag)wc(e,e,n);else for(;null!==t;){if(3===t.tag){wc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===ql||!ql.has(i))){t=zs(t,e=po(t,e=lo(n,e),1),1),e=Zl(),null!==t&&(vt(t,1,e),nc(t,e));break}}t=t.return}}function Sc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=Zl(),e.pingedLanes|=e.suspendedLanes&n,El===e&&(Pl&n)===n&&(4===Rl||3===Rl&&(130023424&Pl)===Pl&&500>Je()-Ul?dc(e,0):Ll|=n),nc(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=Zl();null!==(e=Os(e,t))&&(vt(e,t,n),nc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),Nc(e,n)}function Ec(e,t){return Ge(e,t)}function Ic(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,i){return new Ic(e,t,n,i)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function jc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,i,r,a){var o=2;if(i=e,"function"===typeof e)Mc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Oc(n.children,r,a,t);case S:o=8,r|=8;break;case N:return(e=Pc(12,n,t,2|r)).elementType=N,e.lanes=a,e;case I:return(e=Pc(13,n,t,r)).elementType=I,e.lanes=a,e;case P:return(e=Pc(19,n,t,r)).elementType=P,e.lanes=a,e;case R:return Dc(n,r,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case T:o=9;break e;case E:o=11;break e;case M:o=14;break e;case j:o=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(o,n,t,r)).elementType=e,t.type=i,t.lanes=a,t}function Oc(e,t,n,i){return(e=Pc(7,e,i,t)).lanes=n,e}function Dc(e,t,n,i){return(e=Pc(22,e,i,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Ac(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Lc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,i,r,s,a,o,l){return e=new Fc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},As(s),e}function Uc(e){if(!e)return Tr;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(jr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(jr(n))return Dr(e,n,t)}return t}function Wc(e,t,n,i,r,s,a,o,l){return(e=zc(n,i,!0,e,0,s,0,o,l)).context=Uc(null),n=e.current,(s=Fs(i=Zl(),r=ec(n))).callback=void 0!==t&&null!==t?t:null,zs(n,s,r),e.current.lanes=r,vt(e,r,i),nc(e,i),e}function Vc(e,t,n,i){var r=t.current,s=Zl(),a=ec(r);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,a)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=zs(r,t,a))&&(tc(e,r,a,s),Us(e,r,a)),a}function Bc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}wl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ir.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Io(t),fs();break;case 5:Js(t);break;case 1:jr(t.type)&&Ar(t);break;case 4:$s(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Cr(ws,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Cr(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ao(e,t,n):(Cr(Zs,1&Zs.current),null!==(e=Bo(e,t,n))?e.sibling:null);Cr(Zs,1&Zs.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Wo(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Cr(Zs,Zs.current),i)break;return null;case 22:case 23:return t.lanes=0,So(e,t,n)}return Bo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,rs&&0!==(1048576&t.flags)&&Zr(t,Yr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Vo(e,t),e=t.pendingProps;var r=Mr(t,Er.current);Is(t,n),r=ma(null,t,i,e,r,n);var a=ga();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,jr(i)?(a=!0,Ar(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,As(t),r.updater=io,t.stateNode=r,r._reactInternals=t,oo(t,i,e,n),t=Eo(null,t,i,!0,a,n)):(t.tag=0,rs&&a&&es(t),xo(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Vo(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Mc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===M)return 14}return 2}(i),e=to(i,e),r){case 0:t=Co(null,t,i,e,n);break e;case 1:t=To(null,t,i,e,n);break e;case 11:t=_o(null,t,i,e,n);break e;case 14:t=wo(null,t,i,to(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Co(e,t,i,r=t.elementType===i?r:to(i,r),n);case 1:return i=t.type,r=t.pendingProps,To(e,t,i,r=t.elementType===i?r:to(i,r),n);case 3:e:{if(Io(t),null===e)throw Error(s(387));i=t.pendingProps,r=(a=t.memoizedState).element,Ls(e,t),Vs(t,i,null,n);var o=t.memoizedState;if(i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Po(e,t,i,n,r=lo(Error(s(423)),t));break e}if(i!==r){t=Po(e,t,i,n,r=lo(Error(s(424)),t));break e}for(is=cr(t.stateNode.containerInfo.firstChild),ns=t,rs=!0,ss=null,n=_s(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),i===r){t=Bo(e,t,n);break e}xo(e,t,i,n)}t=t.child}return t;case 5:return Js(t),null===e&&cs(t),i=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,o=r.children,nr(i,r)?o=null:null!==a&&nr(i,a)&&(t.flags|=32),No(e,t),xo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ao(e,t,n);case 4:return $s(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=xs(t,null,i,n):xo(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,_o(e,t,i,r=t.elementType===i?r:to(i,r),n);case 7:return xo(e,t,t.pendingProps,n),t.child;case 8:case 12:return xo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,a=t.memoizedProps,o=r.value,Cr(ws,i._currentValue),i._currentValue=o,null!==a)if(oi(a.value,o)){if(a.children===r.children&&!Ir.current){t=Bo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=Fs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Es(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Es(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}xo(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Is(t,n),i=i(r=Ps(r)),t.flags|=1,xo(e,t,i,n),t.child;case 14:return r=to(i=t.type,t.pendingProps),wo(e,t,i,r=to(i.type,r),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:to(i,r),Vo(e,t),t.tag=1,jr(i)?(e=!0,Ar(t)):e=!1,Is(t,n),so(t,i,r),oo(t,i,r,n),Eo(null,t,i,!0,e,n);case 19:return Wo(e,t,n);case 22:return So(e,t,n)}throw Error(s(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Xc(e,t,n,i,r){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof r){var o=r;r=function(){var e=Bc(a);o.call(e)}}Vc(t,a,e,r)}else a=function(e,t,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var e=Bc(a);s.call(e)}}var a=Wc(t,i,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[pr]=a.current,Vi(8===e.nodeType?e.parentNode:e),cc(),a}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var o=i;i=function(){var e=Bc(l);o.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pr]=l.current,Vi(8===e.nodeType?e.parentNode:e),cc(function(){Vc(t,l,n,i)}),l}(n,t,e,r,i);return Bc(a)}Kc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Vc(e,t,null,null)},Kc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc(function(){Vc(null,e,null,null)}),t[pr]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Lt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),nc(t,Je()),0===(6&Tl)&&(Wl=Je()+500,Vr()))}break;case 13:cc(function(){var t=Os(e,1);if(null!==t){var n=Zl();tc(t,e,1,n)}}),qc(e,1)}},wt=function(e){if(13===e.tag){var t=Os(e,134217728);if(null!==t)tc(t,e,134217728,Zl());qc(e,134217728)}},kt=function(e){if(13===e.tag){var t=ec(e),n=Os(e,t);if(null!==n)tc(n,e,t,Zl());qc(e,t)}},St=function(){return bt},Nt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},we=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=_r(i);if(!r)throw Error(s(90));G(i),X(i,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=lc,Ie=cc;var Zc={usingClientEntryPoint:!1,Events:[br,xr,_r,Ce,Te,lc]},eu={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tu={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{rt=nu.inject(tu),st=nu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(s(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(s(299));var n=!1,i="",r=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,i,r),e[pr]=t.current,Vi(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(s(200));return Xc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,a="",o=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,r,0,a,o),e[pr]=t.current,Vi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Kc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(s(200));return Xc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(s(40));return!!e._reactRootContainer&&(cc(function(){Xc(null,null,e,!1,function(){e._reactRootContainer=null,e[pr]=null})}),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Qc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Xc(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},853(e,t,n){e.exports=n(234)},950(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var i=n(43),r=n(391);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u=n(579);const d=(0,i.createContext)(),h=()=>{const e=(0,i.useContext)(d);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},f={"demo@gymtracker.com":{uid:"demo-user-123",email:"demo@gymtracker.com",displayName:"Demo User",password:"demo123456"}},p=e=>{let{children:t}=e;const[n,r]=(0,i.useState)(null),[s,a]=(0,i.useState)(!0),[o,l]=(0,i.useState)(null);(0,i.useEffect)(()=>{const e=localStorage.getItem("gymtracker_user");if(e)try{const t=JSON.parse(e);r(t),h(t.uid)}catch(gn){console.error("Error loading saved user:",gn),localStorage.removeItem("gymtracker_user"),a(!1)}else a(!1)},[]);const h=async e=>{try{const t=localStorage.getItem("gymtracker_profile_".concat(e));if(t)l(JSON.parse(t));else{const t={uid:e,email:(null===n||void 0===n?void 0:n.email)||"",displayName:(null===n||void 0===n?void 0:n.displayName)||"User",bio:"",goals:"",experience:"beginner",createdAt:Date.now(),settings:{units:"lbs",theme:"dark",notifications:!0,weeklyGoal:4,privacy:"private",autoBackup:!0,soundEffects:!0,emailNotifications:!1},stats:{totalWorkouts:0,totalVolume:0,joinDate:Date.now()}};localStorage.setItem("gymtracker_profile_".concat(e),JSON.stringify(t)),l(t)}a(!1)}catch(gn){console.error("Error loading user profile:",gn),a(!1)}},p=e=>{if("demo-user-123"!==e)return;const t={workout1:{name:"Push Day",date:"2024-01-15",exercises:[{name:"Bench Press",muscleGroup:"Chest",sets:3,reps:8,weight:185,volume:4440,oneRepMax:231},{name:"Overhead Press",muscleGroup:"Shoulders",sets:3,reps:10,weight:135,volume:4050,oneRepMax:180}],totalVolume:8490,timestamp:Date.now()-432e6},workout2:{name:"Pull Day",date:"2024-01-17",exercises:[{name:"Deadlift",muscleGroup:"Back",sets:3,reps:5,weight:225,volume:3375,oneRepMax:253},{name:"Pull-ups",muscleGroup:"Back",sets:3,reps:12,weight:0,volume:0,oneRepMax:0}],totalVolume:3375,timestamp:Date.now()-2592e5}},n={metric1:{date:"2024-01-10",weight:180,bodyFat:15.5,notes:"Starting measurements",timestamp:Date.now()-864e6},metric2:{date:"2024-01-20",weight:182,bodyFat:15.2,notes:"Good progress",timestamp:Date.now()-864e5}};localStorage.setItem("gymtracker_workouts_".concat(e),JSON.stringify(t)),localStorage.setItem("gymtracker_metrics_".concat(e),JSON.stringify(n))},m={currentUser:n,userProfile:o,signup:async(e,t,n)=>{try{const i=JSON.parse(localStorage.getItem("gymtracker_all_users")||"{}");if(i[e]||f[e])throw new Error("User already exists");const s={uid:"user-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),email:e,displayName:n,password:t,createdAt:Date.now()},a={uid:s.uid,email:s.email,displayName:n,bio:"",goals:"",experience:"beginner",createdAt:Date.now(),settings:{units:"lbs",theme:"dark",notifications:!0,weeklyGoal:4,privacy:"private",autoBackup:!0,soundEffects:!0,emailNotifications:!1},stats:{totalWorkouts:0,totalVolume:0,joinDate:Date.now()}};return i[e]=s,localStorage.setItem("gymtracker_all_users",JSON.stringify(i)),localStorage.setItem("gymtracker_profile_".concat(s.uid),JSON.stringify(a)),localStorage.setItem("gymtracker_user",JSON.stringify(s)),r(s),l(a),console.log("User created successfully:",s.email),{user:s}}catch(gn){throw console.error("Signup error:",gn),gn}},signin:async(e,t)=>{try{if(f[e]&&f[e].password===t){const t=f[e];return localStorage.setItem("gymtracker_user",JSON.stringify(t)),r(t),p(t.uid),await h(t.uid),{user:t}}const n=JSON.parse(localStorage.getItem("gymtracker_all_users")||"{}");if(n[e]&&n[e].password===t){const t=n[e];return localStorage.setItem("gymtracker_user",JSON.stringify(t)),r(t),await h(t.uid),{user:t}}throw new Error("Invalid credentials")}catch(gn){throw console.error("Signin error:",gn),gn}},logout:async()=>{localStorage.removeItem("gymtracker_user"),r(null),l(null)},resetPassword:async e=>Promise.resolve(),updateUserProfile:async e=>{if(n)try{const t=c(c({},o),e);localStorage.setItem("gymtracker_profile_".concat(n.uid),JSON.stringify(t)),l(t)}catch(gn){throw console.error("Error updating profile:",gn),gn}},getUserDataPath:e=>n?"users/".concat(n.uid,"/").concat(e):null,loading:s};return(0,u.jsx)(d.Provider,{value:m,children:t})};function m(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var g={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const v=["color","size","strokeWidth","absoluteStrokeWidth","className","children"],y=(e,t)=>{const n=(0,i.forwardRef)((n,r)=>{let{color:s="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:u="",children:d}=n,h=m(n,v);return(0,i.createElement)("svg",c(c({ref:r},g),{},{width:a,height:a,stroke:s,strokeWidth:l?24*Number(o)/Number(a):o,className:["lucide","lucide-".concat((f=e,f.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim())),u].join(" ")},h),[...t.map(e=>{let[t,n]=e;return(0,i.createElement)(t,n)}),...Array.isArray(d)?d:[d]]);var f});return n.displayName="".concat(e),n},b=y("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),x=y("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),_=y("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),w=y("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),k=y("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),S=y("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),N=y("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),C=y("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),T=y("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]),E=y("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),I=e=>{let{activeTab:t,setActiveTab:n,isMobileMenuOpen:i,setIsMobileMenuOpen:r}=e;const s=[{id:"dashboard",label:"Dashboard",icon:b,color:"from-blue-500 to-blue-600"},{id:"logger",label:"Log Workout",icon:x,color:"from-green-500 to-green-600"},{id:"charts",label:"Analytics",icon:_,color:"from-purple-500 to-purple-600"},{id:"metrics",label:"Body Metrics",icon:w,color:"from-orange-500 to-orange-600"},{id:"records",label:"Records",icon:k,color:"from-yellow-500 to-yellow-600"},{id:"calendar",label:"Calendar",icon:S,color:"from-pink-500 to-pink-600"}];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"md:hidden fixed top-4 left-4 z-50",children:(0,u.jsx)("button",{onClick:()=>r(!i),className:"glass p-4 rounded-2xl text-white hover:bg-dark-700/50 transition-all duration-200 shadow-lg",children:i?(0,u.jsx)(N,{size:28}):(0,u.jsx)(C,{size:28})})}),i&&(0,u.jsx)("div",{className:"md:hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-40 animate-fade-in",onClick:()=>r(!1)}),(0,u.jsx)("nav",{className:"\n        fixed md:static top-0 left-0 h-full md:h-auto w-72 md:w-64\n        glass md:bg-transparent border-r border-dark-700/50 md:border-r-0\n        transform ".concat(i?"translate-x-0":"-translate-x-full"," md:transform-none\n        transition-all duration-300 ease-in-out z-40 md:z-auto\n        md:flex md:flex-col md:border-r md:border-dark-700\n      "),children:(0,u.jsxs)("div",{className:"p-6 md:p-4",children:[(0,u.jsx)("div",{className:"mb-8 md:mb-6",children:(0,u.jsxs)("div",{className:"flex items-center gap-3",children:[(0,u.jsx)("div",{className:"p-2 bg-gradient-to-r from-primary-600 to-primary-700 rounded-lg",children:(0,u.jsx)(T,{className:"text-white",size:24})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-xl font-bold gradient-text",children:"GymTracker"}),(0,u.jsx)("p",{className:"text-xs text-dark-400",children:"Pro Fitness"})]})]})}),(0,u.jsx)("div",{className:"space-y-2",children:s.map(e=>{const i=e.icon,s=t===e.id;return(0,u.jsxs)("button",{onClick:()=>{n(e.id),r(!1)},className:"\n                    w-full flex items-center gap-4 px-6 py-4 rounded-2xl\n                    transition-all duration-200 group relative overflow-hidden\n                    text-lg font-medium min-h-[64px]\n                    ".concat(s?"bg-gradient-to-r ".concat(e.color," text-white shadow-lg"):"text-dark-300 hover:bg-dark-700/50 hover:text-white","\n                  "),children:[(0,u.jsx)(i,{size:24,className:"".concat(s?"text-white":"text-dark-400 group-hover:text-white"," transition-colors")}),(0,u.jsx)("span",{className:"font-semibold",children:e.label}),s&&(0,u.jsx)("div",{className:"absolute right-3 w-3 h-3 bg-white rounded-full animate-pulse"})]},e.id)})}),(0,u.jsxs)("div",{className:"mt-8 pt-6 border-t border-dark-700",children:[(0,u.jsx)("div",{className:"text-xs text-dark-500 mb-3 px-4",children:"Account"}),(0,u.jsxs)("button",{onClick:()=>{n("settings"),r(!1)},className:"w-full flex items-center gap-4 px-6 py-4 rounded-2xl text-dark-300 hover:bg-dark-700/50 hover:text-white transition-all duration-200 text-lg font-medium min-h-[64px] ".concat("settings"===t?"bg-gradient-to-r from-gray-500 to-gray-600 text-white":""),children:[(0,u.jsx)(E,{size:24}),(0,u.jsx)("span",{className:"font-semibold",children:"Settings"})]})]})]})})]})},P=!1,M=!1,j="${JSCORE_VERSION}",R=function(e,t){if(!e)throw O(t)},O=function(e){return new Error("Firebase Database ("+j+") INTERNAL ASSERT FAILED: "+e)},D=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},A={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],s=r+1<e.length,a=s?e[r+1]:0,o=r+2<e.length,l=o?e[r+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),i.push(n[c],n[u],n[d],n[h])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(D(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],s=r<e.length?n[e.charAt(r)]:0;++r;const a=r<e.length?n[e.charAt(r)]:64;++r;const o=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==s||null==a||null==o)throw new L;const l=t<<2|s>>4;if(i.push(l),64!==a){const e=s<<4&240|a>>2;if(i.push(e),64!==o){const e=a<<6&192|o;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class L extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const F=function(e){const t=D(e);return A.encodeByteArray(t,!0)},z=function(e){return F(e).replace(/\./g,"")},U=function(e){try{return A.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function W(e){return V(void 0,e)}function V(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&B(n)&&(e[n]=V(e[n],t[n]));return e}function B(e){return"__proto__"!==e}const H=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,q=()=>{try{return H()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&U(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Y=e=>{var t,n;return null===(n=null===(t=q())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},G=e=>{const t=Y(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]},K=()=>{var e;return null===(e=q())||void 0===e?void 0:e.config},$=e=>{var t;return null===(t=q())||void 0===t?void 0:t["_".concat(e)]};class Q{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function J(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[z(JSON.stringify({alg:"none",type:"JWT"})),z(JSON.stringify(s)),""].join(".")}function X(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Z(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(X())}function ee(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function te(){return!0===P||!0===M}class ne extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ie.prototype.create)}}class ie{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),i=this.errors[e],r=i?function(e,t){return e.replace(re,(e,n)=>{const i=t[n];return null!=i?String(i):"<".concat(n,"?>")})}(i,t):"Error",s="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new ne(n,s,t)}}const re=/\{\$([^}]+)}/g;function se(e){return JSON.parse(e)}function ae(e){return JSON.stringify(e)}const oe=function(e){let t={},n={},i={},r="";try{const s=e.split(".");t=se(U(s[0])||""),n=se(U(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:i,signature:r}};function le(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ce(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ue(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function de(e,t,n){const i={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i}function he(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(fe(n)&&fe(s)){if(!he(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function fe(e){return null!==e&&"object"===typeof e}function pe(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function me(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}}),t}function ge(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class ve{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let i,r,s=this.chain_[0],a=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(i=l^a&(o^l),r=1518500249):(i=a^o^l,r=1859775393):u<60?(i=a&o|l&(a|o),r=2400959708):(i=a^o^l,r=3395469782);const e=(s<<5|s>>>27)+i+c+r+n[u]&4294967295;c=l,l=o,o=4294967295&(a<<30|a>>>2),a=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let i=0;const r=this.buf_;let s=this.inbuf_;for(;i<t;){if(0===s)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if("string"===typeof e){for(;i<t;)if(r[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}else for(;i<t;)if(r[s]=e[i],++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let i=0;i<5;i++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[i]>>t&255,++n;return e}}class ye{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=be),void 0===i.error&&(i.error=be),void 0===i.complete&&(i.complete=be);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}}),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function be(){}function xe(e,t){return"".concat(e," failed: ").concat(t," argument ")}const _e=function(e){let t=0;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};function we(e){return e&&e._delegate?e._delegate:e}class ke{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Se="[DEFAULT]";class Ne{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Q;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Se})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:i});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(i){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===Se?void 0:r),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(s){}var r;return i||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se;return this.component?this.component.multipleInstances?e:Se:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ce{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ne(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Te=[];var Ee;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ee||(Ee={}));const Ie={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},Pe=Ee.INFO,Me={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},je=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),i=Me[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];console[i]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Re{constructor(e){this.name=e,this._logLevel=Pe,this._logHandler=je,this._userLogHandler=null,Te.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Ie[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...t),this._logHandler(this,Ee.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...t),this._logHandler(this,Ee.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...t),this._logHandler(this,Ee.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...t),this._logHandler(this,Ee.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...t),this._logHandler(this,Ee.ERROR,...t)}}let Oe,De;const Ae=new WeakMap,Le=new WeakMap,Fe=new WeakMap,ze=new WeakMap,Ue=new WeakMap;let We={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Le.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Fe.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return He(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ve(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(De||(De=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(qe(this),n),He(Ae.get(this))}:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return He(e.apply(qe(this),n))}:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=e.call(qe(this),t,...i);return Fe.set(s,t.sort?t.sort():[t]),He(s)}}function Be(e){return"function"===typeof e?Ve(e):(e instanceof IDBTransaction&&function(e){if(Le.has(e))return;const t=new Promise((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)});Le.set(e,t)}(e),t=e,(Oe||(Oe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,We):e);var t}function He(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(He(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&Ae.set(t,e)}).catch(()=>{}),Ue.set(t,e),t}(e);if(ze.has(e))return ze.get(e);const t=Be(e);return t!==e&&(ze.set(e,t),Ue.set(t,e)),t}const qe=e=>Ue.get(e);const Ye=["get","getKey","getAll","getAllKeys","count"],Ge=["put","add","delete","clear"],Ke=new Map;function $e(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Ke.get(t))return Ke.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Ge.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Ye.includes(n))return;const s=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return i&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),r&&t.done]))[0]};return Ke.set(t,s),s}!function(e){We=e(We)}(e=>c(c({},e),{},{get:(t,n,i)=>$e(t,n)||e.get(t,n,i),has:(t,n)=>!!$e(t,n)||e.has(t,n)}));class Qe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Je="@firebase/app",Xe="0.10.13",Ze=new Re("@firebase/app"),et="@firebase/app-compat",tt="@firebase/analytics-compat",nt="@firebase/analytics",it="@firebase/app-check-compat",rt="@firebase/app-check",st="@firebase/auth",at="@firebase/auth-compat",ot="@firebase/database",lt="@firebase/data-connect",ct="@firebase/database-compat",ut="@firebase/functions",dt="@firebase/functions-compat",ht="@firebase/installations",ft="@firebase/installations-compat",pt="@firebase/messaging",mt="@firebase/messaging-compat",gt="@firebase/performance",vt="@firebase/performance-compat",yt="@firebase/remote-config",bt="@firebase/remote-config-compat",xt="@firebase/storage",_t="@firebase/storage-compat",wt="@firebase/firestore",kt="@firebase/vertexai-preview",St="@firebase/firestore-compat",Nt="firebase",Ct="[DEFAULT]",Tt={[Je]:"fire-core",[et]:"fire-core-compat",[nt]:"fire-analytics",[tt]:"fire-analytics-compat",[rt]:"fire-app-check",[it]:"fire-app-check-compat",[st]:"fire-auth",[at]:"fire-auth-compat",[ot]:"fire-rtdb",[lt]:"fire-data-connect",[ct]:"fire-rtdb-compat",[ut]:"fire-fn",[dt]:"fire-fn-compat",[ht]:"fire-iid",[ft]:"fire-iid-compat",[pt]:"fire-fcm",[mt]:"fire-fcm-compat",[gt]:"fire-perf",[vt]:"fire-perf-compat",[yt]:"fire-rc",[bt]:"fire-rc-compat",[xt]:"fire-gcs",[_t]:"fire-gcs-compat",[wt]:"fire-fst",[St]:"fire-fst-compat",[kt]:"fire-vertex","fire-js":"fire-js",[Nt]:"fire-js-all"},Et=new Map,It=new Map,Pt=new Map;function Mt(e,t){try{e.container.addComponent(t)}catch(n){Ze.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function jt(e){const t=e.name;if(Pt.has(t))return Ze.debug("There were multiple attempts to register component ".concat(t,".")),!1;Pt.set(t,e);for(const n of Et.values())Mt(n,e);for(const n of It.values())Mt(n,e);return!0}function Rt(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ot(e){return void 0!==e.settings}const Dt=new ie("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class At{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ke("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dt.create("app-deleted",{appName:this._name})}}const Lt="10.14.1";function Ft(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:Ct,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!==typeof r||!r)throw Dt.create("bad-app-name",{appName:String(r)});if(n||(n=K()),!n)throw Dt.create("no-options");const s=Et.get(r);if(s){if(he(n,s.options)&&he(i,s.config))return s;throw Dt.create("duplicate-app",{appName:r})}const a=new Ce(r);for(const l of Pt.values())a.addComponent(l);const o=new At(n,i,a);return Et.set(r,o),o}function zt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct;const t=Et.get(e);if(!t&&e===Ct&&K())return Ft();if(!t)throw Dt.create("no-app",{appName:e});return t}function Ut(e,t,n){var i;let r=null!==(i=Tt[e])&&void 0!==i?i:e;n&&(r+="-".concat(n));const s=r.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=['Unable to register library "'.concat(r,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),s&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ze.warn(e.join(" "))}jt(new ke("".concat(r,"-version"),()=>({library:r,version:t}),"VERSION"))}const Wt="firebase-heartbeat-store";let Vt=null;function Bt(){return Vt||(Vt=function(e,t){let{blocked:n,upgrade:i,blocking:r,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=He(a);return i&&a.addEventListener("upgradeneeded",e=>{i(He(a.result),e.oldVersion,e.newVersion,He(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Wt)}catch(n){console.warn(n)}}}).catch(e=>{throw Dt.create("idb-open",{originalErrorMessage:e.message})})),Vt}async function Ht(e,t){try{const n=(await Bt()).transaction(Wt,"readwrite"),i=n.objectStore(Wt);await i.put(t,qt(e)),await n.done}catch(n){if(n instanceof ne)Ze.warn(n.message);else{const e=Dt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Ze.warn(e.message)}}}function qt(e){return"".concat(e.name,"!").concat(e.options.appId)}class Yt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Kt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Gt();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(e=>e.date===i))return;return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(n){Ze.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Gt(),{heartbeatsToSend:n,unsentEntries:i}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=e.slice();for(const r of e){const e=n.find(e=>e.agent===r.agent);if(e){if(e.dates.push(r.date),$t(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),$t(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=z(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return Ze.warn(t),""}}}function Gt(){return(new Date).toISOString().substring(0,10)}class Kt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(e){return!1}}()&&new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(gn){t(gn)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Bt()).transaction(Wt),n=await t.objectStore(Wt).get(qt(e));return await t.done,n}catch(t){if(t instanceof ne)Ze.warn(t.message);else{const e=Dt.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Ze.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ht(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ht(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function $t(e){return z(JSON.stringify({version:2,heartbeats:e})).length}var Qt;Qt="",jt(new ke("platform-logger",e=>new Qe(e),"PRIVATE")),jt(new ke("heartbeat",e=>new Yt(e),"PRIVATE")),Ut(Je,Xe,Qt),Ut(Je,Xe,"esm2017"),Ut("fire-js","");const Jt="@firebase/database",Xt="1.0.8";let Zt="";function en(e){Zt=e}class tn{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ae(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:se(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class nn{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return le(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const rn=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new tn(t)}}catch(t){}return new nn},sn=rn("localStorage"),an=rn("sessionStorage"),on=new Re("@firebase/database"),ln=function(){let e=1;return function(){return e++}}(),cn=function(e){const t=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);if(r>=55296&&r<=56319){const t=r-55296;i++,R(i<e.length,"Surrogate pair missing trail surrogate."),r=65536+(t<<10)+(e.charCodeAt(i)-56320)}r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):r<65536?(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t}(e),n=new ve;n.update(t);const i=n.digest();return A.encodeByteArray(i)},un=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=un.apply(null,n):e+="object"===typeof n?ae(n):n,e+=" "}return e};let dn=null,hn=!0;const fn=function(e,t){R(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(on.logLevel=Ee.VERBOSE,dn=on.log.bind(on),t&&an.set("logging_enabled",!0)):"function"===typeof e?dn=e:(dn=null,an.remove("logging_enabled"))},pn=function(){if(!0===hn&&(hn=!1,null===dn&&!0===an.get("logging_enabled")&&fn(!0)),dn){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=un.apply(null,t);dn(i)}},mn=function(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];pn(e,...n)}},gn=function(){const e="FIREBASE INTERNAL ERROR: "+un(...arguments);on.error(e)},vn=function(){const e="FIREBASE FATAL ERROR: ".concat(un(...arguments));throw on.error(e),new Error(e)},yn=function(){const e="FIREBASE WARNING: "+un(...arguments);on.warn(e)},bn=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},xn="[MIN_NAME]",_n="[MAX_NAME]",wn=function(e,t){if(e===t)return 0;if(e===xn||t===_n)return-1;if(t===xn||e===_n)return 1;{const n=Pn(e),i=Pn(t);return null!==n?null!==i?n-i===0?e.length-t.length:n-i:-1:null!==i?1:e<t?-1:1}},kn=function(e,t){return e===t?0:e<t?-1:1},Sn=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ae(t))},Nn=function(e){if("object"!==typeof e||null===e)return ae(e);const t=[];for(const i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)0!==i&&(n+=","),n+=ae(t[i]),n+=":",n+=Nn(e[t[i]]);return n+="}",n},Cn=function(e,t){const n=e.length;if(n<=t)return[e];const i=[];for(let r=0;r<n;r+=t)r+t>n?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i};function Tn(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const En=function(e){R(!bn(e),"Invalid JSON number");const t=1023;let n,i,r,s,a;0===e?(i=0,r=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),i=s+t,r=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(i=0,r=Math.round(e/Math.pow(2,-1074))));const o=[];for(a=52;a;a-=1)o.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)o.push(i%2?1:0),i=Math.floor(i/2);o.push(n?1:0),o.reverse();const l=o.join("");let c="";for(a=0;a<64;a+=8){let e=parseInt(l.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const In=new RegExp("^-?(0*)\\d{1,10}$"),Pn=function(e){if(In.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Mn=function(e){try{e()}catch(t){setTimeout(()=>{const e=t.stack||"";throw yn("Exception was thrown by user callback.",e),t},Math.floor(0))}},jn=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Rn{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then(e=>this.appCheck=e)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){yn('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class On{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(pn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',yn(e)}}class Dn{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Dn.OWNER="owner";const An="5",Ln=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Fn="ac",zn="websocket",Un="long_polling";class Wn{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=sn.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&sn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function Vn(e,t,n){let i;if(R("string"===typeof t,"typeof type must == string"),R("object"===typeof n,"typeof params must == object"),t===zn)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Un)throw new Error("Unknown connection type: "+t);i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const r=[];return Tn(n,(e,t)=>{r.push(e+"="+t)}),i+r.join("&")}class Bn{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;le(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return W(this.counters_)}}const Hn={},qn={};function Yn(e){const t=e.toString();return Hn[t]||(Hn[t]=new Bn),Hn[t]}class Gn{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Mn(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Kn="start";class $n{constructor(e,t,n,i,r,s,a){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=mn(e),this.stats_=Yn(t),this.urlFn=e=>(this.appCheckToken&&(e[Fn]=this.appCheckToken),Vn(t,Un,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Gn(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if(te()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Qn(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const[r,s,a,o,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,r===Kn)n.id=s,n.password=a;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,()=>{n.onClosed_()})):n.onClosed_()}},function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const[r,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(r,s)},()=>{this.onClosed_()},this.urlFn);const e={};e[Kn]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=An,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Fn]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Ln.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){$n.forceAllow_=!0}static forceDisallow(){$n.forceDisallow_=!0}static isAvailable(){return!te()&&(!!$n.forceAllow_||!$n.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=ae(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=F(t),i=Cn(n,1840);for(let r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(te())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=ae(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Qn{constructor(e,t,n,i){if(this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,te())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=ln(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Qn.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const i="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(r){pn("frame writing exception"),r.stack&&pn(r.stack),pn(r)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||pn("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+i+"="+e.seg+"&ts"+i+"="+e.ts+"&d"+i+"="+e.d,i++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),n()})}addTag(e,t){te()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{pn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}},Math.floor(1))}}let Jn=null;"undefined"!==typeof MozWebSocket?Jn=MozWebSocket:"undefined"!==typeof WebSocket&&(Jn=WebSocket);class Xn{constructor(e,t,n,i,r,s,a){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=mn(this.connId),this.stats_=Yn(t),this.connURL=Xn.connectionURL_(t,s,a,i,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,i,r){const s={};return s.v=An,!te()&&"undefined"!==typeof location&&location.hostname&&Ln.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),i&&(s[Fn]=i),r&&(s.p=r),Vn(e,zn,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,sn.set("previous_websocket_failure",!0);try{let e;if(te()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(An,"/").concat(Zt,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},i=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;i&&(e.proxy={origin:i})}this.mySock=new Jn(this.connURL,[],e)}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Xn.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Jn&&!Xn.forceDisallow_}static previouslyFailed(){return sn.isInMemoryStorage||!0===sn.get("previous_websocket_failure")}markConnectionHealthy(){sn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=se(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(R(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=ae(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Cn(t,16384);n.length>1&&this.sendString_(String(n.length));for(let i=0;i<n.length;i++)this.sendString_(n[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Xn.responsesRequiredToBeHealthy=2,Xn.healthyTimeout=3e4;class Zn{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[$n,Xn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Xn&&Xn.isAvailable();let n=t&&!Xn.previouslyFailed();if(e.webSocketOnly&&(t||yn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Xn];else{const e=this.transports_=[];for(const t of Zn.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Zn.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Zn.globalTransportInitialized_=!1;class ei{constructor(e,t,n,i,r,s,a,o,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=o,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=mn("c:"+this.id+":"),this.transportManager_=new Zn(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=jn(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Sn("t",e),n=Sn("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Sn("t",e),n=Sn("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Sn("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?gn("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):gn("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),An!==n&&yn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),jn(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):jn(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(sn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ti{put(e,t,n,i){}merge(e,t,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class ni{constructor(e){this.allowedEvents_=e,this.listeners_={},R(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(let e=0;e<r.length;e++)r[e].callback.apply(r[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const i=this.getInitialEvent(e);i&&t.apply(n,i)}off(e,t,n){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let r=0;r<i.length;r++)if(i[r].callback===t&&(!n||n===i[r].context))return void i.splice(r,1)}validateEventType_(e){R(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class ii extends ni{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Z()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ii}getInitialEvent(e){return R("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ri{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function si(){return new ri("")}function ai(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function oi(e){return e.pieces_.length-e.pieceNum_}function li(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ri(e.pieces_,t)}function ci(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ui(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function di(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ri(t,0)}function hi(e,t){const n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof ri)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new ri(n,0)}function fi(e){return e.pieceNum_>=e.pieces_.length}function pi(e,t){const n=ai(e),i=ai(t);if(null===n)return t;if(n===i)return pi(li(e),li(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function mi(e,t){if(oi(e)!==oi(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function gi(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(oi(e)>oi(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class vi{constructor(e,t){this.errorPrefix_=t,this.parts_=ui(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=_e(this.parts_[n]);yi(this)}}function yi(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+bi(e))}function bi(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class xi extends ni{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}static getInstance(){return new xi}getInitialEvent(e){return R("visible"===e,"Unknown event type: "+e),[this.visible_]}}const _i=1e3;class wi extends ti{constructor(e,t,n,i,r,s,a,o){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.authOverride_=o,this.id=wi.nextPersistentConnectionId_++,this.log_=mn("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_i,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,o&&!te())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");xi.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&ii.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const i=++this.requestNumber_,r={r:i,a:e,b:t};this.log_(ae(r)),R(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();const t=new Q,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),t.promise}listen(e,t,n,i){this.initConnection_();const r=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+r),this.listens.has(s)||this.listens.set(s,new Map),R(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),R(!this.listens.get(s).has(r),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(s).set(r,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(e){const t=e.query,n=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+n+" for "+i);const r={p:n};e.tag&&(r.q=t._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest("q",r,r=>{const s=r.d,a=r.s;wi.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(i))===e&&(this.log_("listen response",r),"ok"!==a&&this.removeListen_(n,i),e.onComplete&&e.onComplete(a,s))})}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&le(e,"w")){const n=ce(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();yn("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=oe(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=oe(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{const n=t.s,i=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,i))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){const n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),R(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,t)}sendUnlisten_(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);const r={p:e};i&&(r.q=n,r.t=i),this.sendRequest("n",r)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,i){const r={p:t,d:n};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,e=>{i&&setTimeout(()=>{i(e.s,e.d)},Math.floor(0))})}put(e,t,n,i){this.putInternal("p",e,t,n,i)}merge(e,t,n,i){this.putInternal("m",e,t,n,i)}putInternal(e,t,n,i,r){this.initConnection_();const s={p:t,d:n};void 0!==r&&(s.h=r),this.outstandingPuts_.push({action:e,request:s,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(n.s,n.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ae(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):gn("Unrecognized action received from server: "+ae(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){R(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_i,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=_i,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=_i),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+wi.nextConnectionId_++,r=this.lastSessionId;let s=!1,a=null;const o=function(){a?a.close():(s=!0,n())},l=function(e){R(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:o,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[o,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?pn("getToken() completed but was canceled"):(pn("getToken() completed. Creating connection."),this.authToken_=o&&o.accessToken,this.appCheckToken_=l&&l.token,a=new ei(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,e=>{yn(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},r))}catch(gn){this.log_("Failed to get token: "+gn),s||(this.repoInfo_.nodeAdmin&&yn(gn),o())}}}interrupt(e){pn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){pn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ue(this.interruptReasons_)&&(this.reconnectDelay_=_i,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>Nn(e)).join("$"):"default";const i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const n=new ri(e).toString();let i;if(this.listens.has(n)){const e=this.listens.get(n);i=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,t){pn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){pn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";te()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Zt.replace(/\./g,"-")]=1,Z()?e["framework.cordova"]=1:ee()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ii.getInstance().currentlyOnline();return ue(this.interruptReasons_)&&e}}wi.nextPersistentConnectionId_=0,wi.nextConnectionId_=0;class ki{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ki(e,t)}}class Si{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new ki(xn,e),i=new ki(xn,t);return 0!==this.compare(n,i)}minPost(){return ki.MIN}}let Ni;class Ci extends Si{static get __EMPTY_NODE(){return Ni}static set __EMPTY_NODE(e){Ni=e}compare(e,t){return wn(e.name,t.name)}isDefinedOn(e){throw O("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ki.MIN}maxPost(){return new ki(_n,Ni)}makePost(e,t){return R("string"===typeof e,"KeyIndex indexValue must always be a string."),new ki(e,Ni)}toString(){return".key"}}const Ti=new Ci;class Ei{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ii{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:Ii.RED,this.left=null!=i?i:Pi.EMPTY_NODE,this.right=null!=r?r:Pi.EMPTY_NODE}copy(e,t,n,i,r){return new Ii(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Pi.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,i;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Pi.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ii.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ii.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ii.RED=!0,Ii.BLACK=!1;class Pi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pi.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Pi(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ii.BLACK,null,null))}remove(e){return new Pi(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ii.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,i=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ei(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Ei(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Ei(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Ei(this.root_,null,this.comparator_,!0,e)}}function Mi(e,t){return wn(e.name,t.name)}function ji(e,t){return wn(e,t)}let Ri;Pi.EMPTY_NODE=new class{copy(e,t,n,i,r){return this}insert(e,t,n){return new Ii(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Oi=function(e){return"number"===typeof e?"number:"+En(e):"string:"+e},Di=function(e){if(e.isLeafNode()){const t=e.val();R("string"===typeof t||"number"===typeof t||"object"===typeof t&&le(t,".sv"),"Priority must be a string or number.")}else R(e===Ri||e.isEmpty(),"priority of unexpected type.");R(e===Ri||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ai,Li,Fi;class zi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zi.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,R(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Di(this.priorityNode_)}static set __childrenNodeConstructor(e){Ai=e}static get __childrenNodeConstructor(){return Ai}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new zi(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:zi.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return fi(e)?this:".priority"===ai(e)?this.priorityNode_:zi.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:zi.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=ai(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(R(".priority"!==n||1===oi(e),".priority must be the last token in a path"),this.updateImmediateChild(n,zi.__childrenNodeConstructor.EMPTY_NODE.updateChild(li(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Oi(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?En(this.value_):this.value_,this.lazyHash_=cn(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===zi.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof zi.__childrenNodeConstructor?-1:(R(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,i=zi.VALUE_TYPE_ORDER.indexOf(t),r=zi.VALUE_TYPE_ORDER.indexOf(n);return R(i>=0,"Unknown leaf type: "+t),R(r>=0,"Unknown leaf type: "+n),i===r?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}zi.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Ui=new class extends Si{compare(e,t){const n=e.node.getPriority(),i=t.node.getPriority(),r=n.compareTo(i);return 0===r?wn(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ki.MIN}maxPost(){return new ki(_n,new zi("[PRIORITY-POST]",Fi))}makePost(e,t){const n=Li(e);return new ki(t,new zi("[PRIORITY-POST]",n))}toString(){return".priority"}},Wi=Math.log(2);class Vi{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Wi,10)),this.current_=this.count-1;const n=(i=this.count,parseInt(Array(i+1).join("1"),2));var i;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Bi=function(e,t,n,i){e.sort(t);const r=function(t,i){const s=i-t;let a,o;if(0===s)return null;if(1===s)return a=e[t],o=n?n(a):a,new Ii(o,a.node,Ii.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=r(t,l),u=r(l+1,i);return a=e[l],o=n?n(a):a,new Ii(o,a.node,Ii.BLACK,c,u)}},s=function(t){let i=null,s=null,a=e.length;const o=function(t,i){const s=a-t,o=a;a-=t;const c=r(s+1,o),u=e[s],d=n?n(u):u;l(new Ii(d,u.node,i,null,c))},l=function(e){i?(i.left=e,i=e):(s=e,i=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),i=Math.pow(2,t.count-(e+1));n?o(i,Ii.BLACK):(o(i,Ii.BLACK),o(i,Ii.RED))}return s}(new Vi(e.length));return new Pi(i||t,s)};let Hi;const qi={};class Yi{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return R(qi&&Ui,"ChildrenNode.ts has not been loaded"),Hi=Hi||new Yi({".priority":qi},{".priority":Ui}),Hi}get(e){const t=ce(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Pi?t:null}hasIndex(e){return le(this.indexSet_,e.toString())}addIndex(e,t){R(e!==Ti,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const r=t.getIterator(ki.Wrap);let s,a=r.getNext();for(;a;)i=i||e.isDefinedOn(a.node),n.push(a),a=r.getNext();s=i?Bi(n,e.getCompare()):qi;const o=e.toString(),l=Object.assign({},this.indexSet_);l[o]=e;const c=Object.assign({},this.indexes_);return c[o]=s,new Yi(c,l)}addToIndexes(e,t){const n=de(this.indexes_,(n,i)=>{const r=ce(this.indexSet_,i);if(R(r,"Missing index implementation for "+i),n===qi){if(r.isDefinedOn(e.node)){const n=[],i=t.getIterator(ki.Wrap);let s=i.getNext();for(;s;)s.name!==e.name&&n.push(s),s=i.getNext();return n.push(e),Bi(n,r.getCompare())}return qi}{const i=t.get(e.name);let r=n;return i&&(r=r.remove(new ki(e.name,i))),r.insert(e,e.node)}});return new Yi(n,this.indexSet_)}removeFromIndexes(e,t){const n=de(this.indexes_,n=>{if(n===qi)return n;{const i=t.get(e.name);return i?n.remove(new ki(e.name,i)):n}});return new Yi(n,this.indexSet_)}}let Gi;class Ki{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Di(this.priorityNode_),this.children_.isEmpty()&&R(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Gi||(Gi=new Ki(new Pi(ji),null,Yi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Gi}updatePriority(e){return this.children_.isEmpty()?this:new Ki(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?Gi:t}}getChild(e){const t=ai(e);return null===t?this:this.getImmediateChild(t).getChild(li(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(R(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new ki(e,t);let i,r;t.isEmpty()?(i=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(e,t),r=this.indexMap_.addToIndexes(n,this.children_));const s=i.isEmpty()?Gi:this.priorityNode_;return new Ki(i,s,r)}}updateChild(e,t){const n=ai(e);if(null===n)return t;{R(".priority"!==ai(e)||1===oi(e),".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(li(e),t);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,i=0,r=!0;if(this.forEachChild(Ui,(s,a)=>{t[s]=a.val(e),n++,r&&Ki.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):r=!1}),!e&&r&&i<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Oi(this.getPriority().val())+":"),this.forEachChild(Ui,(t,n)=>{const i=n.hash();""!==i&&(e+=":"+t+":"+i)}),this.lazyHash_=""===e?"":cn(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const i=this.resolveIndex_(n);if(i){const n=i.getPredecessorKey(new ki(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new ki(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new ki(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{const n=this.children_.getIteratorFrom(e.name,ki.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)<0;)n.getNext(),i=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{const n=this.children_.getReverseIteratorFrom(e.name,ki.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)>0;)n.getNext(),i=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===$i?-1:0}withIndex(e){if(e===Ti||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Ki(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Ti||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Ui),n=t.getIterator(Ui);let i=e.getNext(),r=n.getNext();for(;i&&r;){if(i.name!==r.name||!i.node.equals(r.node))return!1;i=e.getNext(),r=n.getNext()}return null===i&&null===r}return!1}return!1}}resolveIndex_(e){return e===Ti?null:this.indexMap_.get(e.toString())}}Ki.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const $i=new class extends Ki{constructor(){super(new Pi(ji),Ki.EMPTY_NODE,Yi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ki.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(ki,{MIN:{value:new ki(xn,Ki.EMPTY_NODE)},MAX:{value:new ki(_n,$i)}}),Ci.__EMPTY_NODE=Ki.EMPTY_NODE,zi.__childrenNodeConstructor=Ki,Ri=$i,function(e){Fi=e}($i);function Qi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Ki.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),R(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new zi(e,Qi(t))}if(e instanceof Array){let n=Ki.EMPTY_NODE;return Tn(e,(t,i)=>{if(le(e,t)&&"."!==t.substring(0,1)){const e=Qi(i);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}}),n.updatePriority(Qi(t))}{const n=[];let i=!1;if(Tn(e,(e,t)=>{if("."!==e.substring(0,1)){const r=Qi(t);r.isEmpty()||(i=i||!r.getPriority().isEmpty(),n.push(new ki(e,r)))}}),0===n.length)return Ki.EMPTY_NODE;const r=Bi(n,Mi,e=>e.name,ji);if(i){const e=Bi(n,Ui.getCompare());return new Ki(r,Qi(t),new Yi({".priority":e},{".priority":Ui}))}return new Ki(r,Qi(t),Yi.Default)}}!function(e){Li=e}(Qi);class Ji extends Si{constructor(e){super(),this.indexPath_=e,R(!fi(e)&&".priority"!==ai(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),i=this.extractChild(t.node),r=n.compareTo(i);return 0===r?wn(e.name,t.name):r}makePost(e,t){const n=Qi(e),i=Ki.EMPTY_NODE.updateChild(this.indexPath_,n);return new ki(t,i)}maxPost(){const e=Ki.EMPTY_NODE.updateChild(this.indexPath_,$i);return new ki(_n,e)}toString(){return ui(this.indexPath_,0).join("/")}}const Xi=new class extends Si{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?wn(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ki.MIN}maxPost(){return ki.MAX}makePost(e,t){const n=Qi(e);return new ki(t,n)}toString(){return".value"}};function Zi(e){return{type:"value",snapshotNode:e}}function er(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function tr(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function nr(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class ir{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ui}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return R(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return R(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:xn}hasEnd(){return this.endSet_}getIndexEndValue(){return R(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return R(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:_n}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return R(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ui}copy(){const e=new ir;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function rr(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Ui?n="$priority":e.index_===Xi?n="$value":e.index_===Ti?n="$key":(R(e.index_ instanceof Ji,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=ae(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=ae(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+ae(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=ae(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+ae(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function sr(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Ui&&(t.i=e.index_.toString()),t}class ar extends ti{constructor(e,t,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=mn("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(R(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,i){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const s=ar.getListenId_(e,n),a={};this.listens_[s]=a;const o=rr(e._queryParams);this.restRequest_(r+".json",o,(e,t)=>{let o=t;if(404===e&&(o=null,e=null),null===e&&this.onDataUpdate_(r,o,!1,n),ce(this.listens_,s)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",i(t,null)}})}unlisten(e,t){const n=ar.getListenId_(e,t);delete this.listens_[n]}get(e){const t=rr(e._queryParams),n=e._path.toString(),i=new Q;return this.restRequest_(n+".json",t,(e,t)=>{let r=t;404===e&&(r=null,e=null),null===e?(this.onDataUpdate_(n,r,!1,null),i.resolve(r)):i.reject(new Error(r))}),i.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(i=>{let[r,s]=i;r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+pe(t);this.log_("Sending REST request for "+a);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+a+" received. status:",o.status,"response:",o.responseText);let t=null;if(o.status>=200&&o.status<300){try{t=se(o.responseText)}catch(e){yn("Failed to parse JSON response for "+a+": "+o.responseText)}n(null,t)}else 401!==o.status&&404!==o.status&&yn("Got unsuccessful REST response for "+a+" Status: "+o.status),n(o.status);n=null}},o.open("GET",a,!0),o.send()})}}class or{constructor(){this.rootNode_=Ki.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function lr(){return{value:null,children:new Map}}function cr(e,t,n){if(fi(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const i=ai(t);e.children.has(i)||e.children.set(i,lr());cr(e.children.get(i),t=li(t),n)}}function ur(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((e,n)=>{t(n,e)})}(e,(e,i)=>{ur(i,new ri(t.toString()+"/"+e),n)})}class dr{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Tn(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}}class hr{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new dr(e);const n=1e4+2e4*Math.random();jn(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Tn(e,(e,i)=>{i>0&&le(this.statsToReport_,e)&&(t[e]=i,n=!0)}),n&&this.server_.reportStats(t),jn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var fr;function pr(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(fr||(fr={}));class mr{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=fr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(fi(this.path)){if(null!=this.affectedTree.value)return R(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ri(e));return new mr(si(),t,this.revert)}}return R(ai(this.path)===e,"operationForChild called for unrelated child."),new mr(li(this.path),this.affectedTree,this.revert)}}class gr{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=fr.OVERWRITE}operationForChild(e){return fi(this.path)?new gr(this.source,si(),this.snap.getImmediateChild(e)):new gr(this.source,li(this.path),this.snap)}}class vr{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=fr.MERGE}operationForChild(e){if(fi(this.path)){const t=this.children.subtree(new ri(e));return t.isEmpty()?null:t.value?new gr(this.source,si(),t.value):new vr(this.source,si(),t)}return R(ai(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new vr(this.source,li(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class yr{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(fi(e))return this.isFullyInitialized()&&!this.filtered_;const t=ai(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function br(e,t,n,i,r,s){const a=i.filter(e=>e.type===n);a.sort((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw O("Should only compare child_ events.");const i=new ki(t.childName,t.snapshotNode),r=new ki(n.childName,n.snapshotNode);return e.index_.compare(i,r)}(e,t,n)),a.forEach(n=>{const i=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);r.forEach(r=>{r.respondsTo(n.type)&&t.push(r.createEvent(i,e.query_))})})}function xr(e,t){return{eventCache:e,serverCache:t}}function _r(e,t,n,i){return xr(new yr(t,n,i),e.serverCache)}function wr(e,t,n,i){return xr(e.eventCache,new yr(t,n,i))}function kr(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Sr(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Nr;class Cr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Nr||(Nr=new Pi(kn)),Nr);this.value=e,this.children=t}static fromObject(e){let t=new Cr(null);return Tn(e,(e,n)=>{t=t.set(new ri(e),n)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:si(),value:this.value};if(fi(e))return null;{const n=ai(e),i=this.children.get(n);if(null!==i){const r=i.findRootMostMatchingPathAndValue(li(e),t);if(null!=r){return{path:hi(new ri(n),r.path),value:r.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(fi(e))return this;{const t=ai(e),n=this.children.get(t);return null!==n?n.subtree(li(e)):new Cr(null)}}set(e,t){if(fi(e))return new Cr(t,this.children);{const n=ai(e),i=(this.children.get(n)||new Cr(null)).set(li(e),t),r=this.children.insert(n,i);return new Cr(this.value,r)}}remove(e){if(fi(e))return this.children.isEmpty()?new Cr(null):new Cr(null,this.children);{const t=ai(e),n=this.children.get(t);if(n){const i=n.remove(li(e));let r;return r=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&r.isEmpty()?new Cr(null):new Cr(this.value,r)}return this}}get(e){if(fi(e))return this.value;{const t=ai(e),n=this.children.get(t);return n?n.get(li(e)):null}}setTree(e,t){if(fi(e))return t;{const n=ai(e),i=(this.children.get(n)||new Cr(null)).setTree(li(e),t);let r;return r=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),new Cr(this.value,r)}}fold(e){return this.fold_(si(),e)}fold_(e,t){const n={};return this.children.inorderTraversal((i,r)=>{n[i]=r.fold_(hi(e,i),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,si(),t)}findOnPath_(e,t,n){const i=!!this.value&&n(t,this.value);if(i)return i;if(fi(e))return null;{const i=ai(e),r=this.children.get(i);return r?r.findOnPath_(li(e),hi(t,i),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,si(),t)}foreachOnPath_(e,t,n){if(fi(e))return this;{this.value&&n(t,this.value);const i=ai(e),r=this.children.get(i);return r?r.foreachOnPath_(li(e),hi(t,i),n):new Cr(null)}}foreach(e){this.foreach_(si(),e)}foreach_(e,t){this.children.inorderTraversal((n,i)=>{i.foreach_(hi(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}class Tr{constructor(e){this.writeTree_=e}static empty(){return new Tr(new Cr(null))}}function Er(e,t,n){if(fi(t))return new Tr(new Cr(n));{const i=e.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const a=pi(r,t);return s=s.updateChild(a,n),new Tr(e.writeTree_.set(r,s))}{const i=new Cr(n),r=e.writeTree_.setTree(t,i);return new Tr(r)}}}function Ir(e,t,n){let i=e;return Tn(n,(e,n)=>{i=Er(i,hi(t,e),n)}),i}function Pr(e,t){if(fi(t))return Tr.empty();{const n=e.writeTree_.setTree(t,new Cr(null));return new Tr(n)}}function Mr(e,t){return null!=jr(e,t)}function jr(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(pi(n.path,t)):null}function Rr(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ui,(e,n)=>{t.push(new ki(e,n))}):e.writeTree_.children.inorderTraversal((e,n)=>{null!=n.value&&t.push(new ki(e,n.value))}),t}function Or(e,t){if(fi(t))return e;{const n=jr(e,t);return new Tr(null!=n?new Cr(n):e.writeTree_.subtree(t))}}function Dr(e){return e.writeTree_.isEmpty()}function Ar(e,t){return Lr(si(),e.writeTree_,t)}function Lr(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal((t,r)=>{".priority"===t?(R(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):n=Lr(hi(e,t),r,n)}),n.getChild(e).isEmpty()||null===i||(n=n.updateChild(hi(e,".priority"),i)),n}}function Fr(e,t){return Jr(t,e)}function zr(e,t){const n=e.allWrites.findIndex(e=>e.writeId===t);R(n>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[n];e.allWrites.splice(n,1);let r=i.visible,s=!1,a=e.allWrites.length-1;for(;r&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&Ur(t,i.path)?r=!1:gi(i.path,t.path)&&(s=!0)),a--}if(r){if(s)return function(e){e.visibleWrites=Vr(e.allWrites,Wr,si()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(i.snap)e.visibleWrites=Pr(e.visibleWrites,i.path);else{Tn(i.children,t=>{e.visibleWrites=Pr(e.visibleWrites,hi(i.path,t))})}return!0}return!1}function Ur(e,t){if(e.snap)return gi(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&gi(hi(e.path,n),t))return!0;return!1}function Wr(e){return e.visible}function Vr(e,t,n){let i=Tr.empty();for(let r=0;r<e.length;++r){const s=e[r];if(t(s)){const e=s.path;let t;if(s.snap)gi(n,e)?(t=pi(n,e),i=Er(i,t,s.snap)):gi(e,n)&&(t=pi(e,n),i=Er(i,si(),s.snap.getChild(t)));else{if(!s.children)throw O("WriteRecord should have .snap or .children");if(gi(n,e))t=pi(n,e),i=Ir(i,t,s.children);else if(gi(e,n))if(t=pi(e,n),fi(t))i=Ir(i,si(),s.children);else{const e=ce(s.children,ai(t));if(e){const n=e.getChild(li(t));i=Er(i,si(),n)}}}}}return i}function Br(e,t,n,i,r){if(i||r){const s=Or(e.visibleWrites,t);if(!r&&Dr(s))return n;if(r||null!=n||Mr(s,si())){const s=function(e){return(e.visible||r)&&(!i||!~i.indexOf(e.writeId))&&(gi(e.path,t)||gi(t,e.path))};return Ar(Vr(e.allWrites,s,t),n||Ki.EMPTY_NODE)}return null}{const i=jr(e.visibleWrites,t);if(null!=i)return i;{const i=Or(e.visibleWrites,t);if(Dr(i))return n;if(null!=n||Mr(i,si())){return Ar(i,n||Ki.EMPTY_NODE)}return null}}}function Hr(e,t,n,i){return Br(e.writeTree,e.treePath,t,n,i)}function qr(e,t){return function(e,t,n){let i=Ki.EMPTY_NODE;const r=jr(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Ui,(e,t)=>{i=i.updateImmediateChild(e,t)}),i;if(n){const r=Or(e.visibleWrites,t);return n.forEachChild(Ui,(e,t)=>{const n=Ar(Or(r,new ri(e)),t);i=i.updateImmediateChild(e,n)}),Rr(r).forEach(e=>{i=i.updateImmediateChild(e.name,e.node)}),i}return Rr(Or(e.visibleWrites,t)).forEach(e=>{i=i.updateImmediateChild(e.name,e.node)}),i}(e.writeTree,e.treePath,t)}function Yr(e,t,n,i){return function(e,t,n,i,r){R(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=hi(t,n);if(Mr(e.visibleWrites,s))return null;{const t=Or(e.visibleWrites,s);return Dr(t)?r.getChild(n):Ar(t,r.getChild(n))}}(e.writeTree,e.treePath,t,n,i)}function Gr(e,t){return function(e,t){return jr(e.visibleWrites,t)}(e.writeTree,hi(e.treePath,t))}function Kr(e,t,n,i,r,s){return function(e,t,n,i,r,s,a){let o;const l=Or(e.visibleWrites,t),c=jr(l,si());if(null!=c)o=c;else{if(null==n)return[];o=Ar(l,n)}if(o=o.withIndex(a),o.isEmpty()||o.isLeafNode())return[];{const e=[],t=a.getCompare(),n=s?o.getReverseIteratorFrom(i,a):o.getIteratorFrom(i,a);let l=n.getNext();for(;l&&e.length<r;)0!==t(l,i)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,i,r,s)}function $r(e,t,n){return function(e,t,n,i){const r=hi(t,n),s=jr(e.visibleWrites,r);if(null!=s)return s;if(i.isCompleteForChild(n))return Ar(Or(e.visibleWrites,r),i.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function Qr(e,t){return Jr(hi(e.treePath,t),e.writeTree)}function Jr(e,t){return{treePath:e,writeTree:t}}class Xr{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;R("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),R(".priority"!==n,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const r=i.type;if("child_added"===t&&"child_removed"===r)this.changeMap.set(n,nr(n,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===r)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===r)this.changeMap.set(n,tr(n,i.oldSnap));else if("child_changed"===t&&"child_added"===r)this.changeMap.set(n,er(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==r)throw O("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(n,nr(n,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const Zr=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class es{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new yr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return $r(this.writes_,e,t)}}getChildAfterChild(e,t,n){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Sr(this.viewCache_),r=Kr(this.writes_,i,t,1,n,e);return 0===r.length?null:r[0]}}function ts(e,t,n,i,r){const s=new Xr;let a,o;if(n.type===fr.OVERWRITE){const l=n;l.source.fromUser?a=rs(e,t,l.path,l.snap,i,r,s):(R(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered()&&!fi(l.path),a=is(e,t,l.path,l.snap,i,r,o,s))}else if(n.type===fr.MERGE){const l=n;l.source.fromUser?a=function(e,t,n,i,r,s,a){let o=t;return i.foreach((i,l)=>{const c=hi(n,i);ss(t,ai(c))&&(o=rs(e,o,c,l,r,s,a))}),i.foreach((i,l)=>{const c=hi(n,i);ss(t,ai(c))||(o=rs(e,o,c,l,r,s,a))}),o}(e,t,l.path,l.children,i,r,s):(R(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),a=os(e,t,l.path,l.children,i,r,o,s))}else if(n.type===fr.ACK_USER_WRITE){const o=n;a=o.revert?function(e,t,n,i,r,s){let a;if(null!=Gr(i,n))return t;{const o=new es(i,t,r),l=t.eventCache.getNode();let c;if(fi(n)||".priority"===ai(n)){let n;if(t.serverCache.isFullyInitialized())n=Hr(i,Sr(t));else{const e=t.serverCache.getNode();R(e instanceof Ki,"serverChildren would be complete if leaf node"),n=qr(i,e)}c=e.filter.updateFullNode(l,n,s)}else{const r=ai(n);let u=$r(i,r,t.serverCache);null==u&&t.serverCache.isCompleteForChild(r)&&(u=l.getImmediateChild(r)),c=null!=u?e.filter.updateChild(l,r,u,li(n),o,s):t.eventCache.getNode().hasChild(r)?e.filter.updateChild(l,r,Ki.EMPTY_NODE,li(n),o,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=Hr(i,Sr(t)),a.isLeafNode()&&(c=e.filter.updateFullNode(c,a,s)))}return a=t.serverCache.isFullyInitialized()||null!=Gr(i,si()),_r(t,c,a,e.filter.filtersNodes())}}(e,t,o.path,i,r,s):function(e,t,n,i,r,s,a){if(null!=Gr(r,n))return t;const o=t.serverCache.isFiltered(),l=t.serverCache;if(null!=i.value){if(fi(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return is(e,t,n,l.getNode().getChild(n),r,s,o,a);if(fi(n)){let i=new Cr(null);return l.getNode().forEachChild(Ti,(e,t)=>{i=i.set(new ri(e),t)}),os(e,t,n,i,r,s,o,a)}return t}{let c=new Cr(null);return i.foreach((e,t)=>{const i=hi(n,e);l.isCompleteForPath(i)&&(c=c.set(e,l.getNode().getChild(i)))}),os(e,t,n,c,r,s,o,a)}}(e,t,o.path,o.affectedTree,i,r,s)}else{if(n.type!==fr.LISTEN_COMPLETE)throw O("Unknown operation type: "+n.type);a=function(e,t,n,i,r){const s=t.serverCache,a=wr(t,s.getNode(),s.isFullyInitialized()||fi(n),s.isFiltered());return ns(e,a,n,i,Zr,r)}(e,t,n.path,i,s)}const l=s.getChanges();return function(e,t,n){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=kr(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(Zi(kr(t)))}}(t,a,l),{viewCache:a,changes:l}}function ns(e,t,n,i,r,s){const a=t.eventCache;if(null!=Gr(i,n))return t;{let o,l;if(fi(n))if(R(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Sr(t),r=qr(i,n instanceof Ki?n:Ki.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),r,s)}else{const n=Hr(i,Sr(t));o=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=ai(n);if(".priority"===c){R(1===oi(n),"Can't have a priority with additional path components");const r=a.getNode();l=t.serverCache.getNode();const s=Yr(i,n,r,l);o=null!=s?e.filter.updatePriority(r,s):a.getNode()}else{const u=li(n);let d;if(a.isCompleteForChild(c)){l=t.serverCache.getNode();const e=Yr(i,n,a.getNode(),l);d=null!=e?a.getNode().getImmediateChild(c).updateChild(u,e):a.getNode().getImmediateChild(c)}else d=$r(i,c,t.serverCache);o=null!=d?e.filter.updateChild(a.getNode(),c,d,u,r,s):a.getNode()}}return _r(t,o,a.isFullyInitialized()||fi(n),e.filter.filtersNodes())}}function is(e,t,n,i,r,s,a,o){const l=t.serverCache;let c;const u=a?e.filter:e.filter.getIndexedFilter();if(fi(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),e,null)}else{const e=ai(n);if(!l.isCompleteForPath(n)&&oi(n)>1)return t;const r=li(n),s=l.getNode().getImmediateChild(e).updateChild(r,i);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,r,Zr,null)}const d=wr(t,c,l.isFullyInitialized()||fi(n),u.filtersNodes());return ns(e,d,n,r,new es(r,d,s),o)}function rs(e,t,n,i,r,s,a){const o=t.eventCache;let l,c;const u=new es(r,t,s);if(fi(n))c=e.filter.updateFullNode(t.eventCache.getNode(),i,a),l=_r(t,c,!0,e.filter.filtersNodes());else{const r=ai(n);if(".priority"===r)c=e.filter.updatePriority(t.eventCache.getNode(),i),l=_r(t,c,o.isFullyInitialized(),o.isFiltered());else{const s=li(n),c=o.getNode().getImmediateChild(r);let d;if(fi(s))d=i;else{const e=u.getCompleteChild(r);d=null!=e?".priority"===ci(s)&&e.getChild(di(s)).isEmpty()?e:e.updateChild(s,i):Ki.EMPTY_NODE}if(c.equals(d))l=t;else{l=_r(t,e.filter.updateChild(o.getNode(),r,d,s,u,a),o.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function ss(e,t){return e.eventCache.isCompleteForChild(t)}function as(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function os(e,t,n,i,r,s,a,o){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=fi(n)?i:new Cr(null).setTree(n,i);const u=t.serverCache.getNode();return l.children.inorderTraversal((n,i)=>{if(u.hasChild(n)){const l=as(0,t.serverCache.getNode().getImmediateChild(n),i);c=is(e,c,new ri(n),l,r,s,a,o)}}),l.children.inorderTraversal((n,i)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===i.value;if(!u.hasChild(n)&&!l){const l=as(0,t.serverCache.getNode().getImmediateChild(n),i);c=is(e,c,new ri(n),l,r,s,a,o)}}),c}function ls(e,t){const n=Sr(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!fi(t)&&!n.getImmediateChild(ai(t)).isEmpty())?n.getChild(t):null}function cs(e,t,n,i){t.type===fr.MERGE&&null!==t.source.queryId&&(R(Sr(e.viewCache_),"We should always have a full cache before handling merges"),R(kr(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,s=ts(e.processor_,r,t,n,i);var a,o;return a=e.processor_,o=s.viewCache,R(o.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),R(o.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),R(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,us(e,s.changes,s.viewCache.eventCache.getNode(),null)}function us(e,t,n,i){const r=i?[i]:e.eventRegistrations_;return function(e,t,n,i){const r=[],s=[];return t.forEach(t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))}),br(e,r,"child_removed",t,i,n),br(e,r,"child_added",t,i,n),br(e,r,"child_moved",s,i,n),br(e,r,"child_changed",t,i,n),br(e,r,"value",t,i,n),r}(e.eventGenerator_,t,n,r)}let ds,hs;function fs(e,t,n,i){const r=t.source.queryId;if(null!==r){const s=e.views.get(r);return R(null!=s,"SyncTree gave us an op for an invalid query."),cs(s,t,n,i)}{let r=[];for(const s of e.views.values())r=r.concat(cs(s,t,n,i));return r}}function ps(e,t){let n=null;for(const i of e.views.values())n=n||ls(i,t);return n}class ms{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Cr(null),this.pendingWriteTree_={visibleWrites:Tr.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function gs(e,t,n,i,r){return function(e,t,n,i,r){R(i>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:r}),r&&(e.visibleWrites=Er(e.visibleWrites,t,n)),e.lastWriteId=i}(e.pendingWriteTree_,t,n,i,r),r?_s(e,new gr({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function vs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=function(e,t){for(let n=0;n<e.allWrites.length;n++){const i=e.allWrites[n];if(i.writeId===t)return i}return null}(e.pendingWriteTree_,t);if(zr(e.pendingWriteTree_,t)){let t=new Cr(null);return null!=i.snap?t=t.set(si(),!0):Tn(i.children,e=>{t=t.set(new ri(e),!0)}),_s(e,new mr(i.path,t,n))}return[]}function ys(e,t,n){return _s(e,new gr({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function bs(e,t,n,i){const r=Ss(e,i);if(null!=r){const i=Ns(r),s=i.path,a=i.queryId,o=pi(s,t);return Cs(e,s,new gr(pr(a),o,n))}return[]}function xs(e,t,n){const i=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,(e,n)=>{const i=ps(n,pi(e,t));if(i)return i});return Br(i,t,r,n,!0)}function _s(e,t){return ws(t,e.syncPointTree_,null,Fr(e.pendingWriteTree_,si()))}function ws(e,t,n,i){if(fi(e.path))return ks(e,t,n,i);{const r=t.get(si());null==n&&null!=r&&(n=ps(r,si()));let s=[];const a=ai(e.path),o=e.operationForChild(a),l=t.children.get(a);if(l&&o){const e=n?n.getImmediateChild(a):null,t=Qr(i,a);s=s.concat(ws(o,l,e,t))}return r&&(s=s.concat(fs(r,e,i,n))),s}}function ks(e,t,n,i){const r=t.get(si());null==n&&null!=r&&(n=ps(r,si()));let s=[];return t.children.inorderTraversal((t,r)=>{const a=n?n.getImmediateChild(t):null,o=Qr(i,t),l=e.operationForChild(t);l&&(s=s.concat(ks(l,r,a,o)))}),r&&(s=s.concat(fs(r,e,i,n))),s}function Ss(e,t){return e.tagToQueryMap.get(t)}function Ns(e){const t=e.indexOf("$");return R(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ri(e.substr(0,t))}}function Cs(e,t,n){const i=e.syncPointTree_.get(t);R(i,"Missing sync point for query tag that we're tracking");return fs(i,n,Fr(e.pendingWriteTree_,t),null)}class Ts{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Ts(t)}node(){return this.node_}}class Es{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=hi(this.path_,e);return new Es(this.syncTree_,t)}node(){return xs(this.syncTree_,this.path_)}}const Is=function(e,t,n){return e&&"object"===typeof e?(R(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Ps(e[".sv"],t,n):"object"===typeof e[".sv"]?Ms(e[".sv"],t):void R(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Ps=function(e,t,n){if("timestamp"===e)return n.timestamp;R(!1,"Unexpected server value: "+e)},Ms=function(e,t,n){e.hasOwnProperty("increment")||R(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;"number"!==typeof i&&R(!1,"Unexpected increment value: "+i);const r=t.node();if(R(null!==r&&"undefined"!==typeof r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const s=r.getValue();return"number"!==typeof s?i:s+i},js=function(e,t,n,i){return Os(t,new Es(n,e),i)},Rs=function(e,t,n){return Os(e,new Ts(t),n)};function Os(e,t,n){const i=e.getPriority().val(),r=Is(i,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const i=e,s=Is(i.getValue(),t,n);return s!==i.getValue()||r!==i.getPriority().val()?new zi(s,Qi(r)):e}{const i=e;return s=i,r!==i.getPriority().val()&&(s=s.updatePriority(new zi(r))),i.forEachChild(Ui,(e,i)=>{const r=Os(i,t.getImmediateChild(e),n);r!==i&&(s=s.updateImmediateChild(e,r))}),s}}class Ds{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function As(e,t){let n=t instanceof ri?t:new ri(t),i=e,r=ai(n);for(;null!==r;){const e=ce(i.node.children,r)||{children:{},childCount:0};i=new Ds(r,i,e),n=li(n),r=ai(n)}return i}function Ls(e){return e.node.value}function Fs(e,t){e.node.value=t,Bs(e)}function zs(e){return e.node.childCount>0}function Us(e,t){Tn(e.node.children,(n,i)=>{t(new Ds(n,e,i))})}function Ws(e,t,n,i){n&&!i&&t(e),Us(e,e=>{Ws(e,t,!0,i)}),n&&i&&t(e)}function Vs(e){return new ri(null===e.parent?e.name:Vs(e.parent)+"/"+e.name)}function Bs(e){null!==e.parent&&function(e,t,n){const i=function(e){return void 0===Ls(e)&&!zs(e)}(n),r=le(e.node.children,t);i&&r?(delete e.node.children[t],e.node.childCount--,Bs(e)):i||r||(e.node.children[t]=n.node,e.node.childCount++,Bs(e))}(e.parent,e.name,e)}const Hs=/[\[\].#$\/\u0000-\u001F\u007F]/,qs=/[\[\].#$\u0000-\u001F\u007F]/,Ys=10485760,Gs=function(e){return"string"===typeof e&&0!==e.length&&!Hs.test(e)},Ks=function(e){return"string"===typeof e&&0!==e.length&&!qs.test(e)},$s=function(e,t,n,i){i&&void 0===t||Qs(xe(e,"value"),t,n)},Qs=function(e,t,n){const i=n instanceof ri?new vi(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+bi(i));if("function"===typeof t)throw new Error(e+"contains a function "+bi(i)+" with contents = "+t.toString());if(bn(t))throw new Error(e+"contains "+t.toString()+" "+bi(i));if("string"===typeof t&&t.length>Ys/3&&_e(t)>Ys)throw new Error(e+"contains a string greater than "+Ys+" utf8 bytes "+bi(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,r=!1;if(Tn(t,(t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(r=!0,!Gs(t)))throw new Error(e+" contains an invalid key ("+t+") "+bi(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=_e(t),yi(e)}(i,t),Qs(e,s,i),function(e){const t=e.parts_.pop();e.byteLength_-=_e(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)}),n&&r)throw new Error(e+' contains ".value" child '+bi(i)+" in addition to actual children.")}},Js=function(e,t,n,i){if((!i||void 0!==n)&&!Ks(n))throw new Error(xe(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Xs=function(e,t){if(".info"===ai(t))throw new Error(e+" failed = Can't modify data under /.info/")},Zs=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Gs(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Ks(e)}(n))throw new Error(xe(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ea{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ta(e,t){let n=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null===n||mi(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(r)}n&&e.eventLists_.push(n)}function na(e,t,n){ta(e,n),ia(e,e=>gi(e,t)||gi(t,e))}function ia(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){const r=e.eventLists_[i];if(r){t(r.path)?(ra(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function ra(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const i=n.getEventRunner();dn&&pn("event: "+n.toString()),Mn(i)}}}const sa="repo_interrupt";class aa{constructor(e,t,n,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ea,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=lr(),this.transactionQueueTree_=new Ds,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function oa(e,t,n){if(e.stats_=Yn(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new ar(e.repoInfo_,(t,n,i,r)=>{ua(e,t,n,i,r)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>da(e,!0),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ae(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new wi(e.repoInfo_,t,(t,n,i,r)=>{ua(e,t,n,i,r)},t=>{da(e,t)},t=>{!function(e,t){Tn(t,(t,n)=>{ha(e,t,n)})}(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(e,t){const n=e.toString();return qn[n]||(qn[n]=t()),qn[n]}(e.repoInfo_,()=>new hr(e.stats_,e.server_)),e.infoData_=new or,e.infoSyncTree_=new ms({startListening:(t,n,i,r)=>{let s=[];const a=e.infoData_.getNode(t._path);return a.isEmpty()||(s=ys(e.infoSyncTree_,t._path,a),setTimeout(()=>{r("ok")},0)),s},stopListening:()=>{}}),ha(e,"connected",!1),e.serverSyncTree_=new ms({startListening:(t,n,i,r)=>(e.server_.listen(t,i,n,(n,i)=>{const s=r(n,i);na(e.eventQueue_,t._path,s)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function la(e){const t=e.infoData_.getNode(new ri(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function ca(e){return(t=(t={timestamp:la(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function ua(e,t,n,i,r){e.dataUpdateCount++;const s=new ri(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(r)if(i){const t=de(n,e=>Qi(e));a=function(e,t,n,i){const r=Ss(e,i);if(r){const i=Ns(r),s=i.path,a=i.queryId,o=pi(s,t),l=Cr.fromObject(n);return Cs(e,s,new vr(pr(a),o,l))}return[]}(e.serverSyncTree_,s,t,r)}else{const t=Qi(n);a=bs(e.serverSyncTree_,s,t,r)}else if(i){const t=de(n,e=>Qi(e));a=function(e,t,n){const i=Cr.fromObject(n);return _s(e,new vr({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(e.serverSyncTree_,s,t)}else{const t=Qi(n);a=ys(e.serverSyncTree_,s,t)}let o=s;a.length>0&&(o=xa(e,s)),na(e.eventQueue_,o,a)}function da(e,t){ha(e,"connected",t),!1===t&&function(e){ga(e,"onDisconnectEvents");const t=ca(e),n=lr();ur(e.onDisconnect_,si(),(i,r)=>{const s=js(i,r,e.serverSyncTree_,t);cr(n,i,s)});let i=[];ur(n,si(),(t,n)=>{i=i.concat(ys(e.serverSyncTree_,t,n));const r=Na(e,t);xa(e,r)}),e.onDisconnect_=lr(),na(e.eventQueue_,si(),i)}(e)}function ha(e,t,n){const i=new ri("/.info/"+t),r=Qi(n);e.infoData_.updateSnapshot(i,r);const s=ys(e.infoSyncTree_,i,r);na(e.eventQueue_,i,s)}function fa(e){return e.nextWriteId_++}function pa(e,t,n,i,r){ga(e,"set",{path:t.toString(),value:n,priority:i});const s=ca(e),a=Qi(n,i),o=xs(e.serverSyncTree_,t),l=Rs(a,o,s),c=fa(e),u=gs(e.serverSyncTree_,t,l,c,!0);ta(e.eventQueue_,u),e.server_.put(t.toString(),a.val(!0),(n,i)=>{const s="ok"===n;s||yn("set at "+t+" failed: "+n);const a=vs(e.serverSyncTree_,c,!s);na(e.eventQueue_,t,a),va(e,r,n,i)});const d=Na(e,t);xa(e,d),na(e.eventQueue_,d,[])}function ma(e){e.persistentConnection_&&e.persistentConnection_.interrupt(sa)}function ga(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];pn(t,...i)}function va(e,t,n,i){t&&Mn(()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let r=e;i&&(r+=": "+i);const s=new Error(r);s.code=e,t(s)}})}function ya(e,t,n){return xs(e.serverSyncTree_,t,n)||Ki.EMPTY_NODE}function ba(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Sa(e,t),Ls(t)){const n=wa(e,t);R(n.length>0,"Sending zero length transaction queue");n.every(e=>0===e.status)&&function(e,t,n){const i=n.map(e=>e.currentWriteId),r=ya(e,t,i);let s=r;const a=r.hash();for(let c=0;c<n.length;c++){const e=n[c];R(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const i=pi(t,e.path);s=s.updateChild(i,e.currentOutputSnapshotRaw)}const o=s.val(!0),l=t;e.server_.put(l.toString(),o,i=>{ga(e,"transaction put response",{path:l.toString(),status:i});let r=[];if("ok"===i){const i=[];for(let t=0;t<n.length;t++)n[t].status=2,r=r.concat(vs(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&i.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();Sa(e,As(e.transactionQueueTree_,t)),ba(e,e.transactionQueueTree_),na(e.eventQueue_,t,r);for(let e=0;e<i.length;e++)Mn(i[e])}else{if("datastale"===i)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{yn("transaction at "+l.toString()+" failed: "+i);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=i}xa(e,t)}},a)}(e,Vs(t),n)}else zs(t)&&Us(t,t=>{ba(e,t)})}function xa(e,t){const n=_a(e,t),i=Vs(n);return function(e,t,n){if(0===t.length)return;const i=[];let r=[];const s=t.filter(e=>0===e.status),a=s.map(e=>e.currentWriteId);for(let o=0;o<t.length;o++){const s=t[o],l=pi(n,s.path);let c,u=!1;if(R(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)u=!0,c=s.abortReason,r=r.concat(vs(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)u=!0,c="maxretry",r=r.concat(vs(e.serverSyncTree_,s.currentWriteId,!0));else{const n=ya(e,s.path,a);s.currentInputSnapshot=n;const i=t[o].update(n.val());if(void 0!==i){Qs("transaction failed: Data returned ",i,s.path);let t=Qi(i);"object"===typeof i&&null!=i&&le(i,".priority")||(t=t.updatePriority(n.getPriority()));const o=s.currentWriteId,l=ca(e),c=Rs(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=fa(e),a.splice(a.indexOf(o),1),r=r.concat(gs(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),r=r.concat(vs(e.serverSyncTree_,o,!0))}else u=!0,c="nodata",r=r.concat(vs(e.serverSyncTree_,s.currentWriteId,!0))}na(e.eventQueue_,n,r),r=[],u&&(t[o].status=2,function(e){setTimeout(e,Math.floor(0))}(t[o].unwatcher),t[o].onComplete&&("nodata"===c?i.push(()=>t[o].onComplete(null,!1,t[o].currentInputSnapshot)):i.push(()=>t[o].onComplete(new Error(c),!1,null))))}Sa(e,e.transactionQueueTree_);for(let o=0;o<i.length;o++)Mn(i[o]);ba(e,e.transactionQueueTree_)}(e,wa(e,n),i),i}function _a(e,t){let n,i=e.transactionQueueTree_;for(n=ai(t);null!==n&&void 0===Ls(i);)i=As(i,n),n=ai(t=li(t));return i}function wa(e,t){const n=[];return ka(e,t,n),n.sort((e,t)=>e.order-t.order),n}function ka(e,t,n){const i=Ls(t);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);Us(t,t=>{ka(e,t,n)})}function Sa(e,t){const n=Ls(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Fs(t,n.length>0?n:void 0)}Us(t,t=>{Sa(e,t)})}function Na(e,t){const n=Vs(_a(e,t)),i=As(e.transactionQueueTree_,t);return function(e,t,n){let i=n?e:e.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,t=>{Ca(e,t)}),Ca(e,i),Ws(i,t=>{Ca(e,t)}),n}function Ca(e,t){const n=Ls(t);if(n){const i=[];let r=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(R(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(R(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),r=r.concat(vs(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&i.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Fs(t,void 0):n.length=s+1,na(e.eventQueue_,Vs(t),r);for(let e=0;e<i.length;e++)Mn(i[e])}}const Ta=function(e,t){const n=Ea(e),i=n.namespace;"firebase.com"===n.domain&&vn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||vn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&yn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const r="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Wn(n.host,n.secure,i,r,t,"",i!==n.subdomain),path:new ri(n.pathString)}},Ea=function(e){let t="",n="",i="",r="",s="",a=!0,o="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(o=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(r=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(i){}t+="/"+e}return t}(e.substring(u,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const i=n.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):yn("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(a="https"===o||"wss"===o,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");i=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=i}"ns"in h&&(s=h.ns)}return{host:t,port:l,domain:n,subdomain:i,secure:a,scheme:o,pathString:r,namespace:s}},Ia="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Pa=function(){let e=0;const t=[];return function(n){const i=n===e;let r;e=n;const s=new Array(8);for(r=7;r>=0;r--)s[r]=Ia.charAt(n%64),n=Math.floor(n/64);R(0===n,"Cannot push at time == 0");let a=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)a+=Ia.charAt(t[r]);return R(20===a.length,"nextPushId: Length should be 20."),a}}();class Ma{constructor(e,t,n,i){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=i}get key(){return fi(this._path)?null:ci(this._path)}get ref(){return new ja(this._repo,this._path)}get _queryIdentifier(){const e=sr(this._queryParams),t=Nn(e);return"{}"===t?"default":t}get _queryObject(){return sr(this._queryParams)}isEqual(e){if(!((e=we(e))instanceof Ma))return!1;const t=this._repo===e._repo,n=mi(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class ja extends Ma{constructor(e,t){super(e,t,new ir,!1)}get parent(){const e=di(this._path);return null===e?null:new ja(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}function Ra(e,t){return(e=we(e))._checkNotDeleted("ref"),void 0!==t?Oa(e._root,t):e._root}function Oa(e,t){var n,i,r,s;return null===ai((e=we(e))._path)?(n="child",i="path",s=!1,(r=t)&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Js(n,i,r,s)):Js("child","path",t,!1),new ja(e._repo,hi(e._path,t))}function Da(e,t){e=we(e),Xs("push",e._path),$s("push",t,e._path,!0);const n=la(e._repo),i=Pa(n),r=Oa(e,i),s=Oa(e,i);let a;return a=null!=t?Aa(s,t).then(()=>s):Promise.resolve(s),r.then=a.then.bind(a),r.catch=a.then.bind(a,void 0),r}function Aa(e,t){e=we(e),Xs("set",e._path),$s("set",t,e._path,!1);const n=new Q;return pa(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}!function(e){R(!ds,"__referenceConstructor has already been defined"),ds=e}(ja),function(e){R(!hs,"__referenceConstructor has already been defined"),hs=e}(ja);const La={};let Fa=!1;function za(e,t,n,i,r){let s=i||e.options.databaseURL;void 0===s&&(e.options.projectId||vn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),pn("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let a,o,l=Ta(s,r),c=l.repoInfo;"undefined"!==typeof process&&(o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),o?(a=!0,s="http://".concat(o,"?ns=").concat(c.namespace),l=Ta(s,r),c=l.repoInfo):a=!l.repoInfo.secure;const u=r&&a?new Dn(Dn.OWNER):new On(e.name,e.options,t);Zs("Invalid Firebase Database URL",l),fi(l.path)||vn("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,i){let r=La[t.name];r||(r={},La[t.name]=r);let s=r[e.toURLString()];s&&vn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new aa(e,Fa,n,i),r[e.toURLString()]=s,s}(c,e,u,new Rn(e.name,n));return new Ua(d,e)}class Ua{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(oa(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ja(this._repo,si())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=La[t];n&&n[e.key]===e||vn("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),ma(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&vn("Cannot call "+e+" on a deleted database.")}}wi.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},wi.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){en(Lt),jt(new ke("database",(e,t)=>{let{instanceIdentifier:n}=t;return za(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)},"PUBLIC").setMultipleInstances(!0)),Ut(Jt,Xt,e),Ut(Jt,Xt,"esm2017")}();Ut("firebase","10.14.1","app");const Wa="firebasestorage.googleapis.com",Va="storageBucket";class Ba extends ne{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Ya(e),"Firebase Storage: ".concat(t," (").concat(Ya(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ba.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ya(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Ha,qa;function Ya(e){return"storage/"+e}function Ga(){return new Ba(Ha.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Ka(){return new Ba(Ha.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function $a(){return new Ba(Ha.CANCELED,"User canceled the upload/download.")}function Qa(){return new Ba(Ha.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ja(e){return new Ba(Ha.INVALID_ARGUMENT,e)}function Xa(){return new Ba(Ha.APP_DELETED,"The Firebase app was deleted.")}function Za(e,t){return new Ba(Ha.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function eo(e){throw new Ba(Ha.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Ha||(Ha={}));class to{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=to.makeFromUrl(e,t)}catch(r){return new to(e,"")}if(""===n.path)return n;throw i=e,new Ba(Ha.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.");var i}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";const r=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===Wa?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<o.length;l++){const t=o[l],i=t.regex.exec(e);if(i){const e=i[t.indices.bucket];let r=i[t.indices.path];r||(r=""),n=new to(e,r),t.postModify(n);break}}if(null==n)throw function(e){return new Ba(Ha.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class no{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function io(e){return"string"===typeof e||e instanceof String}function ro(e){return so()&&e instanceof Blob}function so(){return"undefined"!==typeof Blob}function ao(e,t,n,i){if(i<t)throw Ja("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(i>n)throw Ja("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function oo(e,t,n){let i=t;return null==n&&(i="https://".concat(t)),"".concat(n,"://").concat(i,"/v0").concat(e)}function lo(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){n=n+(t(i)+"="+t(e[i]))+"&"}return n=n.slice(0,-1),n}function co(e,t){const n=e>=500&&e<600,i=-1!==[408,429].indexOf(e),r=-1!==t.indexOf(e);return n||i||r}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(qa||(qa={}));class uo{constructor(e,t,n,i,r,s,a,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new ho(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const i=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(i),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(i),this.pendingConnection_=null;const t=n.getErrorCode()===qa.NO_ERROR,r=n.getStatus();if(!t||co(r,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===qa.ABORT;return void e(!1,new ho(!1,null,t))}const s=-1!==this.successCodes_.indexOf(r);e(!0,new ho(s,n))})},t=(e,t)=>{const n=this.resolve_,i=this.reject_,r=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(r,r.getResponse());void 0!==e?n(e):n()}catch(s){i(s)}else if(null!==r){const e=Ga();e.serverResponse=r.getErrorText(),this.errorCallback_?i(this.errorCallback_(r,e)):i(e)}else if(t.canceled){i(this.appDelete_?Xa():$a())}else{i(Ka())}};this.canceled_?t(0,new ho(!1,null,!0)):this.backoffId_=function(e,t,n){let i=1,r=null,s=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(null,n)}}function d(t){r=setTimeout(()=>{r=null,e(f,l())},t)}function h(){s&&clearTimeout(s)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let s;i<64&&(i*=2),1===o?(o=2,s=0):s=1e3*(i+Math.random()),d(s)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==r?(e||(o=2),clearTimeout(r),d(0)):e||(o=1)))}return d(0),s=setTimeout(()=>{a=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ho{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function fo(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function po(){const e=fo();for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(so())return new Blob(n);throw new Ba(Ha.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function mo(e){if("undefined"===typeof atob)throw t="base-64",new Ba(Ha.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const go="raw",vo="base64",yo="base64url",bo="data_url";class xo{constructor(e,t){this.data=e,this.contentType=t||null}}function _o(e,t){switch(e){case go:return new xo(wo(t));case vo:case yo:return new xo(ko(e,t));case bo:return new xo(function(e){const t=new So(e);return t.base64?ko(vo,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw Za(bo,"Malformed data URL.")}return wo(t)}(t.rest)}(t),new So(t).contentType)}throw Ga()}function wo(e){const t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|63&i);else if(55296===(64512&i)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){i=65536|(1023&i)<<10|1023&e.charCodeAt(++n),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)}else t.push(239,191,189)}else 56320===(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function ko(e,t){switch(e){case vo:{const n=-1!==t.indexOf("-"),i=-1!==t.indexOf("_");if(n||i){throw Za(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case yo:{const n=-1!==t.indexOf("+"),i=-1!==t.indexOf("/");if(n||i){throw Za(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=mo(t)}catch(r){if(r.message.includes("polyfill"))throw r;throw Za(e,"Invalid character found")}const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}class So{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Za(bo,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class No{constructor(e,t){let n=0,i="";ro(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(ro(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new No(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new No(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(so()){const e=t.map(e=>e instanceof No?e.data_:e);return new No(po.apply(null,e))}{const e=t.map(e=>io(e)?_o(go,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const i=new Uint8Array(n);let r=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)i[r++]=e[t]}),new No(i,!0)}}uploadData(){return this.data_}}function Co(e){let t;try{t=JSON.parse(e)}catch(i){return null}return"object"!==typeof(n=t)||Array.isArray(n)?null:t;var n}function To(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Eo(e,t){return t}class Io{constructor(e,t,n,i){this.server=e,this.local=t||e,this.writable=!!n,this.xform=i||Eo}}let Po=null;function Mo(){if(Po)return Po;const e=[];e.push(new Io("bucket")),e.push(new Io("generation")),e.push(new Io("metageneration")),e.push(new Io("name","fullPath",!0));const t=new Io("name");t.xform=function(e,t){return function(e){return!io(e)||e.length<2?e:To(e)}(t)},e.push(t);const n=new Io("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Io("timeCreated")),e.push(new Io("updated")),e.push(new Io("md5Hash",null,!0)),e.push(new Io("cacheControl",null,!0)),e.push(new Io("contentDisposition",null,!0)),e.push(new Io("contentEncoding",null,!0)),e.push(new Io("contentLanguage",null,!0)),e.push(new Io("contentType",null,!0)),e.push(new Io("metadata","customMetadata",!0)),Po=e,Po}function jo(e,t,n){const i={type:"file"},r=n.length;for(let s=0;s<r;s++){const e=n[s];i[e.local]=e.xform(i,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,i=e.fullPath,r=new to(n,i);return t._makeStorageReference(r)}})}(i,e),i}function Ro(e,t,n){const i=Co(t);if(null===i)return null;return jo(e,i,n)}function Oo(e,t){const n={},i=t.length;for(let r=0;r<i;r++){const i=t[r];i.writable&&(n[i.server]=e[i.local])}return JSON.stringify(n)}class Do{constructor(e,t,n,i){this.url=e,this.method=t,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ao(e){if(!e)throw Ga()}function Lo(e,t){return function(n,i){const r=Ro(e,i,t);return Ao(null!==r),r}}function Fo(e,t){return function(n,i){const r=Ro(e,i,t);return Ao(null!==r),function(e,t,n,i){const r=Co(t);if(null===r)return null;if(!io(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const a=encodeURIComponent;return s.split(",").map(t=>{const r=e.bucket,s=e.fullPath;return oo("/b/"+a(r)+"/o/"+a(s),n,i)+lo({alt:"media",token:t})})[0]}(r,i,e.host,e._protocol)}}function zo(e){return function(t,n){let i;var r,s;return 401===t.getStatus()?i=t.getErrorText().includes("Firebase App Check token is invalid")?new Ba(Ha.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Ba(Ha.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,i=new Ba(Ha.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=e.path,i=new Ba(Ha.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):i=n,i.status=t.getStatus(),i.serverResponse=n.serverResponse,i}}function Uo(e){const t=zo(e);return function(n,i){let r=t(n,i);var s;return 404===n.getStatus()&&(s=e.path,r=new Ba(Ha.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),r.serverResponse=i.serverResponse,r}}function Wo(e,t,n){const i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}function Vo(e,t,n,i,r){const s=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+o;const l=Wo(t,i,r),c="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Oo(l,n)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+o+"--",d=No.getBlob(c,i,u);if(null===d)throw Qa();const h={name:l.fullPath},f=oo(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new Do(f,"POST",Lo(e,n),p);return m.urlParams=h,m.headers=a,m.body=d.uploadData(),m.errorHandler=zo(t),m}class Bo{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,i){if(this.sent_)throw eo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const r in i)i.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,i[r].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw eo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw eo("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw eo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw eo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Ho extends Bo{initXhr(){this.xhr_.responseType="text"}}function qo(){return new Ho}class Yo{constructor(e,t){this._service=e,this._location=t instanceof to?t:to.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Yo(e,t)}get root(){const e=new to(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return To(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new to(this._location.bucket,e);return new Yo(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Ba(Ha.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Go(e,t,n){e._throwIfRoot("uploadBytes");const i=Vo(e.storage,e._location,Mo(),new No(t,!0),n);return e.storage.makeRequestWithTokens(i,qo).then(t=>({metadata:t,ref:e}))}function Ko(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const i=oo(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,s=new Do(i,"GET",Fo(e,n),r);return s.errorHandler=Uo(t),s}(e.storage,e._location,Mo());return e.storage.makeRequestWithTokens(t,qo).then(e=>{if(null===e)throw new Ba(Ha.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function $o(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),i=new to(e._location.bucket,n);return new Yo(e.storage,i)}function Qo(e,t){if(e instanceof Zo){const n=e;if(null==n._bucket)throw new Ba(Ha.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Va+"' property when initializing the app?");const i=new Yo(n,n._bucket);return null!=t?Qo(i,t):i}return void 0!==t?$o(e,t):e}function Jo(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Zo)return new Yo(e,t);throw Ja("To use ref(service, url), the first argument must be a Storage instance.")}return Qo(e,t)}function Xo(e,t){const n=null===t||void 0===t?void 0:t[Va];return null==n?null:to.makeFromBucketSpec(n,e)}class Zo{constructor(e,t,n,i,r){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=r,this._bucket=null,this._host=Wa,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?to.makeFromBucketSpec(i,this._host):Xo(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=to.makeFromBucketSpec(this._url,e):this._bucket=Xo(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ao("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ao("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yo(this,e)}_makeRequest(e,t,n,i){let r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new no(Xa());{const s=function(e,t,n,i,r,s){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=lo(e.urlParams),l=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,i),new uo(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,a)}(e,this._appId,n,i,t,this._firebaseVersion,r);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const el="@firebase/storage",tl="0.13.2",nl="storage";function il(e,t){let{instanceIdentifier:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new Zo(i,r,s,n,Lt)}jt(new ke(nl,il,"PUBLIC").setMultipleInstances(!0)),Ut(el,tl,""),Ut(el,tl,"esm2017");function rl(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function sl(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const al=sl,ol=new ie("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ll=new Re("@firebase/auth");function cl(e){if(ll.logLevel<=Ee.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];ll.error("Auth (".concat(Lt,"): ").concat(e),...n)}}function ul(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw pl(e,...n)}function dl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return pl(e,...n)}function hl(e,t,n){const i=Object.assign(Object.assign({},al()),{[t]:n});return new ie("auth","Firebase",i).create(t,{appName:e.name})}function fl(e){return hl(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if("string"!==typeof e){const t=n[0],i=[...n.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(t,...i)}return ol.create(e,...n)}function ml(e,t){if(!e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];throw pl(t,...i)}}function gl(e){const t="INTERNAL ASSERTION FAILED: "+e;throw cl(t),new Error(t)}function vl(e,t){e||gl(t)}function yl(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function bl(){return"http:"===xl()||"https:"===xl()}function xl(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function _l(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(bl()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class wl{constructor(e,t){this.shortDelay=e,this.longDelay=t,vl(t>e,"Short delay should be less than long delay!"),this.isMobile=Z()||ee()}get(){return _l()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function kl(e,t){vl(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Sl{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void gl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void gl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void gl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Nl={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Cl=new wl(3e4,6e4);function Tl(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function El(e,t,n,i){return Il(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let r={},s={};i&&("GET"===t?s=i:r={body:JSON.stringify(i)});const a=pe(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},r);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Sl.fetch()(Ml(e,e.config.apiHost,n,a),l)})}async function Il(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},Nl),t);try{const t=new Rl(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw Ol(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ol(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Ol(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Ol(e,"user-disabled",s);const o=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw hl(e,o,a);ul(e,o)}}catch(r){if(r instanceof ne)throw r;ul(e,"network-request-failed",{message:String(r)})}}async function Pl(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await El(e,t,n,i,r);return"mfaPendingCredential"in s&&ul(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Ml(e,t,n,i){const r="".concat(t).concat(n,"?").concat(i);return e.config.emulator?kl(e.config,r):"".concat(e.config.apiScheme,"://").concat(r)}function jl(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Rl{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(dl(this.auth,"network-request-failed")),Cl.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ol(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=dl(e,t,i);return r.customData._tokenResponse=n,r}function Dl(e){return void 0!==e&&void 0!==e.enterprise}class Al{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return jl(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Ll(e,t){return El(e,"GET","/v2/recaptchaConfig",Tl(e,t))}async function Fl(e,t){return El(e,"POST","/v1/accounts:lookup",t)}function zl(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Ul(e){return 1e3*Number(e)}function Wl(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return cl("JWT malformed, contained fewer than 3 sections"),null;try{const e=U(n);return e?JSON.parse(e):(cl("Failed to decode base64 JWT payload"),null)}catch(r){return cl("Caught error parsing JWT payload as JSON",null===r||void 0===r?void 0:r.toString()),null}}function Vl(e){const t=Wl(e);return ml(t,"internal-error"),ml("undefined"!==typeof t.exp,"internal-error"),ml("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Bl(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof ne&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Hl{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class ql{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=zl(this.lastLoginAt),this.creationTime=zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Yl(e){var t;const n=e.auth,i=await e.getIdToken(),r=await Bl(e,Fl(n,{idToken:i}));ml(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Gl(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ql(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Gl(e){return e.map(e=>{var{providerId:t}=e,n=rl(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Kl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ml(e.idToken,"internal-error"),ml("undefined"!==typeof e.idToken,"internal-error"),ml("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Vl(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ml(0!==e.length,"internal-error");const t=Vl(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(ml(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(e,t){const n=await Il(e,{},async()=>{const n=pe({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=Ml(e,i,"/v1/token","key=".concat(r)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Sl.fetch()(s,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new Kl;return n&&(ml("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(ml("string"===typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(ml("number"===typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kl,this.toJSON())}_performRefresh(){return gl("not implemented")}}function $l(e,t){ml("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Ql{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=rl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new ql(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Bl(this,this.stsTokenManager.getToken(this.auth,e));return ml(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=we(e),i=await n.getIdToken(t),r=Wl(i);ml(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"===typeof r.firebase?r.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:zl(Ul(r.auth_time)),issuedAtTime:zl(Ul(r.iat)),expirationTime:zl(Ul(r.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=we(e);await Yl(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ml(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ql(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ml(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Yl(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ot(this.auth.app))return Promise.reject(fl(this.auth));const e=await this.getIdToken();return await Bl(this,async function(e,t){return El(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(i=t.email)&&void 0!==i?i:void 0,h=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:x,providerData:_,stsTokenManager:w}=t;ml(y&&w,e,"internal-error");const k=Kl.fromJSON(this.name,w);ml("string"===typeof y,e,"internal-error"),$l(u,e.name),$l(d,e.name),ml("boolean"===typeof b,e,"internal-error"),ml("boolean"===typeof x,e,"internal-error"),$l(h,e.name),$l(f,e.name),$l(p,e.name),$l(m,e.name),$l(g,e.name),$l(v,e.name);const S=new Ql({uid:y,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(S.providerData=_.map(e=>Object.assign({},e))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=new Kl;i.updateFromServerResponse(t);const r=new Ql({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Yl(r),r}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];ml(void 0!==i.localId,"internal-error");const r=void 0!==i.providerUserInfo?Gl(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length),a=new Kl;a.updateFromIdToken(n);const o=new Ql({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new ql(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length)};return Object.assign(o,l),o}}const Jl=new Map;function Xl(e){vl(e instanceof Function,"Expected a class definition");let t=Jl.get(e);return t?(vl(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Jl.set(e,t),t)}class Zl{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Zl.type="NONE";const ec=Zl;function tc(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class nc{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=tc(this.userKey,i.apiKey,r),this.fullPersistenceKey=tc("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ql._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new nc(Xl(ec),e,n);const i=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let r=i[0]||Xl(ec);const s=tc(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Ql._fromJSON(e,t);c!==r&&(a=n),r=c;break}}catch(l){}const o=i.filter(e=>e._shouldAllowMigration);return r._shouldAllowMigration&&o.length?(r=o[0],a&&await r._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==r)try{await e._remove(s)}catch(l){}})),new nc(r,e,n)):new nc(r,e,n)}}function ic(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(oc(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(rc(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(cc(t))return"Blackberry";if(uc(t))return"Webos";if(sc(t))return"Safari";if((t.includes("chrome/")||ac(t))&&!t.includes("edge/"))return"Chrome";if(lc(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function rc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X();return/firefox\//i.test(e)}function sc(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:X()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ac(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X();return/crios\//i.test(e)}function oc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X();return/iemobile/i.test(e)}function lc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X();return/android/i.test(e)}function cc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X();return/blackberry/i.test(e)}function uc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X();return/webos/i.test(e)}function dc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function hc(){return function(){const e=X();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function fc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X();return dc(e)||lc(e)||uc(e)||cc(e)||/windows phone/i.test(e)||oc(e)}function pc(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ic(X());break;case"Worker":t="".concat(ic(X()),"-").concat(e);break;default:t=e}const i=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Lt,"/").concat(i)}class mc{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,i)=>{try{n(e(t))}catch(r){i(r)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(i){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class gc{constructor(e){var t,n,i,r;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=e.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,r,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(i=o.containsLowercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(r=o.containsUppercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}class vc{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bc(this),this.idTokenSubscription=new bc(this),this.beforeStateQueue=new mc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ol,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xl(t)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await nc.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(r){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Fl(this,{idToken:e}),n=await Ql._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ot(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(i=a.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ml(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Yl(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ot(this.app))return Promise.reject(fl(this));const t=e?we(e):null;return t&&ml(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ml(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ot(this.app)?Promise.reject(fl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ot(this.app)?Promise.reject(fl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xl(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return El(e,"GET","/v2/passwordPolicy",Tl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new gc(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ie("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return El(e,"POST","/v2/accounts:revokeToken",Tl(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xl(e)||this._popupRedirectResolver;ml(t,this,"argument-error"),this.redirectPersistenceManager=await nc.create(this,[Xl(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ml(a,this,"internal-error"),a.then(()=>{s||r(this.currentUser)}),"function"===typeof t){const r=e.addObserver(t,n,i);return()=>{s=!0,r()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ml(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(ll.logLevel<=Ee.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];ll.warn("Auth (".concat(Lt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function yc(e){return we(e)}class bc{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new ye(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return ml(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let xc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _c(e){return xc.loadJS(e)}function wc(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class kc{constructor(e){this.type="recaptcha-enterprise",this.auth=yc(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,i){const r=window.grecaptcha;Dl(r)?r.enterprise.ready(()=>{r.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,i)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Ll(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(i=>{if(void 0!==i.recaptchaKey){const n=new Al(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(r=>{if(!t&&Dl(window.grecaptcha))n(r,e,i);else{if("undefined"===typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let t=xc.recaptchaEnterpriseScript;0!==t.length&&(t+=r),_c(t).then(()=>{n(r,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}}async function Sc(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=new kc(e);let s;try{s=await r.verify(n)}catch(gn){s=await r.verify(n,!0)}const a=Object.assign({},t);return i?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Nc(e,t,n,i){var r;if(null===(r=e._getRecaptchaConfig())||void 0===r?void 0:r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Sc(e,t,n,"getOobCode"===n);return i(e,r)}return i(e,t).catch(async r=>{if(r.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const r=await Sc(e,t,n,"getOobCode"===n);return i(e,r)}return Promise.reject(r)})}function Cc(e,t,n){const i=yc(e);ml(i._canInitEmulator,i,"emulator-config-failed"),ml(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Tc(t),{host:a,port:o}=function(e){const t=Tc(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:Ec(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:Ec(t)}}}(t),l=null===o?"":":".concat(o);i.config.emulator={url:"".concat(s,"//").concat(a).concat(l,"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Tc(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ec(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ic{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gl("not implemented")}_getIdTokenResponse(e){return gl("not implemented")}_linkToIdToken(e,t){return gl("not implemented")}_getReauthenticationResolver(e){return gl("not implemented")}}async function Pc(e,t){return El(e,"POST","/v1/accounts:signUp",t)}async function Mc(e,t){return Pl(e,"POST","/v1/accounts:signInWithPassword",Tl(e,t))}class jc extends Ic{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new jc(e,t,"password")}static _fromEmailAndCode(e,t){return new jc(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Nc(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Mc);case"emailLink":return async function(e,t){return Pl(e,"POST","/v1/accounts:signInWithEmailLink",Tl(e,t))}(e,{email:this._email,oobCode:this._password});default:ul(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Nc(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Pc);case"emailLink":return async function(e,t){return Pl(e,"POST","/v1/accounts:signInWithEmailLink",Tl(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ul(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Rc(e,t){return Pl(e,"POST","/v1/accounts:signInWithIdp",Tl(e,t))}class Oc extends Ic{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Oc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ul("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=rl(t,["providerId","signInMethod"]);if(!n||!i)return null;const s=new Oc(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){return Rc(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Rc(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Rc(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pe(t)}return e}}const Dc={USER_NOT_FOUND:"user-not-found"};class Ac extends Ic{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ac({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ac({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Pl(e,"POST","/v1/accounts:signInWithPhoneNumber",Tl(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Pl(e,"POST","/v1/accounts:signInWithPhoneNumber",Tl(e,t));if(n.temporaryProof)throw Ol(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Pl(e,"POST","/v1/accounts:signInWithPhoneNumber",Tl(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Dc)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new Ac({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class Lc{constructor(e){var t,n,i,r,s,a;const o=me(ge(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=o.mode)&&void 0!==i?i:null);ml(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(r=o.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=me(ge(e)).link,n=t?me(ge(t)).deep_link_id:null,i=me(ge(e)).deep_link_id;return(i?me(ge(i)).link:null)||i||n||t||e}(e);try{return new Lc(t)}catch(n){return null}}}class Fc{constructor(){this.providerId=Fc.PROVIDER_ID}static credential(e,t){return jc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Lc.parseLink(t);return ml(n,"argument-error"),jc._fromEmailAndCode(e,n.code,n.tenantId)}}Fc.PROVIDER_ID="password",Fc.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Fc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class zc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Uc extends zc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Wc extends Uc{constructor(){super("facebook.com")}static credential(e){return Oc._fromParams({providerId:Wc.PROVIDER_ID,signInMethod:Wc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wc.credentialFromTaggedObject(e)}static credentialFromError(e){return Wc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Wc.credential(t.oauthAccessToken)}catch(n){return null}}}Wc.FACEBOOK_SIGN_IN_METHOD="facebook.com",Wc.PROVIDER_ID="facebook.com";class Vc extends Uc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Oc._fromParams({providerId:Vc.PROVIDER_ID,signInMethod:Vc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Vc.credentialFromTaggedObject(e)}static credentialFromError(e){return Vc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Vc.credential(n,i)}catch(r){return null}}}Vc.GOOGLE_SIGN_IN_METHOD="google.com",Vc.PROVIDER_ID="google.com";class Bc extends Uc{constructor(){super("github.com")}static credential(e){return Oc._fromParams({providerId:Bc.PROVIDER_ID,signInMethod:Bc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bc.credentialFromTaggedObject(e)}static credentialFromError(e){return Bc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Bc.credential(t.oauthAccessToken)}catch(n){return null}}}Bc.GITHUB_SIGN_IN_METHOD="github.com",Bc.PROVIDER_ID="github.com";class Hc extends Uc{constructor(){super("twitter.com")}static credential(e,t){return Oc._fromParams({providerId:Hc.PROVIDER_ID,signInMethod:Hc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Hc.credentialFromTaggedObject(e)}static credentialFromError(e){return Hc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Hc.credential(n,i)}catch(r){return null}}}Hc.TWITTER_SIGN_IN_METHOD="twitter.com",Hc.PROVIDER_ID="twitter.com";class qc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=await Ql._fromIdTokenResponse(e,n,i),s=Yc(n);return new qc({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Yc(n);return new qc({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Yc(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Gc extends ne{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Gc.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Gc(e,t,n,i)}}function Kc(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Gc._fromErrorAndOperation(e,n,t,i);throw n})}async function $c(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=await Bl(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return qc._forOperation(e,"link",i)}async function Qc(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=e;if(Ot(i.app))return Promise.reject(fl(i));const r="reauthenticate";try{const s=await Bl(e,Kc(i,r,t,e),n);ml(s.idToken,i,"internal-error");const a=Wl(s.idToken);ml(a,i,"internal-error");const{sub:o}=a;return ml(e.uid===o,i,"user-mismatch"),qc._forOperation(e,r,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&ul(i,"user-mismatch"),s}}async function Jc(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ot(e.app))return Promise.reject(fl(e));const i="signIn",r=await Kc(e,i,t),s=await qc._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}new WeakMap;const Xc="__sak";class Zc{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Xc,"1"),this.storage.removeItem(Xc),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class eu extends Zc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fc(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);hc()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}eu.type="LOCAL";const tu=eu;class nu extends Zc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}nu.type="SESSION";const iu=nu;class ru{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new ru(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const a=Array.from(s).map(async e=>e(t.origin,r)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function su(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}ru.receivers=[];class au{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise((a,o)=>{const l=su("",20);i.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),r=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(t.data.response);break;default:clearTimeout(c),clearTimeout(r),o(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function ou(){return window}function lu(){return"undefined"!==typeof ou().WorkerGlobalScope&&"function"===typeof ou().importScripts}const cu="firebaseLocalStorageDb",uu="firebaseLocalStorage",du="fbase_key";class hu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function fu(e,t){return e.transaction([uu],t?"readwrite":"readonly").objectStore(uu)}function pu(){const e=indexedDB.open(cu,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(uu,{keyPath:du})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(uu)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(cu);return new hu(e).toPromise()}(),t(await pu()))})})}async function mu(e,t,n){const i=fu(e,!0).put({[du]:t,value:n});return new hu(i).toPromise()}function gu(e,t){const n=fu(e,!0).delete(t);return new hu(n).toPromise()}class vu{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await pu()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lu()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ru._getInstance(lu()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new au(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pu();return await mu(e,Xc,"1"),await gu(e,Xc),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>mu(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=fu(e,!1).get(t),i=await new hu(n).toPromise();return void 0===i?null:i.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>gu(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=fu(e,!1).getAll();return new hu(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}vu.type="LOCAL";const yu=vu;wc("rcb"),new wl(3e4,6e4);const bu="recaptcha";async function xu(e,t,n){var i;const r=await n.verify();try{let s;if(ml("string"===typeof r,e,"argument-error"),ml(n.type===bu,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){ml("enroll"===t.type,e,"internal-error");const n=await function(e,t){return El(e,"POST","/v2/accounts/mfaEnrollment:start",Tl(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{ml("signin"===t.type,e,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;ml(n,e,"missing-multi-factor-info");const a=await function(e,t){return El(e,"POST","/v2/accounts/mfaSignIn:start",Tl(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return El(e,"POST","/v1/accounts:sendVerificationCode",Tl(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}class _u{constructor(e){this.providerId=_u.PROVIDER_ID,this.auth=yc(e)}verifyPhoneNumber(e,t){return xu(this.auth,e,we(t))}static credential(e,t){return Ac._fromVerification(e,t)}static credentialFromResult(e){const t=e;return _u.credentialFromTaggedObject(t)}static credentialFromError(e){return _u.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:i}=t;return n&&i?Ac._fromTokenResponse(n,i):null}}function wu(e,t){return t?Xl(t):(ml(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}_u.PROVIDER_ID="phone",_u.PHONE_SIGN_IN_METHOD="phone";class ku extends Ic{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Rc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Rc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Su(e){return Jc(e.auth,new ku(e),e.bypassAuthState)}function Nu(e){const{auth:t,user:n}=e;return ml(n,t,"internal-error"),Qc(n,new ku(e),e.bypassAuthState)}async function Cu(e){const{auth:t,user:n}=e;return ml(n,t,"internal-error"),$c(n,new ku(e),e.bypassAuthState)}class Tu{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Su;case"linkViaPopup":case"linkViaRedirect":return Cu;case"reauthViaPopup":case"reauthViaRedirect":return Nu;default:ul(this.auth,"internal-error")}}resolve(e){vl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Eu=new wl(2e3,1e4);class Iu extends Tu{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,Iu.currentPopupAction&&Iu.currentPopupAction.cancel(),Iu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ml(e,this.auth,"internal-error"),e}async onExecution(){vl(1===this.filter.length,"Popup operations only handle one event");const e=su();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(dl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(dl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Iu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dl(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Eu.get())};e()}}Iu.currentPopupAction=null;const Pu=new Map;class Mu extends Tu{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Pu.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Ou(t),i=Ru(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Pu.set(this.auth._key(),e)}return this.bypassAuthState||Pu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ju(e,t){Pu.set(e._key(),t)}function Ru(e){return Xl(e._redirectPersistence)}function Ou(e){return tc("pendingRedirect",e.config.apiKey,e.name)}async function Du(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ot(e.app))return Promise.reject(fl(e));const i=yc(e),r=wu(i,t),s=new Mu(i,r,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}class Au{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fu(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Fu(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(dl(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lu(e))}saveEventToCache(e){this.cachedEventUids.add(Lu(e)),this.lastProcessedEventTime=Date.now()}}function Lu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Fu(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const zu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Uu=/^https?/;async function Wu(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return El(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const i of t)try{if(Vu(i))return}catch(n){}ul(e,"unauthorized-domain")}function Vu(e){const t=yl(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Uu.test(n))return!1;if(zu.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Bu=new wl(3e4,6e4);function Hu(){const e=ou().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function qu(e){return new Promise((t,n)=>{var i,r,s;function a(){Hu(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Hu(),n(dl(e,"network-request-failed"))},timeout:Bu.get()})}if(null===(r=null===(i=ou().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=ou().gapi)||void 0===s?void 0:s.load)){const t=wc("iframefcb");return ou()[t]=()=>{gapi.load?a():n(dl(e,"network-request-failed"))},_c("".concat(xc.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw Yu=null,e})}let Yu=null;const Gu=new wl(5e3,15e3),Ku={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$u=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qu(e){const t=e.config;ml(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?kl(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),i={apiKey:t.apiKey,appName:e.name,v:Lt},r=$u.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),"".concat(n,"?").concat(pe(i).slice(1))}async function Ju(e){const t=await function(e){return Yu=Yu||qu(e),Yu}(e),n=ou().gapi;return ml(n,e,"internal-error"),t.open({where:document.body,url:Qu(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ku,dontclear:!0},t=>new Promise(async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=dl(e,"network-request-failed"),s=ou().setTimeout(()=>{i(r)},Gu.get());function a(){ou().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{i(r)})}))}const Xu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Zu{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function ed(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Xu),{width:i.toString(),height:r.toString(),top:s,left:a}),c=X().toLowerCase();n&&(o=ac(c)?"_blank":n),rc(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,i]=t;return"".concat(e).concat(n,"=").concat(i,",")},"");if(function(){var e;return dc(arguments.length>0&&void 0!==arguments[0]?arguments[0]:X())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",o),new Zu(null);const d=window.open(t||"",o,u);ml(d,e,"popup-blocked");try{d.focus()}catch(h){}return new Zu(d)}const td="__/auth/handler",nd="emulator/auth/handler",id=encodeURIComponent("fac");async function rd(e,t,n,i,r,s){ml(e.config.authDomain,e,"auth-domain-config-required"),ml(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:Lt,eventId:r};if(t instanceof zc){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",ue(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof Uc){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(id,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(td);return kl(t,nd)}(e),"?").concat(pe(o).slice(1)).concat(c)}const sd="webStorageSupport";const ad=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iu,this._completeRedirectFn=Du,this._overrideRedirectResult=ju}async _openPopup(e,t,n,i){var r;vl(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return ed(e,await rd(e,t,n,yl(),i),su())}async _openRedirect(e,t,n,i){await this._originValidation(e);return function(e){ou().location.href=e}(await rd(e,t,n,yl(),i)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(vl(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Ju(e),n=new Au(e);return t.register("authEvent",t=>{ml(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(sd,{type:sd},n=>{var i;const r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[sd];void 0!==r&&t(!!r),ul(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Wu(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fc()||sc()||dc()}};var od="@firebase/auth",ld="1.7.9";class cd{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ml(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ud=$("authIdTokenMaxAge")||300;let dd=null;var hd,fd;hd={loadJS:e=>new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=dl("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(i)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},xc=hd,fd="Browser",jt(new ke("auth",(e,t)=>{let{options:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=i.options;ml(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:a,authDomain:o,clientPlatform:fd,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pc(fd)},c=new vc(i,r,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Xl);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),jt(new ke("auth-internal",e=>(e=>new cd(e))(yc(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Ut(od,ld,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(fd)),Ut(od,ld,"esm2017");const pd={databaseURL:"https://gymwe-47c13-default-rtdb.asia-southeast1.firebasedatabase.app/",projectId:"gymwe-47c13",storageBucket:"gymwe-47c13.appspot.com",apiKey:"demo-key",authDomain:"gymwe-47c13.firebaseapp.com",messagingSenderId:"123456789",appId:"demo-app-id"};let md,gd,vd,yd;try{md=Ft(pd),gd=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt(),t=arguments.length>1?arguments[1]:void 0;const n=Rt(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=G("database");e&&function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=we(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&vn("Cannot call useEmulator() after instance has already been initialized.");const r=e._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&vn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Dn(Dn.OWNER);else if(i.mockUserToken){const t="string"===typeof i.mockUserToken?i.mockUserToken:J(i.mockUserToken,e.app.options.projectId);s=new Dn(t)}!function(e,t,n,i){e.repoInfo_=new Wn("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),i&&(e.authTokenProvider_=i)}(r,t,n,s)}(n,...e)}return n}(md),vd=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt(),t=arguments.length>1?arguments[1]:void 0;e=we(e);const n=Rt(e,nl).getImmediate({identifier:t}),i=G("storage");return i&&function(e,t,n){!function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:r}=i;r&&(e._overrideAuthToken="string"===typeof r?r:J(r,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}(n,...i),n}(md),yd=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt();const t=Rt(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Rt(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(he(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;ul(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:ad,persistence:[yu,tu,iu]}),i=$("authTokenSyncURL");if(i&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(i,location.origin);if(location.origin===e.origin){const t=(r=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>ud)return;const i=null===t||void 0===t?void 0:t.token;dd!==i&&(dd=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))});!function(e,t,n){we(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,i){we(e).onIdTokenChanged(t,n,i)}(n,e=>t(e))}}var r;const s=Y("auth");return s&&Cc(n,"http://".concat(s)),n}(md),console.log("Firebase initialized successfully")}catch(gn){console.warn("Firebase initialization failed:",gn),gd={ref:()=>({push:()=>({}),set:()=>Promise.resolve()}),push:()=>({}),set:()=>Promise.resolve(),get:()=>Promise.resolve({exists:()=>!1,val:()=>null})},vd={ref:()=>({uploadBytes:()=>Promise.resolve(),getDownloadURL:()=>Promise.resolve("")})},yd={}}const bd=y("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),xd=y("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),_d=y("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),wd=y("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),kd=y("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Sd=y("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Nd=y("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);function Cd(e){return e+.5|0}const Td=(e,t,n)=>Math.max(Math.min(e,n),t);function Ed(e){return Td(Cd(2.55*e),0,255)}function Id(e){return Td(Cd(255*e),0,255)}function Pd(e){return Td(Cd(e/2.55)/100,0,1)}function Md(e){return Td(Cd(100*e),0,100)}const jd={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Rd=[..."0123456789ABCDEF"],Od=e=>Rd[15&e],Dd=e=>Rd[(240&e)>>4]+Rd[15&e],Ad=e=>(240&e)>>4===(15&e);function Ld(e){var t=(e=>Ad(e.r)&&Ad(e.g)&&Ad(e.b)&&Ad(e.a))(e)?Od:Dd;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const Fd=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function zd(e,t,n){const i=t*Math.min(n,1-n),r=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-i*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function Ud(e,t,n){const i=function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+e/60)%6;return n-n*t*Math.max(Math.min(r,4-r,1),0)};return[i(5),i(3),i(1)]}function Wd(e,t,n){const i=zd(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function Vd(e){const t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),s=Math.min(t,n,i),a=(r+s)/2;let o,l,c;return r!==s&&(c=r-s,l=a>.5?c/(2-r-s):c/(r+s),o=function(e,t,n,i,r){return e===r?(t-n)/i+(t<n?6:0):t===r?(n-e)/i+2:(e-t)/i+4}(t,n,i,c,r),o=60*o+.5),[0|o,l||0,a]}function Bd(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(Id)}function Hd(e,t,n){return Bd(zd,e,t,n)}function qd(e){return(e%360+360)%360}function Yd(e){const t=Fd.exec(e);let n,i=255;if(!t)return;t[5]!==n&&(i=t[6]?Ed(+t[5]):Id(+t[5]));const r=qd(+t[2]),s=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return Bd(Wd,e,t,n)}(r,s,a):"hsv"===t[1]?function(e,t,n){return Bd(Ud,e,t,n)}(r,s,a):Hd(r,s,a),{r:n[0],g:n[1],b:n[2],a:i}}const Gd={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Kd={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let $d;function Qd(e){$d||($d=function(){const e={},t=Object.keys(Kd),n=Object.keys(Gd);let i,r,s,a,o;for(i=0;i<t.length;i++){for(a=o=t[i],r=0;r<n.length;r++)s=n[r],o=o.replace(s,Gd[s]);s=parseInt(Kd[a],16),e[o]=[s>>16&255,s>>8&255,255&s]}return e}(),$d.transparent=[0,0,0,0]);const t=$d[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const Jd=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Xd=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,Zd=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function eh(e,t,n){if(e){let i=Vd(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,0===t?360:1)),i=Hd(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function th(e,t){return e?Object.assign(t||{},e):e}function nh(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Id(e[3]))):(t=th(e,{r:0,g:0,b:0,a:1})).a=Id(t.a),t}function ih(e){return"r"===e.charAt(0)?function(e){const t=Jd.exec(e);let n,i,r,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?Ed(e):Td(255*e,0,255)}return n=+t[1],i=+t[3],r=+t[5],n=255&(t[2]?Ed(n):Td(n,0,255)),i=255&(t[4]?Ed(i):Td(i,0,255)),r=255&(t[6]?Ed(r):Td(r,0,255)),{r:n,g:i,b:r,a:s}}}(e):Yd(e)}class rh{constructor(e){if(e instanceof rh)return e;const t=typeof e;let n;"object"===t?n=nh(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*jd[e[1]],g:255&17*jd[e[2]],b:255&17*jd[e[3]],a:5===n?17*jd[e[4]]:255}:7!==n&&9!==n||(t={r:jd[e[1]]<<4|jd[e[2]],g:jd[e[3]]<<4|jd[e[4]],b:jd[e[5]]<<4|jd[e[6]],a:9===n?jd[e[7]]<<4|jd[e[8]]:255})),t}(e)||Qd(e)||ih(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=th(this._rgb);return e&&(e.a=Pd(e.a)),e}set rgb(e){this._rgb=nh(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(Pd(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}hexString(){return this._valid?Ld(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=Vd(e),n=t[0],i=Md(t[1]),r=Md(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(Pd(e.a),")"):"hsl(".concat(n,", ").concat(i,"%, ").concat(r,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,i=e.rgb;let r;const s=t===r?.5:t,a=2*s-1,o=n.a-i.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;r=1-l,n.r=255&l*n.r+r*i.r+.5,n.g=255&l*n.g+r*i.g+.5,n.b=255&l*n.b+r*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const i=Zd(Pd(e.r)),r=Zd(Pd(e.g)),s=Zd(Pd(e.b));return{r:Id(Xd(i+n*(Zd(Pd(t.r))-i))),g:Id(Xd(r+n*(Zd(Pd(t.g))-r))),b:Id(Xd(s+n*(Zd(Pd(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new rh(this.rgb)}alpha(e){return this._rgb.a=Id(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Cd(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return eh(this._rgb,2,e),this}darken(e){return eh(this._rgb,2,-e),this}saturate(e){return eh(this._rgb,1,e),this}desaturate(e){return eh(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=Vd(e);n[0]=qd(n[0]+t),n=Hd(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function sh(){}const ah=(()=>{let e=0;return()=>e++})();function oh(e){return null===e||void 0===e}function lh(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function ch(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function uh(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function dh(e,t){return uh(e)?e:t}function hh(e,t){return"undefined"===typeof e?t:e}const fh=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function ph(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function mh(e,t,n,i){let r,s,a;if(lh(e))if(s=e.length,i)for(r=s-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<s;r++)t.call(n,e[r],r);else if(ch(e))for(a=Object.keys(e),s=a.length,r=0;r<s;r++)t.call(n,e[a[r]],a[r])}function gh(e,t){let n,i,r,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],s=t[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function vh(e){if(lh(e))return e.map(vh);if(ch(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let r=0;for(;r<i;++r)t[n[r]]=vh(e[n[r]]);return t}return e}function yh(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function bh(e,t,n,i){if(!yh(e))return;const r=t[e],s=n[e];ch(r)&&ch(s)?xh(r,s,i):t[e]=vh(s)}function xh(e,t,n){const i=lh(t)?t:[t],r=i.length;if(!ch(e))return e;const s=(n=n||{}).merger||bh;let a;for(let o=0;o<r;++o){if(a=i[o],!ch(a))continue;const t=Object.keys(a);for(let i=0,r=t.length;i<r;++i)s(t[i],e,a,n)}return e}function _h(e,t){return xh(e,t,{merger:wh})}function wh(e,t,n){if(!yh(e))return;const i=t[e],r=n[e];ch(i)&&ch(r)?_h(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=vh(r))}const kh={"":e=>e,x:e=>e.x,y:e=>e.y};function Sh(e,t){const n=kh[t]||(kh[t]=function(e){const t=function(e){const t=e.split("."),n=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function Nh(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Ch=e=>"undefined"!==typeof e,Th=e=>"function"===typeof e,Eh=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const Ih=Math.PI,Ph=2*Ih,Mh=Ph+Ih,jh=Number.POSITIVE_INFINITY,Rh=Ih/180,Oh=Ih/2,Dh=Ih/4,Ah=2*Ih/3,Lh=Math.log10,Fh=Math.sign;function zh(e,t,n){return Math.abs(e-t)<n}function Uh(e){const t=Math.round(e);e=zh(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Lh(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function Wh(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Vh(e,t,n){let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function Bh(e){return e*(Ih/180)}function Hh(e){return e*(180/Ih)}function qh(e){if(!uh(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Yh(e,t){const n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*Ih&&(s+=Ph),{angle:s,distance:r}}function Gh(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Kh(e,t){return(e-t+Mh)%Ph-Ih}function $h(e){return(e%Ph+Ph)%Ph}function Qh(e,t,n,i){const r=$h(e),s=$h(t),a=$h(n),o=$h(s-r),l=$h(a-r),c=$h(r-s),u=$h(r-a);return r===s||r===a||i&&s===a||o>l&&c<u}function Jh(e,t,n){return Math.max(t,Math.min(n,e))}function Xh(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function Zh(e,t,n){n=n||(n=>e[n]<t);let i,r=e.length-1,s=0;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const ef=(e,t,n,i)=>Zh(e,n,i?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),tf=(e,t,n)=>Zh(e,n,i=>e[i][t]>=n);const nf=["push","pop","shift","splice","unshift"];function rf(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(t);-1!==r&&i.splice(r,1),i.length>0||(nf.forEach(t=>{delete e[t]}),delete e._chartjs)}function sf(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const af="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function of(e,t){let n=[],i=!1;return function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];n=s,i||(i=!0,af.call(window,()=>{i=!1,e.apply(t,n)}))}}const lf=e=>"start"===e?"left":"end"===e?"right":"center",cf=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function uf(e,t,n){const i=t.length;let r=0,s=i;if(e._sorted){const{iScale:a,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=a.axis,{min:d,max:h,minDefined:f,maxDefined:p}=a.getUserBounds();if(f){if(r=Math.min(ef(l,u,d).lo,n?i:ef(t,u,a.getPixelForValue(d)).lo),c){const e=l.slice(0,r+1).reverse().findIndex(e=>!oh(e[o.axis]));r-=Math.max(0,e)}r=Jh(r,0,i-1)}if(p){let e=Math.max(ef(l,a.axis,h,!0).hi+1,n?0:ef(t,u,a.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!oh(e[o.axis]));e+=Math.max(0,t)}s=Jh(e,r,i)-r}else s=i-r}return{start:r,count:s}}function df(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=r,!0;const s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const hf=e=>0===e||1===e,ff=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*Ph/n),pf=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Ph/n)+1,mf={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Oh),easeOutSine:e=>Math.sin(e*Oh),easeInOutSine:e=>-.5*(Math.cos(Ih*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>hf(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>hf(e)?e:ff(e,.075,.3),easeOutElastic:e=>hf(e)?e:pf(e,.075,.3),easeInOutElastic(e){const t=.1125;return hf(e)?e:e<.5?.5*ff(2*e,t,.45):.5+.5*pf(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-mf.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*mf.easeInBounce(2*e):.5*mf.easeOutBounce(2*e-1)+.5};function gf(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function vf(e){return gf(e)?e:new rh(e)}function yf(e){return gf(e)?e:new rh(e).saturate(.5).darken(.1).hexString()}const bf=["x","y","borderWidth","radius","tension"],xf=["color","borderColor","backgroundColor"];const _f=new Map;function wf(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let i=_f.get(n);return i||(i=new Intl.NumberFormat(e,t),_f.set(n,i)),i}(t,n).format(e)}const kf={values:e=>lh(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const i=this.chart.options.locale;let r,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(r="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const a=Lh(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:r,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),wf(e,i,l)},logarithmic(e,t,n){if(0===e)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(Lh(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?kf.numeric.call(this,e,t,n):""}};var Sf={formatters:kf};const Nf=Object.create(null),Cf=Object.create(null);function Tf(e,t){if(!t)return e;const n=t.split(".");for(let i=0,r=n.length;i<r;++i){const t=n[i];e=e[t]||(e[t]=Object.create(null))}return e}function Ef(e,t,n){return"string"===typeof t?xh(Tf(e,t),n):xh(Tf(e,""),t)}class If{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>yf(t.backgroundColor),this.hoverBorderColor=(e,t)=>yf(t.borderColor),this.hoverColor=(e,t)=>yf(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Ef(this,e,t)}get(e){return Tf(this,e)}describe(e,t){return Ef(Cf,e,t)}override(e,t){return Ef(Nf,e,t)}route(e,t,n,i){const r=Tf(this,e),s=Tf(this,n),a="_"+t;Object.defineProperties(r,{[a]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=s[i];return ch(e)?Object.assign({},t,e):hh(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach(e=>e(this))}}var Pf=new If({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:xf},numbers:{type:"number",properties:bf}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Sf.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function Mf(e,t,n,i,r){let s=t[r];return s||(s=t[r]=e.measureText(r).width,n.push(r)),s>i&&(i=s),i}function jf(e,t,n,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let a=0;const o=n.length;let l,c,u,d,h;for(l=0;l<o;l++)if(d=n[l],void 0===d||null===d||lh(d)){if(lh(d))for(c=0,u=d.length;c<u;c++)h=d[c],void 0===h||null===h||lh(h)||(a=Mf(e,r,s,a,h))}else a=Mf(e,r,s,a,d);e.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return a}function Rf(e,t,n){const i=e.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function Of(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Df(e,t,n,i){Af(e,t,n,i,null)}function Af(e,t,n,i,r){let s,a,o,l,c,u,d,h;const f=t.pointStyle,p=t.rotation,m=t.radius;let g=(p||0)*Rh;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,i),e.rotate(g),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(m)||m<=0)){switch(e.beginPath(),f){default:r?e.ellipse(n,i,r/2,m,0,0,Ph):e.arc(n,i,m,0,Ph),e.closePath();break;case"triangle":u=r?r/2:m,e.moveTo(n+Math.sin(g)*u,i-Math.cos(g)*m),g+=Ah,e.lineTo(n+Math.sin(g)*u,i-Math.cos(g)*m),g+=Ah,e.lineTo(n+Math.sin(g)*u,i-Math.cos(g)*m),e.closePath();break;case"rectRounded":c=.516*m,l=m-c,a=Math.cos(g+Dh)*l,d=Math.cos(g+Dh)*(r?r/2-c:l),o=Math.sin(g+Dh)*l,h=Math.sin(g+Dh)*(r?r/2-c:l),e.arc(n-d,i-o,c,g-Ih,g-Oh),e.arc(n+h,i-a,c,g-Oh,g),e.arc(n+d,i+o,c,g,g+Oh),e.arc(n-h,i+a,c,g+Oh,g+Ih),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,u=r?r/2:l,e.rect(n-u,i-l,2*u,2*l);break}g+=Dh;case"rectRot":d=Math.cos(g)*(r?r/2:m),a=Math.cos(g)*m,o=Math.sin(g)*m,h=Math.sin(g)*(r?r/2:m),e.moveTo(n-d,i-o),e.lineTo(n+h,i-a),e.lineTo(n+d,i+o),e.lineTo(n-h,i+a),e.closePath();break;case"crossRot":g+=Dh;case"cross":d=Math.cos(g)*(r?r/2:m),a=Math.cos(g)*m,o=Math.sin(g)*m,h=Math.sin(g)*(r?r/2:m),e.moveTo(n-d,i-o),e.lineTo(n+d,i+o),e.moveTo(n+h,i-a),e.lineTo(n-h,i+a);break;case"star":d=Math.cos(g)*(r?r/2:m),a=Math.cos(g)*m,o=Math.sin(g)*m,h=Math.sin(g)*(r?r/2:m),e.moveTo(n-d,i-o),e.lineTo(n+d,i+o),e.moveTo(n+h,i-a),e.lineTo(n-h,i+a),g+=Dh,d=Math.cos(g)*(r?r/2:m),a=Math.cos(g)*m,o=Math.sin(g)*m,h=Math.sin(g)*(r?r/2:m),e.moveTo(n-d,i-o),e.lineTo(n+d,i+o),e.moveTo(n+h,i-a),e.lineTo(n-h,i+a);break;case"line":a=r?r/2:Math.cos(g)*m,o=Math.sin(g)*m,e.moveTo(n-a,i-o),e.lineTo(n+a,i+o);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(g)*(r?r/2:m),i+Math.sin(g)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function Lf(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Ff(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function zf(e){e.restore()}function Uf(e,t,n,i,r){if(!t)return e.lineTo(n.x,n.y);if("middle"===r){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else"after"===r!==!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Wf(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Vf(e,t,n,i,r){if(r.strikethrough||r.underline){const s=e.measureText(i),a=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(a,u),e.lineTo(o,u),e.stroke()}}function Bf(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Hf(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=lh(t)?t:[t],o=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=r.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),oh(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<a.length;++l)c=a[l],s.backdrop&&Bf(e,s.backdrop),o&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),oh(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,i,s.maxWidth)),e.fillText(c,n,i,s.maxWidth),Vf(e,n,i,c,s),i+=Number(r.lineHeight);e.restore()}function qf(e,t){const{x:n,y:i,w:r,h:s,radius:a}=t;e.arc(n+a.topLeft,i+a.topLeft,a.topLeft,1.5*Ih,Ih,!0),e.lineTo(n,i+s-a.bottomLeft),e.arc(n+a.bottomLeft,i+s-a.bottomLeft,a.bottomLeft,Ih,Oh,!0),e.lineTo(n+r-a.bottomRight,i+s),e.arc(n+r-a.bottomRight,i+s-a.bottomRight,a.bottomRight,Oh,0,!0),e.lineTo(n+r,i+a.topRight),e.arc(n+r-a.topRight,i+a.topRight,a.topRight,0,-Oh,!0),e.lineTo(n+a.topLeft,i)}const Yf=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Gf=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Kf(e,t){const n=(""+e).match(Yf);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const $f=e=>+e||0;function Qf(e,t){const n={},i=ch(t),r=i?Object.keys(t):t,s=ch(e)?i?n=>hh(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of r)n[a]=$f(s(a));return n}function Jf(e){return Qf(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Xf(e){return Qf(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Zf(e){const t=Jf(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function ep(e,t){e=e||{},t=t||Pf.font;let n=hh(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let i=hh(e.style,t.style);i&&!(""+i).match(Gf)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:hh(e.family,t.family),lineHeight:Kf(hh(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:hh(e.weight,t.weight),string:""};return r.string=function(e){return!e||oh(e.size)||oh(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r}function tp(e,t,n,i){let r,s,a,o=!0;for(r=0,s=e.length;r<s;++r)if(a=e[r],void 0!==a&&(void 0!==t&&"function"===typeof a&&(a=a(t),o=!1),void 0!==n&&lh(a)&&(a=a[n%a.length],o=!1),void 0!==a))return i&&!o&&(i.cacheable=!1),a}function np(e,t){return Object.assign(Object.create(e),t)}function ip(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const r=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=pp("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:i,override:i=>ip([i,...e],t,r,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,i)=>lp(n,i,()=>function(e,t,n,i){let r;for(const s of t)if(r=pp(ap(s,e),n),"undefined"!==typeof r)return op(e,r)?hp(n,i,e,r):r}(i,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>mp(e).includes(t),ownKeys:e=>mp(e),set(e,t,n){const r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function rp(e,t,n,i){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:sp(e,i),setContext:t=>rp(e,t,n,i),override:r=>rp(e.override(r),t,n,i)};return new Proxy(r,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>lp(e,t,()=>function(e,t,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:a}=e;let o=i[t];Th(o)&&a.isScriptable(t)&&(o=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:a,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(s,a||i);o.delete(e),op(e,l)&&(l=hp(r._scopes,r,e,l));return l}(t,o,e,n));lh(o)&&o.length&&(o=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:a,_descriptors:o}=n;if("undefined"!==typeof s.index&&i(e))return t[s.index%t.length];if(ch(t[0])){const n=t,i=r._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=hp(i,r,e,l);t.push(rp(n,s,a&&a[e],o))}}return t}(t,o,e,a.isIndexable));op(t,o)&&(o=rp(o,r,s&&s[t],a));return o}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,i)=>(e[n]=i,delete t[n],!0)})}function sp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Th(n)?n:()=>n,isIndexable:Th(i)?i:()=>i}}const ap=(e,t)=>e?e+Nh(t):t,op=(e,t)=>ch(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function lp(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const i=n();return e[t]=i,i}function cp(e,t,n){return Th(e)?e(t,n):e}const up=(e,t)=>!0===e?t:"string"===typeof e?Sh(t,e):void 0;function dp(e,t,n,i,r){for(const s of t){const t=up(n,s);if(t){e.add(t);const s=cp(t._fallback,n,r);if("undefined"!==typeof s&&s!==n&&s!==i)return s}else if(!1===t&&"undefined"!==typeof i&&n!==i)return null}return!1}function hp(e,t,n,i){const r=t._rootScopes,s=cp(t._fallback,n,i),a=[...e,...r],o=new Set;o.add(i);let l=fp(o,a,n,s||n,i);return null!==l&&(("undefined"===typeof s||s===n||(l=fp(o,a,s,l,i),null!==l))&&ip(Array.from(o),[""],r,s,()=>function(e,t,n){const i=e._getTarget();t in i||(i[t]={});const r=i[t];if(lh(r)&&ch(n))return n;return r||{}}(t,n,i)))}function fp(e,t,n,i,r){for(;n;)n=dp(e,t,n,i,r);return n}function pp(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function mp(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function gp(e,t,n,i){const{iScale:r}=e,{key:s="r"}=this._parsing,a=new Array(i);let o,l,c,u;for(o=0,l=i;o<l;++o)c=o+n,u=t[c],a[o]={r:r.parse(Sh(u,s),c)};return a}const vp=Number.EPSILON||1e-14,yp=(e,t)=>t<e.length&&!e[t].skip&&e[t],bp=e=>"x"===e?"y":"x";function xp(e,t,n,i){const r=e.skip?t:e,s=t,a=n.skip?t:n,o=Gh(s,r),l=Gh(a,s);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=i*c,h=i*u;return{previous:{x:s.x-d*(a.x-r.x),y:s.y-d*(a.y-r.y)},next:{x:s.x+h*(a.x-r.x),y:s.y+h*(a.y-r.y)}}}function _p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=bp(t),i=e.length,r=Array(i).fill(0),s=Array(i);let a,o,l,c=yp(e,0);for(a=0;a<i;++a)if(o=l,l=c,c=yp(e,a+1),l){if(c){const e=c[t]-l[t];r[a]=0!==e?(c[n]-l[n])/e:0}s[a]=o?c?Fh(r[a-1])!==Fh(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}!function(e,t,n){const i=e.length;let r,s,a,o,l,c=yp(e,0);for(let u=0;u<i-1;++u)l=c,c=yp(e,u+1),l&&c&&(zh(t[u],0,vp)?n[u]=n[u+1]=0:(r=n[u]/t[u],s=n[u+1]/t[u],o=Math.pow(r,2)+Math.pow(s,2),o<=9||(a=3/Math.sqrt(o),n[u]=r*a*t[u],n[u+1]=s*a*t[u])))}(e,r,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const i=bp(n),r=e.length;let s,a,o,l=yp(e,0);for(let c=0;c<r;++c){if(a=o,o=l,l=yp(e,c+1),!o)continue;const r=o[n],u=o[i];a&&(s=(r-a[n])/3,o["cp1".concat(n)]=r-s,o["cp1".concat(i)]=u-s*t[c]),l&&(s=(l[n]-r)/3,o["cp2".concat(n)]=r+s,o["cp2".concat(i)]=u+s*t[c])}}(e,s,t)}function wp(e,t,n){return Math.max(Math.min(e,n),t)}function kp(e,t,n,i,r){let s,a,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)_p(e,r);else{let n=i?e[e.length-1]:e[0];for(s=0,a=e.length;s<a;++s)o=e[s],l=xp(n,o,e[Math.min(s+1,a-(i?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,i,r,s,a,o=Lf(e[0],t);for(n=0,i=e.length;n<i;++n)a=s,s=o,o=n<i-1&&Lf(e[n+1],t),s&&(r=e[n],a&&(r.cp1x=wp(r.cp1x,t.left,t.right),r.cp1y=wp(r.cp1y,t.top,t.bottom)),o&&(r.cp2x=wp(r.cp2x,t.left,t.right),r.cp2y=wp(r.cp2y,t.top,t.bottom)))}(e,n)}function Sp(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Np(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Cp(e,t,n){let i;return"string"===typeof e?(i=parseInt(e,10),-1!==e.indexOf("%")&&(i=i/100*t.parentNode[n])):i=e,i}const Tp=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const Ep=["top","right","bottom","left"];function Ip(e,t,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=Ep[r];i[s]=parseFloat(e[t+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function Pp(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,r=Tp(n),s="border-box"===r.boxSizing,a=Ip(r,"padding"),o=Ip(r,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:r,offsetY:s}=i;let a,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(r,s,e.target))a=r,o=s;else{const e=t.getBoundingClientRect();a=i.clientX-e.left,o=i.clientY-e.top,l=!0}return{x:a,y:o,box:l}}(e,n),d=a.left+(u&&o.left),h=a.top+(u&&o.top);let{width:f,height:p}=t;return s&&(f-=a.width+o.width,p-=a.height+o.height),{x:Math.round((l-d)/f*n.width/i),y:Math.round((c-h)/p*n.height/i)}}const Mp=e=>Math.round(10*e)/10;function jp(e,t,n,i){const r=Tp(e),s=Ip(r,"margin"),a=Cp(r.maxWidth,e,"clientWidth")||jh,o=Cp(r.maxHeight,e,"clientHeight")||jh,l=function(e,t,n){let i,r;if(void 0===t||void 0===n){const s=e&&Np(e);if(s){const e=s.getBoundingClientRect(),a=Tp(s),o=Ip(a,"border","width"),l=Ip(a,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,i=Cp(a.maxWidth,s,"clientWidth"),r=Cp(a.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:i||jh,maxHeight:r||jh}}(e,t,n);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const e=Ip(r,"border","width"),t=Ip(r,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=Mp(Math.min(c,a,l.maxWidth)),u=Mp(Math.min(u,o,l.maxHeight)),c&&!u&&(u=Mp(c/2));return(void 0!==t||void 0!==n)&&i&&l.height&&u>l.height&&(u=l.height,c=Mp(Math.floor(u*i))),{width:c,height:u}}function Rp(e,t,n){const i=t||1,r=Mp(e.height*i),s=Mp(e.width*i);e.height=Mp(e.height),e.width=Mp(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height="".concat(e.height,"px"),a.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==i||a.height!==r||a.width!==s)&&(e.currentDevicePixelRatio=i,a.height=r,a.width=s,e.ctx.setTransform(i,0,0,i,0,0),!0)}const Op=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Sp()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(t){}return e}();function Dp(e,t){const n=function(e,t){return Tp(e).getPropertyValue(t)}(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Ap(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Lp(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:"middle"===i?n<.5?e.y:t.y:"after"===i?n<1?e.y:t.y:n>0?t.y:e.y}}function Fp(e,t,n,i){const r={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},a=Ap(e,r,n),o=Ap(r,s,n),l=Ap(s,t,n),c=Ap(a,o,n),u=Ap(o,l,n);return Ap(c,u,n)}function zp(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Up(e,t){let n,i;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function Wp(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Vp(e){return"angle"===e?{between:Qh,compare:Kh,normalize:$h}:{between:Xh,compare:(e,t)=>e-t,normalize:e=>e}}function Bp(e){let{start:t,end:n,count:i,loop:r,style:s}=e;return{start:t%i,end:n%i,loop:r&&(n-t+1)%i===0,style:s}}function Hp(e,t,n){if(!n)return[e];const{property:i,start:r,end:s}=n,a=t.length,{compare:o,between:l,normalize:c}=Vp(i),{start:u,end:d,loop:h,style:f}=function(e,t,n){const{property:i,start:r,end:s}=n,{between:a,normalize:o}=Vp(i),l=t.length;let c,u,{start:d,end:h,loop:f}=e;if(f){for(d+=l,h+=l,c=0,u=l;c<u&&a(o(t[d%l][i]),r,s);++c)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:f,style:e.style}}(e,t,n),p=[];let m,g,v,y=!1,b=null;const x=()=>y||l(r,v,m)&&0!==o(r,v),_=()=>!y||0===o(s,m)||l(s,v,m);for(let w=u,k=u;w<=d;++w)g=t[w%a],g.skip||(m=c(g[i]),m!==v&&(y=l(m,r,s),null===b&&x()&&(b=0===o(m,r)?w:k),null!==b&&_()&&(p.push(Bp({start:b,end:w,loop:h,count:a,style:f})),b=null),k=w,v=m));return null!==b&&p.push(Bp({start:b,end:d,loop:h,count:a,style:f})),p}function qp(e,t){const n=[],i=e.segments;for(let r=0;r<i.length;r++){const s=Hp(i[r],e.points,t);s.length&&n.push(...s)}return n}function Yp(e,t,n,i){return i&&i.setContext&&n?function(e,t,n,i){const r=e._chart.getContext(),s=Gp(e.options),{_datasetIndex:a,options:{spanGaps:o}}=e,l=n.length,c=[];let u=s,d=t[0].start,h=d;function f(e,t,i,r){const s=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:i,style:r}),u=r,d=t%l)}}for(const p of t){d=o?d:p.start;let e,t=n[d%l];for(h=d+1;h<=p.end;h++){const s=n[h%l];e=Gp(i.setContext(np(r,{type:"segment",p0:t,p1:s,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:a}))),Kp(e,u)&&f(d,h-1,p.loop,u),t=s,u=e}d<h-1&&f(d,h-1,p.loop,u)}return c}(e,t,n,i):t}function Gp(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Kp(e,t){if(!t)return!1;const n=[],i=function(e,t){return gf(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,i)!==JSON.stringify(t,i)}function $p(e,t,n){return e.options.clip?e[n]:t[n]}function Qp(e,t){const n=t._clip;if(n.disabled)return!1;const i=function(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:$p(n,t,"left"),right:$p(n,t,"right"),top:$p(i,t,"top"),bottom:$p(i,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:i.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:i.right+(!0===n.right?0:n.right),top:!1===n.top?0:i.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:i.bottom+(!0===n.bottom?0:n.bottom)}}class Jp{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,i){const r=t.listeners[i],s=t.duration;r.forEach(i=>i({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=af.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let s,a=r.length-1,o=!1;for(;a>=0;--a)s=r[a],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),o=!0):(r[a]=r[r.length-1],r.pop());o&&(i.draw(),this._notify(i,n,e,"progress")),r.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),t+=r.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Xp=new Jp;const Zp="transparent",em={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const i=vf(e||Zp),r=i.valid&&vf(t||Zp);return r&&r.valid?r.mix(i,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class tm{constructor(e,t,n,i){const r=t[n];i=tp([e.to,i,r,e.from]);const s=tp([e.from,r,i]);this._active=!0,this._fn=e.fn||em[e.type||typeof s],this._easing=mf[e.easing]||mf.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,s=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=tp([e.to,t,i,e.from]),this._from=tp([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,i=this._prop,r=this._from,s=this._loop,a=this._to;let o;if(this._active=r!==a&&(s||t<n),!this._active)return this._target[i]=a,void this._notify(!0);t<0?this._target[i]=r:(o=t/n%2,o=s&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[i]=this._fn(r,a,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][t]()}}class nm{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!ch(e))return;const t=Object.keys(Pf.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const r=e[i];if(!ch(r))return;const s={};for(const e of t)s[e]=r[e];(lh(r.properties)&&r.properties||[i]).forEach(e=>{e!==i&&n.has(e)||n.set(e,s)})})}_animateOptions(e,t){const n=t.options,i=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(e,t){const n=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const t=e[i[r]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),r}_createAnimations(e,t){const n=this._properties,i=[],r=e.$animations||(e.$animations={}),s=Object.keys(t),a=Date.now();let o;for(o=s.length-1;o>=0;--o){const l=s[o];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(e,t));continue}const c=t[l];let u=r[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,a);continue}u.cancel()}d&&d.duration?(r[l]=u=new tm(d,e,l,c),i.push(u)):e[l]=c}return i}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(Xp.add(this._chart,n),!0):void 0}}function im(e,t){const n=e&&e.options||{},i=n.reverse,r=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:i?s:r,end:i?r:s}}function rm(e,t){const n=[],i=e._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function sm(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=e.keys,s="single"===i.mode;let a,o,l,c;if(null===t)return;let u=!1;for(a=0,o=r.length;a<o;++a){if(l=+r[a],l===n){if(u=!0,i.all)continue;break}c=e.values[l],uh(c)&&(s||0===t||Fh(t)===Fh(c))&&(t+=c)}return u||i.all?t:0}function am(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function om(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function lm(e,t,n,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const t=e[r.index];if(n&&t>0||!n&&t<0)return r.index}return null}function cm(e,t){const{chart:n,_cachedMeta:i}=e,r=n._stacks||(n._stacks={}),{iScale:s,vScale:a,index:o}=i,l=s.axis,c=a.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(s,a,i),d=t.length;let h;for(let f=0;f<d;++f){const e=t[f],{[l]:n,[c]:s}=e;h=(e._stacks||(e._stacks={}))[c]=om(r,u,n),h[o]=s,h._top=lm(h,a,!0,i.type),h._bottom=lm(h,a,!1,i.type);(h._visualValues||(h._visualValues={}))[o]=s}}function um(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function dm(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[i]||void 0===t[i][n])return;delete t[i][n],void 0!==t[i]._visualValues&&void 0!==t[i]._visualValues[n]&&delete t[i]._visualValues[n]}}}const hm=e=>"reset"===e||"none"===e,fm=(e,t)=>t?e:Object.assign({},e);class pm{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=am(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&dm(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=(e,t,n,i)=>"x"===e?t:"r"===e?i:n,r=t.xAxisID=hh(n.xAxisID,um(e,"x")),s=t.yAxisID=hh(n.yAxisID,um(e,"y")),a=t.rAxisID=hh(n.rAxisID,um(e,"r")),o=t.indexAxis,l=t.iAxisID=i(o,r,s,a),c=t.vAxisID=i(o,s,r,a);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&rf(this._data,this),e._stacked&&dm(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(ch(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:i}=t,r="x"===n.axis?"x":"y",s="x"===i.axis?"x":"y",a=Object.keys(e),o=new Array(a.length);let l,c,u;for(l=0,c=a.length;l<c;++l)u=a[l],o[l]={[r]:u,[s]:e[u]};return o}(t,e)}else if(n!==t){if(n){rf(n,this);const e=this._cachedMeta;dm(e),e._parsed=[]}t&&Object.isExtensible(t)&&(r=this,(i=t)._chartjs?i._chartjs.listeners.push(r):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),nf.forEach(e=>{const t="_onData"+Nh(e),n=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];const a=n.apply(this,r);return i._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...r)}),a}})}))),this._syncList=[],this._data=t}var i,r}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=t._stacked;t._stacked=am(t.vScale,t),t.stack!==n.stack&&(i=!0,dm(t),t.stack=n.stack),this._resyncElements(e),(i||r!==t._stacked)&&(cm(this,t._parsed),t._stacked=am(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:s}=n,a=r.axis;let o,l,c,u=0===e&&t===i.length||n._sorted,d=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=lh(i[e])?this.parseArrayData(n,i,e,t):ch(i[e])?this.parseObjectData(n,i,e,t):this.parsePrimitiveData(n,i,e,t);const r=()=>null===l[a]||d&&l[a]<d[a];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],u&&(r()&&(u=!1),d=l);n._sorted=u}s&&cm(this,c)}parsePrimitiveData(e,t,n,i){const{iScale:r,vScale:s}=e,a=r.axis,o=s.axis,l=r.getLabels(),c=r===s,u=new Array(i);let d,h,f;for(d=0,h=i;d<h;++d)f=d+n,u[d]={[a]:c||r.parse(l[f],f),[o]:s.parse(t[f],f)};return u}parseArrayData(e,t,n,i){const{xScale:r,yScale:s}=e,a=new Array(i);let o,l,c,u;for(o=0,l=i;o<l;++o)c=o+n,u=t[c],a[o]={x:r.parse(u[0],c),y:s.parse(u[1],c)};return a}parseObjectData(e,t,n,i){const{xScale:r,yScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(i);let c,u,d,h;for(c=0,u=i;c<u;++c)d=c+n,h=t[d],l[c]={x:r.parse(Sh(h,a),d),y:s.parse(Sh(h,o),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const i=this.chart,r=this._cachedMeta,s=t[e.axis];return sm({keys:rm(i,!0),values:t._stacks[e.axis]._visualValues},s,r.index,{mode:n})}updateRangeFromParsed(e,t,n,i){const r=n[t.axis];let s=null===r?NaN:r;const a=i&&n._stacks[t.axis];i&&a&&(i.values=a,s=sm(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&e===n.iScale,s=i.length,a=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:rm(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:i,maxDefined:r}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(a);let d,h;function f(){h=i[d];const t=h[a.axis];return!uh(h[e.axis])||c>t||u<t}for(d=0;d<s&&(f()||(this.updateRangeFromParsed(l,e,h,o),!r));++d);if(r)for(d=s-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i][e.axis],uh(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,i,r;return ch(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:!1===e}}(hh(this.options.clip,function(e,t,n){if(!1===n)return!1;const i=im(e,n),r=im(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,i=n.data||[],r=t.chartArea,s=[],a=this._drawStart||0,o=this._drawCount||i.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,r,a,o),c=a;c<a+o;++c){const t=i[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,r))}for(c=0;c<s.length;++c)s[c].draw(e,r)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];r=t.$context||(t.$context=function(e,t,n){return np(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return np(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const i="active"===t,r=this._cachedDataOpts,s=e+"-"+t,a=r[s],o=this.enableOptionSharing&&Ch(n);if(a)return fm(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=i?["".concat(e,"Hover"),"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(Pf.elements[e]),f=l.resolveNamedOptions(d,h,()=>this.getContext(n,i,t),u);return f.$shared&&(f.$shared=o,r[s]=Object.freeze(fm(f,o))),f}_resolveAnimations(e,t,n){const i=this.chart,r=this._cachedDataOpts,s="animation-".concat(t),a=r[s];if(a)return a;let o;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,t),s=i.getOptionScopes(this.getDataset(),r);o=i.createResolver(s,this.getContext(e,n,t))}const l=new nm(i,o&&o.animations);return o&&o._cacheable&&(r[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||hm(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),i=this._sharedOptions,r=this.getSharedOptions(n),s=this.includeOptions(t,r)||r!==i;return this.updateSharedOptions(r,t,n),{sharedOptions:r,includeOptions:s}}updateElement(e,t,n,i){hm(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}updateSharedOptions(e,t,n){e&&!hm(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,i){e.active=i;const r=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const i=n.length,r=t.length,s=Math.min(r,i);s&&this.parse(0,s),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._cachedMeta,r=i.data,s=e+t;let a;const o=e=>{for(e.length+=t,a=e.length-1;a>=s;a--)e[a]=e[a-t]};for(o(r),a=e;a<s;++a)r[a]=new this.dataElementType;this._parsing&&o(i._parsed),this.parse(e,t),n&&this.updateElements(r,e,t,"reset")}updateElements(e,t,n,i){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,t);n._stacked&&dm(n,i)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,i]=e;this[t](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function mm(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let t=0,r=n.length;t<r;t++)i=i.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=sf(i.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let i,r,s,a,o=t._length;const l=()=>{32767!==s&&-32768!==s&&(Ch(a)&&(o=Math.min(o,Math.abs(s-a)||o)),a=s)};for(i=0,r=n.length;i<r;++i)s=t.getPixelForValue(n[i]),l();for(a=void 0,i=0,r=t.ticks.length;i<r;++i)s=t.getPixelForTick(i),l();return o}function gm(e,t,n,i){return lh(e)?function(e,t,n,i){const r=n.parse(e[0],i),s=n.parse(e[1],i),a=Math.min(r,s),o=Math.max(r,s);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:a,max:o}}(e,t,n,i):t[n.axis]=n.parse(e,i),t}function vm(e,t,n,i){const r=e.iScale,s=e.vScale,a=r.getLabels(),o=r===s,l=[];let c,u,d,h;for(c=n,u=n+i;c<u;++c)h=t[c],d={},d[r.axis]=o||r.parse(a[c],c),l.push(gm(h,d,s,c));return l}function ym(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function bm(e,t,n,i){let r=t.borderSkipped;const s={};if(!r)return void(e.borderSkipped=s);if(!0===r)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:o,reverse:l,top:c,bottom:u}=function(e){let t,n,i,r,s;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:t,top:r,bottom:s}}(e);"middle"===r&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(s[xm(u,a,o,l)]=!0,r=c)),s[xm(r,a,o,l)]=!0,e.borderSkipped=s}function xm(e,t,n,i){var r,s,a;return i?(a=n,e=_m(e=(r=e)===(s=t)?a:r===a?s:r,n,t)):e=_m(e,t,n),e}function _m(e,t,n){return"start"===e?t:"end"===e?n:e}function wm(e,t,n){let{inflateAmount:i}=t;e.inflateAmount="auto"===i?1===n?.33:0:i}o(pm,"defaults",{}),o(pm,"datasetElementType",null),o(pm,"dataElementType",null);class km extends pm{parsePrimitiveData(e,t,n,i){return vm(e,t,n,i)}parseArrayData(e,t,n,i){return vm(e,t,n,i)}parseObjectData(e,t,n,i){const{iScale:r,vScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l="x"===r.axis?a:o,c="x"===s.axis?a:o,u=[];let d,h,f,p;for(d=n,h=n+i;d<h;++d)p=t[d],f={},f[r.axis]=r.parse(Sh(p,l),d),u.push(gm(Sh(p,c),f,s,d));return u}updateRangeFromParsed(e,t,n,i){super.updateRangeFromParsed(e,t,n,i);const r=n._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:i}=t,r=this.getParsed(e),s=r._custom,a=ym(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,i){const r="reset"===i,{index:s,_cachedMeta:{vScale:a}}=this,o=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,i);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=r||oh(t[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(h),f=this._calculateBarIndexPixels(h,c),p=(t._stacks||{})[a.axis],m={horizontal:l,base:n.base,enableBorderRadius:!p||ym(t._custom)||s===p._top||s===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};d&&(m.options=u||this.resolveDataElementOptions(h,e[h].active?"active":i));const g=m.options||e[h].options;bm(m,g,p,s),wm(m,g,c.ratio),this.updateElement(e[h],h,m,i)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),r=n.options.stacked,s=[],a=this._cachedMeta.controller.getParsed(t),o=a&&a[n.axis],l=e=>{const t=e._parsed.find(e=>e[n.axis]===o),i=t&&t[e.vScale.axis];if(oh(i)||isNaN(i))return!0};for(const c of i)if((void 0===t||!l(c))&&((!1===r||-1===s.indexOf(c.stack)||void 0===r&&void 0===c.stack)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[hh("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const i=this._getStacks(e,n),r=void 0!==t?i.indexOf(t):-1;return-1===r?i.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,i=[];let r,s;for(r=0,s=t.data.length;r<s;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const a=e.barThickness;return{min:a||mm(t),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:i},options:{base:r,minBarLength:s}}=this,a=r||0,o=this.getParsed(e),l=o._custom,c=ym(l);let u,d,h=o[t.axis],f=0,p=n?this.applyStack(t,o,n):h;p!==h&&(f=p-h,p=h),c&&(h=l.barStart,p=l.barEnd-l.barStart,0!==h&&Fh(h)!==Fh(l.barEnd)&&(f=0),f+=h);const m=oh(r)||c?f:r;let g=t.getPixelForValue(m);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(f+p):g,d=u-g,Math.abs(d)<s){d=function(e,t,n){return 0!==e?Fh(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(d,t,a)*s,h===a&&(g-=d/2);const e=t.getPixelForDecimal(0),r=t.getPixelForDecimal(1),l=Math.min(e,r),f=Math.max(e,r);g=Math.max(Math.min(g,f),l),u=g+d,n&&!c&&(o._stacks[t.axis]._visualValues[i]=t.getValueForPixel(u)-t.getValueForPixel(g))}if(g===t.getPixelForValue(a)){const e=Fh(d)*t.getLineWidthForValue(a)/2;g+=e,d-=e}return{size:d,base:g,head:u,center:u+d/2}}_calculateBarIndexPixels(e,t){const n=t.scale,i=this.options,r=i.skipNull,s=hh(i.maxBarThickness,1/0);let a,o;const l=this._getAxisCount();if(t.grouped){const n=r?this._getStackCount(e):t.stackCount,c="flex"===i.barThickness?function(e,t,n,i){const r=t.pixels,s=r[e];let a=e>0?r[e-1]:null,o=e<r.length-1?r[e+1]:null;const l=n.categoryPercentage;null===a&&(a=s-(null===o?t.end-t.start:o-s)),null===o&&(o=s+s-a);const c=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/i,ratio:n.barPercentage,start:c}}(e,t,i,n*l):function(e,t,n,i){const r=n.barThickness;let s,a;return oh(r)?(s=t.min*n.categoryPercentage,a=n.barPercentage):(s=r*i,a=1),{chunk:s/i,ratio:a,start:t.pixels[e]-s/2}}(e,t,i,n*l),u="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,d=this._getAxis().indexOf(hh(u,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0)+d;a=c.start+c.chunk*h+c.chunk/2,o=Math.min(s,c.chunk*c.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(s,t.min*t.ratio);return{base:a-o/2,head:a+o/2,center:a,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,i=n.length;let r=0;for(;r<i;++r)null===this.getParsed(r)[t.axis]||n[r].hidden||n[r].draw(this._ctx)}}o(km,"id","bar"),o(km,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),o(km,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Sm extends pm{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,i){const r=super.parsePrimitiveData(e,t,n,i);for(let s=0;s<r.length;s++)r[s]._custom=this.resolveDataElementOptions(s+n).radius;return r}parseArrayData(e,t,n,i){const r=super.parseArrayData(e,t,n,i);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=hh(e[2],this.resolveDataElementOptions(s+n).radius)}return r}parseObjectData(e,t,n,i){const r=super.parseObjectData(e,t,n,i);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=hh(e&&e.r&&+e.r,this.resolveDataElementOptions(s+n).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,s=this.getParsed(e),a=i.getLabelForValue(s.x),o=r.getLabelForValue(s.y),l=s._custom;return{label:n[e]||"",value:"("+a+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:a}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,i),c=s.axis,u=a.axis;for(let d=t;d<t+n;d++){const t=e[d],n=!r&&this.getParsed(d),h={},f=h[c]=r?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),p=h[u]=r?a.getBasePixel():a.getPixelForValue(n[u]);h.skip=isNaN(f)||isNaN(p),l&&(h.options=o||this.resolveDataElementOptions(d,t.active?"active":i),r&&(h.options.radius=0)),this.updateElement(t,d,h,i)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==t&&(i.radius=0),i.radius+=hh(n&&n._custom,r),i}}o(Sm,"id","bubble"),o(Sm,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),o(Sm,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class Nm extends pm{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,s,a=e=>+n[e];if(ch(n[e])){const{key:e="value"}=this._parsing;a=t=>+Sh(n[t],e)}for(r=e,s=e+t;r<s;++r)i._parsed[r]=a(r)}}_getRotation(){return Bh(this.options.rotation-90)}_getCircumference(){return Bh(this.options.circumference)}_getRotationExtents(){let e=Ph,t=-Ph;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),s=i._getCircumference();e=Math.min(e,r),t=Math.max(t,r+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,i=this._cachedMeta,r=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-s)/2,0),o=Math.min((l=this.options.cutout,c=a,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:g}=function(e,t,n){let i=1,r=1,s=0,a=0;if(t<Ph){const o=e,l=o+t,c=Math.cos(o),u=Math.sin(o),d=Math.cos(l),h=Math.sin(l),f=(e,t,i)=>Qh(e,o,l,!0)?1:Math.max(t,t*n,i,i*n),p=(e,t,i)=>Qh(e,o,l,!0)?-1:Math.min(t,t*n,i,i*n),m=f(0,c,d),g=f(Oh,u,h),v=p(Ih,c,d),y=p(Ih+Oh,u,h);i=(m-v)/2,r=(g-y)/2,s=-(m+v)/2,a=-(g+y)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:a}}(h,d,o),v=(n.width-s)/f,y=(n.height-s)/p,b=Math.max(Math.min(v,y)/2,0),x=fh(this.options.radius,b),_=(x-Math.max(x*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*x,this.offsetY=g*x,i.total=this.calculateTotal(),this.outerRadius=x-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*u,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===i._parsed[e]||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/Ph)}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,a=s.chartArea,o=s.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,u=r&&o.animateScale,d=u?0:this.innerRadius,h=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,i);let m,g=this._getRotation();for(m=0;m<t;++m)g+=this._circumference(m,r);for(m=t;m<t+n;++m){const t=this._circumference(m,r),n=e[m],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:d};p&&(s.options=f||this.resolveDataElementOptions(m,n.active?"active":i)),g+=t,this.updateElement(n,m,s,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,i=0;for(n=0;n<t.length;n++){const r=e._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||t[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Ph*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=wf(t._parsed[e],n.options.locale);return{label:i[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const n=this.chart;let i,r,s,a,o;if(!e)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){s=n.getDatasetMeta(i),e=s.data,a=s.controller;break}if(!e)return 0;for(i=0,r=e.length;i<r;++i)o=a.resolveDataElementOptions(i),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,i=e.length;n<i;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(hh(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}o(Nm,"id","doughnut"),o(Nm,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),o(Nm,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),o(Nm,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:n,textAlign:i,color:r,useBorderRadius:s,borderRadius:a}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((t,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:t,fillStyle:l.backgroundColor,fontColor:r,hidden:!e.getDataVisibility(o),lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:l.borderWidth,strokeStyle:l.borderColor,textAlign:i,pointStyle:n,borderRadius:s&&(a||l.borderRadius),index:o}}):[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class Cm extends pm{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=t,s=this.chart._animationsDisabled;let{start:a,count:o}=uf(t,i,s);this._drawStart=a,this._drawCount=o,df(t)&&(a=0,o=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(i,a,o,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,i),d=s.axis,h=a.axis,{spanGaps:f,segment:p}=this.options,m=Wh(f)?f:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||r||"none"===i,v=t+n,y=e.length;let b=t>0&&this.getParsed(t-1);for(let x=0;x<y;++x){const n=e[x],f=g?n:{};if(x<t||x>=v){f.skip=!0;continue}const y=this.getParsed(x),_=oh(y[h]),w=f[d]=s.getPixelForValue(y[d],x),k=f[h]=r||_?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,y,o):y[h],x);f.skip=isNaN(w)||isNaN(k)||_,f.stop=x>0&&Math.abs(y[d]-b[d])>m,p&&(f.parsed=y,f.raw=l.data[x]),u&&(f.options=c||this.resolveDataElementOptions(x,n.active?"active":i)),g||this.updateElement(n,x,f,i),b=y}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}o(Cm,"id","line"),o(Cm,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),o(Cm,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Tm extends pm{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=wf(t._parsed[e].r,n.options.locale);return{label:i[e]||"",value:r}}parseObjectData(e,t,n,i){return gp.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<t.min&&(t.min=i),i>t.max&&(t.max=i))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(i/2,0),s=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=r-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,a=s.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,u=o.getIndexAngle(0)-.5*Ih;let d,h=u;const f=360/this.countVisibleElements();for(d=0;d<t;++d)h+=this._computeAngle(d,i,f);for(d=t;d<t+n;d++){const t=e[d];let n=h,p=h+this._computeAngle(d,i,f),m=s.getDataVisibility(d)?o.getDistanceFromCenterForValue(this.getParsed(d).r):0;h=p,r&&(a.animateScale&&(m=0),a.animateRotate&&(n=p=u));const g={x:l,y:c,innerRadius:0,outerRadius:m,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(d,t.active?"active":i)};this.updateElement(t,d,g,i)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?Bh(this.resolveDataElementOptions(e,t).angle||n):0}}o(Tm,"id","polarArea"),o(Tm,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),o(Tm,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map((t,r)=>{const s=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Em extends Nm{}o(Em,"id","pie"),o(Em,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Im extends pm{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,i){return gp.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta,n=t.dataset,i=t.data||[],r=t.iScale.getLabels();if(n.points=i,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:r.length===i.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,n,i){const r=this._cachedMeta.rScale,s="reset"===i;for(let a=t;a<t+n;a++){const t=e[a],n=this.resolveDataElementOptions(a,t.active?"active":i),o=r.getPointPositionForValue(a,this.getParsed(a).r),l=s?r.xCenter:o.x,c=s?r.yCenter:o.y,u={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,a,u,i)}}}o(Im,"id","radar"),o(Im,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),o(Im,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Pm extends pm{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,s=this.getParsed(e),a=i.getLabelForValue(s.x),o=r.getLabelForValue(s.y);return{label:n[e]||"",value:"("+a+", "+o+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,i=this.chart._animationsDisabled;let{start:r,count:s}=uf(t,n,i);if(this._drawStart=r,this._drawCount=s,df(t)&&(r=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:s}=t;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=n;const a=this.resolveDatasetElementOptions(e);a.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:a},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,r,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,i),u=this.getSharedOptions(c),d=this.includeOptions(i,u),h=s.axis,f=a.axis,{spanGaps:p,segment:m}=this.options,g=Wh(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||"none"===i;let y=t>0&&this.getParsed(t-1);for(let b=t;b<t+n;++b){const t=e[b],n=this.getParsed(b),c=v?t:{},p=oh(n[f]),x=c[h]=s.getPixelForValue(n[h],b),_=c[f]=r||p?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,n,o):n[f],b);c.skip=isNaN(x)||isNaN(_)||p,c.stop=b>0&&Math.abs(n[h]-y[h])>g,m&&(c.parsed=n,c.raw=l.data[b]),d&&(c.options=u||this.resolveDataElementOptions(b,t.active?"active":i)),v||this.updateElement(t,b,c,i),y=n}this.updateSharedOptions(u,i,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!t.length)return i;const r=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,r,s)/2}}o(Pm,"id","scatter"),o(Pm,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),o(Pm,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function Mm(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class jm{static override(e){Object.assign(jm.prototype,e)}constructor(e){o(this,"options",void 0),this.options=e||{}}init(){}formats(){return Mm()}parse(){return Mm()}format(){return Mm()}add(){return Mm()}diff(){return Mm()}startOf(){return Mm()}endOf(){return Mm()}}var Rm=jm;function Om(e,t,n,i){const{controller:r,data:s,_sorted:a}=e,o=r._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&a&&s.length){const a=o._reversePixels?tf:ef;if(!i){const i=a(s,t,n);if(l){const{vScale:t}=r._cachedMeta,{_parsed:n}=e,s=n.slice(0,i.lo+1).reverse().findIndex(e=>!oh(e[t.axis]));i.lo-=Math.max(0,s);const a=n.slice(i.hi).findIndex(e=>!oh(e[t.axis]));i.hi+=Math.max(0,a)}return i}if(r._sharedOptions){const e=s[0],i="function"===typeof e.getRange&&e.getRange(t);if(i){const e=a(s,t,n-i),r=a(s,t,n+i);return{lo:e.lo,hi:r.hi}}}}return{lo:0,hi:s.length-1}}function Dm(e,t,n,i,r){const s=e.getSortedVisibleDatasetMetas(),a=n[t];for(let o=0,l=s.length;o<l;++o){const{index:e,data:n}=s[o],{lo:l,hi:c}=Om(s[o],t,a,r);for(let t=l;t<=c;++t){const r=n[t];r.skip||i(r,e,t)}}}function Am(e,t,n,i,r){const s=[];if(!r&&!e.isPointInArea(t))return s;return Dm(e,n,t,function(n,a,o){(r||Lf(n,e.chartArea,0))&&n.inRange(t.x,t.y,i)&&s.push({element:n,datasetIndex:a,index:o})},!0),s}function Lm(e,t,n,i,r,s){let a=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,i){const r=t?Math.abs(e.x-i.x):0,s=n?Math.abs(e.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return Dm(e,n,t,function(n,c,u){const d=n.inRange(t.x,t.y,r);if(i&&!d)return;const h=n.getCenterPoint(r);if(!(!!s||e.isPointInArea(h))&&!d)return;const f=o(t,h);f<l?(a=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&a.push({element:n,datasetIndex:c,index:u})}),a}function Fm(e,t,n,i,r,s){return s||e.isPointInArea(t)?"r"!==n||i?Lm(e,t,n,i,r,s):function(e,t,n,i){let r=[];return Dm(e,n,t,function(e,n,s){const{startAngle:a,endAngle:o}=e.getProps(["startAngle","endAngle"],i),{angle:l}=Yh(e,{x:t.x,y:t.y});Qh(l,a,o)&&r.push({element:e,datasetIndex:n,index:s})}),r}(e,t,n,r):[]}function zm(e,t,n,i,r){const s=[],a="x"===n?"inXRange":"inYRange";let o=!1;return Dm(e,n,t,(e,i,l)=>{e[a]&&e[a](t[n],r)&&(s.push({element:e,datasetIndex:i,index:l}),o=o||e.inRange(t.x,t.y,r))}),i&&!o?[]:s}var Um={evaluateInteractionItems:Dm,modes:{index(e,t,n,i){const r=Pp(t,e),s=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?Am(e,r,s,i,a):Fm(e,r,s,!1,i,a),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,i){const r=Pp(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?Am(e,r,s,i,a):Fm(e,r,s,!1,i,a);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,i)=>Am(e,Pp(t,e),n.axis||"xy",i,n.includeInvisible||!1),nearest(e,t,n,i){const r=Pp(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;return Fm(e,r,s,n.intersect,i,a)},x:(e,t,n,i)=>zm(e,Pp(t,e),"x",n.intersect,i),y:(e,t,n,i)=>zm(e,Pp(t,e),"y",n.intersect,i)}};const Wm=["left","top","right","bottom"];function Vm(e,t){return e.filter(e=>e.pos===t)}function Bm(e,t){return e.filter(e=>-1===Wm.indexOf(e.pos)&&e.box.axis===t)}function Hm(e,t){return e.sort((e,n)=>{const i=t?n:e,r=t?e:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function qm(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:i,stackWeight:r}=n;if(!e||!Wm.includes(i))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return t}(e),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,a,o;for(s=0,a=e.length;s<a;++s){o=e[s];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*i:a&&t.availableWidth,o.height=r):(o.width=i,o.height=c?c*r:a&&t.availableHeight)}return n}function Ym(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function Gm(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Km(e,t,n,i){const{pos:r,box:s}=n,a=e.maxPadding;if(!ch(r)){n.size&&(e[r]-=n.size);const t=i[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[r]+=n.size}s.getPadding&&Gm(a,s.getPadding());const o=Math.max(0,t.outerWidth-Ym(a,e,"left","right")),l=Math.max(0,t.outerHeight-Ym(a,e,"top","bottom")),c=o!==e.w,u=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function $m(e,t){const n=t.maxPadding;function i(e){const i={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{i[e]=Math.max(t[e],n[e])}),i}return i(e?["left","right"]:["top","bottom"])}function Qm(e,t,n,i){const r=[];let s,a,o,l,c,u;for(s=0,a=e.length,c=0;s<a;++s){o=e[s],l=o.box,l.update(o.width||t.w,o.height||t.h,$m(o.horizontal,t));const{same:a,other:d}=Km(t,n,o,i);c|=a&&r.length,u=u||d,l.fullSize||r.push(o)}return c&&Qm(r,t,n,i)||u}function Jm(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function Xm(e,t,n,i){const r=n.padding;let{x:s,y:a}=t;for(const o of e){const e=o.box,l=i[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const i=t.w*c,s=l.size||e.height;Ch(l.start)&&(a=l.start),e.fullSize?Jm(e,r.left,a,n.outerWidth-r.right-r.left,s):Jm(e,t.left+l.placed,a,i,s),l.start=a,l.placed+=i,a=e.bottom}else{const i=t.h*c,a=l.size||e.width;Ch(l.start)&&(s=l.start),e.fullSize?Jm(e,s,r.top,a,n.outerHeight-r.bottom-r.top):Jm(e,s,t.top+l.placed,a,i),l.start=s,l.placed+=i,s=e.right}}t.x=s,t.y=a}var Zm={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const r=Zf(e.options.layout.padding),s=Math.max(t-r.width,0),a=Math.max(n-r.height,0),o=function(e){const t=function(e){const t=[];let n,i,r,s,a,o;for(n=0,i=(e||[]).length;n<i;++n)r=e[n],({position:s,options:{stack:a,stackWeight:o=1}}=r),t.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&s+a,stackWeight:o});return t}(e),n=Hm(t.filter(e=>e.box.fullSize),!0),i=Hm(Vm(t,"left"),!0),r=Hm(Vm(t,"right")),s=Hm(Vm(t,"top"),!0),a=Hm(Vm(t,"bottom")),o=Bm(t,"x"),l=Bm(t,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(a).concat(o),chartArea:Vm(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(a).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;mh(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const u=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/u,hBoxMaxHeight:a/2}),h=Object.assign({},r);Gm(h,Zf(i));const f=Object.assign({maxPadding:h,w:s,h:a,x:r.left,y:r.top},r),p=qm(l.concat(c),d);Qm(o.fullSize,f,d,p),Qm(l,f,d,p),Qm(c,f,d,p)&&Qm(l,f,d,p),function(e){const t=e.maxPadding;function n(n){const i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),Xm(o.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,Xm(o.rightAndBottom,f,d,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},mh(o.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class eg{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}isAttached(e){return!0}updateConfig(e){}}class tg extends eg{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ng="$chartjs",ig={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},rg=e=>null===e||""===e;const sg=!!Op&&{passive:!0};function ag(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,sg)}function og(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function lg(e,t,n){const i=e.canvas,r=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||og(n.addedNodes,i),t=t&&!og(n.removedNodes,i);t&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function cg(e,t,n){const i=e.canvas,r=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||og(n.removedNodes,i),t=t&&!og(n.addedNodes,i);t&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const ug=new Map;let dg=0;function hg(){const e=window.devicePixelRatio;e!==dg&&(dg=e,ug.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function fg(e,t,n){const i=e.canvas,r=i&&Np(i);if(!r)return;const s=of((e,t)=>{const i=r.clientWidth;n(e,t),i<r.clientWidth&&n()},window),a=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,i=t.contentRect.height;0===n&&0===i||s(n,i)});return a.observe(r),function(e,t){ug.size||window.addEventListener("resize",hg),ug.set(e,t)}(e,s),a}function pg(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){ug.delete(e),ug.size||window.removeEventListener("resize",hg)}(e)}function mg(e,t,n){const i=e.canvas,r=of(t=>{null!==e.ctx&&n(function(e,t){const n=ig[e.type]||e.type,{x:i,y:r}=Pp(e,t);return{type:n,chart:t,native:e,x:void 0!==i?i:null,y:void 0!==r?r:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,sg)}(i,t,r),r}class gg extends eg{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[ng]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",rg(r)){const t=Dp(e,"width");void 0!==t&&(e.width=t)}if(rg(i))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Dp(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[ng])return!1;const n=t[ng].initial;["height","width"].forEach(e=>{const i=n[e];oh(i)?t.removeAttribute(e):t.setAttribute(e,i)});const i=n.style||{};return Object.keys(i).forEach(e=>{t.style[e]=i[e]}),t.width=t.width,delete t[ng],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),r={attach:lg,detach:cg,resize:fg}[t]||mg;i[t]=r(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),i=n[t];if(!i)return;({attach:pg,detach:pg,resize:pg}[t]||ag)(e,t,i),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,i){return jp(e,t,n,i)}isAttached(e){const t=e&&Np(e);return!(!t||!t.isConnected)}}class vg{constructor(){o(this,"x",void 0),o(this,"y",void 0),o(this,"active",!1),o(this,"options",void 0),o(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return Wh(this.x)&&Wh(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const i={};return e.forEach(e=>{i[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),i}}function yg(e,t){const n=e.options.ticks,i=function(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}(e),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?function(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}(t):[],a=s.length,o=s[0],l=s[a-1],c=[];if(a>r)return function(e,t,n,i){let r,s=0,a=n[0];for(i=Math.ceil(i),r=0;r<e.length;r++)r===a&&(t.push(e[r]),s++,a=n[s*i])}(t,c,s,a/r),c;const u=function(e,t,n){const i=function(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}(e),r=t.length/n;if(!i)return Math.max(r,1);const s=function(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(i);for(let a=0,o=s.length-1;a<o;a++){const e=s[a];if(e>r)return e}return Math.max(r,1)}(s,t,r);if(a>0){let e,n;const i=a>1?Math.round((l-o)/(a-1)):null;for(bg(t,c,u,oh(i)?0:o-i,o),e=0,n=a-1;e<n;e++)bg(t,c,u,s[e],s[e+1]);return bg(t,c,u,l,oh(i)?t.length:l+i),c}return bg(t,c,u),c}function bg(e,t,n,i,r){const s=hh(i,0),a=Math.min(hh(r,e.length),e.length);let o,l,c,u=0;for(n=Math.ceil(n),r&&(o=r-i,n=o/Math.floor(o/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<a;l++)l===c&&(t.push(e[l]),u++,c=Math.round(s+u*n))}o(vg,"defaults",{}),o(vg,"defaultRoutes",void 0);const xg=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,_g=(e,t)=>Math.min(t||e,e);function wg(e,t){const n=[],i=e.length/t,r=e.length;let s=0;for(;s<r;s+=i)n.push(e[Math.floor(s)]);return n}function kg(e,t,n){const i=e.ticks.length,r=Math.min(t,i-1),s=e._startPixel,a=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(r);if(!(n&&(l=1===i?Math.max(c-s,a-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(r-1))/2,c+=r<t?l:-l,c<s-o||c>a+o)))return c}function Sg(e){return e.drawTicks?e.tickLength:0}function Ng(e,t){if(!e.display)return 0;const n=ep(e.font,t),i=Zf(e.padding);return(lh(e.text)?e.text.length:1)*n.lineHeight+i.height}function Cg(e,t,n){let i=lf(e);return(n&&"right"!==t||!n&&"right"===t)&&(i=(e=>"left"===e?"right":"right"===e?"left":e)(i)),i}class Tg extends vg{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:i}=this;return e=dh(e,Number.POSITIVE_INFINITY),t=dh(t,Number.NEGATIVE_INFINITY),n=dh(n,Number.POSITIVE_INFINITY),i=dh(i,Number.NEGATIVE_INFINITY),{min:dh(e,n),max:dh(t,i),minDefined:uh(e),maxDefined:uh(t)}}getMinMax(e){let t,{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)t=a[o].controller.getMinMax(this,e),r||(n=Math.min(n,t.min)),s||(i=Math.max(i,t.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:dh(n,dh(i,n)),max:dh(i,dh(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ph(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:i,grace:r,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:i,max:r}=e,s=fh(t,(r-i)/2),a=(e,t)=>n&&0===e?0:e+t;return{min:a(i,-Math.abs(s)),max:a(r,s)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?wg(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=yg(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ph(this.options.afterUpdate,[this])}beforeSetDimensions(){ph(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ph(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ph(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ph(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,i,r;for(n=0,i=e.length;n<i;n++)r=e[n],r.label=ph(t.callback,[r.value,n,e],this)}afterTickToLabelConversion(){ph(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ph(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=_g(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,r=t.maxRotation;let s,a,o,l=i;if(!this._isVisible()||!t.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=Jh(this.chart.width-u,0,this.maxWidth);s=e.offset?this.maxWidth/n:h/(n-1),u+6>s&&(s=h/(n-(e.offset?.5:1)),a=this.maxHeight-Sg(e.grid)-t.padding-Ng(e.title,this.chart.options.font),o=Math.sqrt(u*u+d*d),l=Hh(Math.min(Math.asin(Jh((c.highest.height+6)/s,-1,1)),Math.asin(Jh(a/o,-1,1))-Math.asin(Jh(d/o,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){ph(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ph(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:i,grid:r}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){const s=Ng(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=Sg(r)+s):(e.height=this.maxHeight,e.width=Sg(r)+s),n.display&&this.ticks.length){const{first:t,last:i,widest:r,highest:s}=this._getLabelSizes(),o=2*n.padding,l=Bh(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(a){const t=n.mirror?0:u*r.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*r.width+u*s.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,i,u,c)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,i){const{ticks:{align:r,padding:s},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;o?l?(u=i*e.width,d=n*t.height):(u=n*e.height,d=i*t.width):"start"===r?d=t.width:"end"===r?u=e.width:"inner"!==r&&(u=e.width/2,d=t.width/2),this.paddingLeft=Math.max((u-a+s)*this.width/(this.width-a),0),this.paddingRight=Math.max((d-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,i=e.height/2;"start"===r?(n=0,i=e.height):"end"===r&&(n=t.height,i=0),this.paddingTop=n+s,this.paddingBottom=i+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ph(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)oh(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=wg(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:i,_longestTextCache:r}=this,s=[],a=[],o=Math.floor(t/_g(t,n));let l,c,u,d,h,f,p,m,g,v,y,b=0,x=0;for(l=0;l<t;l+=o){if(d=e[l].label,h=this._resolveTickFontOptions(l),i.font=f=h.string,p=r[f]=r[f]||{data:{},gc:[]},m=h.lineHeight,g=v=0,oh(d)||lh(d)){if(lh(d))for(c=0,u=d.length;c<u;++c)y=d[c],oh(y)||lh(y)||(g=Mf(i,p.data,p.gc,g,y),v+=m)}else g=Mf(i,p.data,p.gc,g,d),v=m;s.push(g),a.push(v),b=Math.max(g,b),x=Math.max(v,x)}!function(e,t){mh(e,e=>{const n=e.gc,i=n.length/2;let r;if(i>t){for(r=0;r<i;++r)delete e.data[n[r]];n.splice(0,i)}})}(r,t);const _=s.indexOf(b),w=a.indexOf(x),k=e=>({width:s[e]||0,height:a[e]||0});return{first:k(0),last:k(t-1),widest:k(_),highest:k(w),widths:s,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Jh(this._alignToPixels?Rf(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return np(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=np(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=Bh(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),s=e.autoSkipPadding||0,a=r?r.widest.width+s:0,o=r?r.highest.height+s:0;return this.isHorizontal()?o*n>a*i?a/n:o/i:o*i<a*n?o/n:a/i}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,i=this.options,{grid:r,position:s,border:a}=i,o=r.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),u=Sg(r),d=[],h=a.setContext(this.getContext()),f=h.display?h.width:0,p=f/2,m=function(e){return Rf(n,e,f)};let g,v,y,b,x,_,w,k,S,N,C,T;if("top"===s)g=m(this.bottom),_=this.bottom-u,k=g-p,N=m(e.top)+p,T=e.bottom;else if("bottom"===s)g=m(this.top),N=e.top,T=m(e.bottom)-p,_=g+p,k=this.top+u;else if("left"===s)g=m(this.right),x=this.right-u,w=g-p,S=m(e.left)+p,C=e.right;else if("right"===s)g=m(this.left),S=e.left,C=m(e.right)-p,x=g+p,w=this.left+u;else if("x"===t){if("center"===s)g=m((e.top+e.bottom)/2+.5);else if(ch(s)){const e=Object.keys(s)[0],t=s[e];g=m(this.chart.scales[e].getPixelForValue(t))}N=e.top,T=e.bottom,_=g+p,k=_+u}else if("y"===t){if("center"===s)g=m((e.left+e.right)/2);else if(ch(s)){const e=Object.keys(s)[0],t=s[e];g=m(this.chart.scales[e].getPixelForValue(t))}x=g-p,w=x-u,S=e.left,C=e.right}const E=hh(i.ticks.maxTicksLimit,c),I=Math.max(1,Math.ceil(c/E));for(v=0;v<c;v+=I){const e=this.getContext(v),t=r.setContext(e),i=a.setContext(e),s=t.lineWidth,c=t.color,u=i.dash||[],h=i.dashOffset,f=t.tickWidth,p=t.tickColor,m=t.tickBorderDash||[],g=t.tickBorderDashOffset;y=kg(this,v,o),void 0!==y&&(b=Rf(n,y,s),l?x=w=S=C=b:_=k=N=T=b,d.push({tx1:x,ty1:_,tx2:w,ty2:k,x1:S,y1:N,x2:C,y2:T,width:s,color:c,borderDash:u,borderDashOffset:h,tickWidth:f,tickColor:p,tickBorderDash:m,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,d}_computeLabelItems(e){const t=this.axis,n=this.options,{position:i,ticks:r}=n,s=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:u}=r,d=Sg(n.grid),h=d+c,f=u?-c:h,p=-Bh(this.labelRotation),m=[];let g,v,y,b,x,_,w,k,S,N,C,T,E="middle";if("top"===i)_=this.bottom-f,w=this._getXAxisLabelAlignment();else if("bottom"===i)_=this.top+f,w=this._getXAxisLabelAlignment();else if("left"===i){const e=this._getYAxisLabelAlignment(d);w=e.textAlign,x=e.x}else if("right"===i){const e=this._getYAxisLabelAlignment(d);w=e.textAlign,x=e.x}else if("x"===t){if("center"===i)_=(e.top+e.bottom)/2+h;else if(ch(i)){const e=Object.keys(i)[0],t=i[e];_=this.chart.scales[e].getPixelForValue(t)+h}w=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)x=(e.left+e.right)/2-h;else if(ch(i)){const e=Object.keys(i)[0],t=i[e];x=this.chart.scales[e].getPixelForValue(t)}w=this._getYAxisLabelAlignment(d).textAlign}"y"===t&&("start"===o?E="top":"end"===o&&(E="bottom"));const I=this._getLabelSizes();for(g=0,v=a.length;g<v;++g){y=a[g],b=y.label;const e=r.setContext(this.getContext(g));k=this.getPixelForTick(g)+r.labelOffset,S=this._resolveTickFontOptions(g),N=S.lineHeight,C=lh(b)?b.length:1;const t=C/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let d,h=w;if(s?(x=k,"inner"===w&&(h=g===v-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),T="top"===i?"near"===l||0!==p?-C*N+N/2:"center"===l?-I.highest.height/2-t*N+N:-I.highest.height+N/2:"near"===l||0!==p?N/2:"center"===l?I.highest.height/2-t*N:I.highest.height-C*N,u&&(T*=-1),0===p||e.showLabelBackdrop||(x+=N/2*Math.sin(p))):(_=k,T=(1-C)*N/2),e.showLabelBackdrop){const t=Zf(e.backdropPadding),n=I.heights[g],i=I.widths[g];let r=T-t.top,s=0-t.left;switch(E){case"middle":r-=n/2;break;case"bottom":r-=n}switch(w){case"center":s-=i/2;break;case"right":s-=i;break;case"inner":g===v-1?s-=i:g>0&&(s-=i/2)}d={left:s,top:r,width:i+t.width,height:n+t.height,color:e.backdropColor}}m.push({label:b,font:S,textOffset:T,options:{rotation:p,color:n,strokeColor:o,strokeWidth:c,textAlign:h,textBaseline:E,translation:[x,_],backdrop:d}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Bh(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,s=e+r,a=this._getLabelSizes().widest.width;let o,l;return"left"===t?i?(l=this.right+r,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-s,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===t?i?(l=this.left+r,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+s,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:i,width:r,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,r,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,s;const a=(e,t,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(r=0,s=i.length;r<s;++r){const e=i[r];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),s=n.display?r.width:0;if(!s)return;const a=i.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,u,d;this.isHorizontal()?(l=Rf(e,this.left,s)-s/2,c=Rf(e,this.right,a)+a/2,u=d=o):(u=Rf(e,this.top,s)-s/2,d=Rf(e,this.bottom,a)+a/2,l=c=o),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&Ff(t,n);const i=this.getLabelItems(e);for(const r of i){const e=r.options,n=r.font;Hf(t,r.label,0,r.textOffset,n,e)}n&&zf(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:i}}=this;if(!n.display)return;const r=ep(n.font),s=Zf(n.padding),a=n.align;let o=r.lineHeight/2;"bottom"===t||"center"===t||ch(t)?(o+=s.bottom,lh(n.text)&&(o+=r.lineHeight*(n.text.length-1))):o+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=function(e,t,n,i){const{top:r,left:s,bottom:a,right:o,chart:l}=e,{chartArea:c,scales:u}=l;let d,h,f,p=0;const m=a-r,g=o-s;if(e.isHorizontal()){if(h=cf(i,s,o),ch(n)){const e=Object.keys(n)[0],i=n[e];f=u[e].getPixelForValue(i)+m-t}else f="center"===n?(c.bottom+c.top)/2+m-t:xg(e,n,t);d=o-s}else{if(ch(n)){const e=Object.keys(n)[0],i=n[e];h=u[e].getPixelForValue(i)-g+t}else h="center"===n?(c.left+c.right)/2-g+t:xg(e,n,t);f=cf(i,a,r),p="left"===n?-Oh:Oh}return{titleX:h,titleY:f,maxWidth:d,rotation:p}}(this,o,t,a);Hf(e,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:d,textAlign:Cg(a,t,i),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=hh(e.grid&&e.grid.z,-1),i=hh(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Tg.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,s;for(r=0,s=t.length;r<s;++r){const s=t[r];s[n]!==this.id||e&&s.type!==e||i.push(s)}return i}_resolveTickFontOptions(e){return ep(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Eg{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const i=this.items,r=e.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,function(e,t,n){const i=xh(Object.create(null),[n?Pf.get(n):{},Pf.get(t),e.defaults]);Pf.set(t,i),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),r=i.pop(),s=[e].concat(i).join("."),a=t[n].split("."),o=a.pop(),l=a.join(".");Pf.route(s,r,l,o)})}(t,e.defaultRoutes);e.descriptors&&Pf.describe(t,e.descriptors)}(e,s,n),this.override&&Pf.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in Pf[i]&&(delete Pf[i][n],this.override&&delete Nf[n])}}class Ig{constructor(){this.controllers=new Eg(pm,"datasets",!0),this.elements=new Eg(vg,"elements"),this.plugins=new Eg(Object,"plugins"),this.scales=new Eg(Tg,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach(t=>{const i=n||this._getRegistryForType(t);n||i.isForType(t)||i===this.plugins&&t.id?this._exec(e,i,t):mh(t,t=>{const i=n||this._getRegistryForType(t);this._exec(e,i,t)})})}_exec(e,t,n){const i=Nh(e);ph(n["before"+i],[],n),t[e](n),ph(n["after"+i],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var Pg=new Ig;class Mg{constructor(){this._init=void 0}notify(e,t,n,i){if("beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),void 0===this._init)return;const r=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(r,e,t,n);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),s}_notify(e,t,n,i){i=i||{};for(const r of e){const e=r.plugin;if(!1===ph(e[n],[t,i,r.options],e)&&i.cancelable)return!1}return!0}invalidate(){oh(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,i=hh(n.options&&n.options.plugins,{}),r=function(e){const t={},n=[],i=Object.keys(Pg.plugins.items);for(let s=0;s<i.length;s++)n.push(Pg.getPlugin(i[s]));const r=e.plugins||[];for(let s=0;s<r.length;s++){const e=r[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==i||t?function(e,t,n,i){let{plugins:r,localIds:s}=t;const a=[],o=e.getContext();for(const l of r){const t=l.id,r=jg(n[t],i);null!==r&&a.push({plugin:l,options:Rg(e.config,{plugin:l,local:s[t]},r,o)})}return a}(e,r,i,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,i=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}}function jg(e,t){return t||!1!==e?!0===e?{}:e:null}function Rg(e,t,n,i){let{plugin:r,local:s}=t;const a=e.pluginScopeKeys(r),o=e.getOptionScopes(n,a);return s&&r.defaults&&o.push(r.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Og(e,t){const n=Pf.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Dg(e){if("x"===e||"y"===e||"r"===e)return e}function Ag(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function Lg(e){if(Dg(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n){const t=r.axis||Ag(r.position)||e.length>1&&Dg(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function Fg(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function zg(e,t){const n=Nf[e.type]||{scales:{}},i=t.scales||{},r=Og(e.type,t),s=Object.create(null);return Object.keys(i).forEach(t=>{const a=i[t];if(!ch(a))return console.error("Invalid scale configuration for scale: ".concat(t));if(a._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const o=Lg(t,a,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return Fg(e,"x",n[0])||Fg(e,"y",n[0])}return{}}(t,e),Pf.scales[a.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,r),c=n.scales||{};s[t]=_h(Object.create(null),[{axis:o},a,c[o],c[l]])}),e.data.datasets.forEach(n=>{const r=n.type||e.type,a=n.indexAxis||Og(r,t),o=(Nf[r]||{}).scales||{};Object.keys(o).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),r=n[t+"AxisID"]||t;s[r]=s[r]||Object.create(null),_h(s[r],[{axis:t},i[r],o[e]])})}),Object.keys(s).forEach(e=>{const t=s[e];_h(t,[Pf.scales[t.type],Pf.scale])}),s}function Ug(e){const t=e.options||(e.options={});t.plugins=hh(t.plugins,{}),t.scales=zg(e,t)}function Wg(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const Vg=new Map,Bg=new Set;function Hg(e,t){let n=Vg.get(e);return n||(n=t(),Vg.set(e,n),Bg.add(n)),n}const qg=(e,t,n)=>{const i=Sh(t,n);void 0!==i&&e.add(i)};class Yg{constructor(e){this._config=function(e){return(e=e||{}).data=Wg(e.data),Ug(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Wg(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Ug(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Hg(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return Hg("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return Hg("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return Hg("".concat(n,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let i=n.get(e);return i&&!t||(i=new Map,n.set(e,i)),i}getOptionScopes(e,t,n){const{options:i,type:r}=this,s=this._cachedScopes(e,n),a=s.get(t);if(a)return a;const o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>qg(o,e,t))),t.forEach(e=>qg(o,i,e)),t.forEach(e=>qg(o,Nf[r]||{},e)),t.forEach(e=>qg(o,Pf,e)),t.forEach(e=>qg(o,Cf,e))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),Bg.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,Nf[t]||{},Pf.datasets[t]||{},{type:t},Pf,Cf]}resolveNamedOptions(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const r={$shared:!0},{resolver:s,subPrefixes:a}=Gg(this._resolverCache,e,i);let o=s;if(function(e,t){const{isScriptable:n,isIndexable:i}=sp(e);for(const r of t){const t=n(r),s=i(r),a=(s||t)&&e[r];if(t&&(Th(a)||Kg(a))||s&&lh(a))return!0}return!1}(s,t)){r.$shared=!1;o=rp(s,n=Th(n)?n():n,this.createResolver(e,n,a))}for(const l of t)r[l]=o[l];return r}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0;const{resolver:r}=Gg(this._resolverCache,e,n);return ch(t)?rp(r,t,void 0,i):r}}function Gg(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const r=n.join();let s=i.get(r);if(!s){s={resolver:ip(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},i.set(r,s)}return s}const Kg=e=>ch(e)&&Object.getOwnPropertyNames(e).some(t=>Th(e[t]));const $g=["top","bottom","left","right","chartArea"];function Qg(e,t){return"top"===e||"bottom"===e||-1===$g.indexOf(e)&&"x"===t}function Jg(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function Xg(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),ph(n&&n.onComplete,[e],t)}function Zg(e){const t=e.chart,n=t.options.animation;ph(n&&n.onProgress,[e],t)}function ev(e){return Sp()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const tv={},nv=e=>{const t=ev(e);return Object.values(tv).filter(e=>e.canvas===t).pop()};function iv(e,t,n){const i=Object.keys(e);for(const r of i){const i=+r;if(i>=t){const s=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=s)}}}class rv{static register(){Pg.add(...arguments),sv()}static unregister(){Pg.remove(...arguments),sv()}constructor(e,t){const n=this.config=new Yg(t),i=ev(e),r=nv(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!Sp()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?tg:gg}(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,s.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=ah(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Mg,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}(e=>this.update(e),s.resizeDelay||0),this._dataChanges=[],tv[this.id]=this,a&&o?(Xp.listen(this,"complete",Xg),Xp.listen(this,"progress",Zg),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:i,_aspectRatio:r}=this;return oh(e)?t&&r?r:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Pg}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Rp(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Of(this.canvas,this.ctx),this}stop(){return Xp.stop(this),this}resize(e,t){Xp.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,e,t,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,Rp(this,a,!0)&&(this.notifyPlugins("resize",{size:s}),ph(n.onResize,[this,s],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){mh(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,i=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let r=[];t&&(r=r.concat(Object.keys(t).map(e=>{const n=t[e],i=Lg(e,n),r="r"===i,s="x"===i;return{options:n,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}}))),mh(r,t=>{const r=t.options,s=r.id,a=Lg(s,r),o=hh(r.type,t.dtype);void 0!==r.position&&Qg(r.position,a)===Qg(t.dposition)||(r.position=t.dposition),i[s]=!0;let l=null;if(s in n&&n[s].type===o)l=n[s];else{l=new(Pg.getScale(o))({id:s,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,e)}),mh(i,(e,t)=>{e||delete n[t]}),mh(n,e=>{Zm.configure(this,e,e.options),Zm.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(Jg("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=t.length;n<i;n++){const i=t[n];let r=this.getDatasetMeta(n);const s=i.type||this.config.type;if(r.type&&r.type!==s&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=s,r.indexAxis=i.indexAxis||Og(s,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const t=Pg.getController(s),{datasetElementType:i,dataElementType:a}=Pf.datasets[s];Object.assign(t,{dataElementType:Pg.getElement(a),datasetElementType:i&&Pg.getElement(i)}),r.controller=new t(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){mh(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!i&&-1===r.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||mh(r,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Jg("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){mh(this.scales,e=>{Zm.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Eh(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of t){iv(e,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),i=n(0);for(let r=1;r<t;r++)if(!Eh(i,n(r)))return;return Array.from(i).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Zm.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],mh(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Th(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Xp.has(this)?this.attached&&!Xp.running(this)&&Xp.start(this):(this.draw(),Xg({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let i,r;for(i=0,r=t.length;i<r;++i){const r=t[i];e&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=Qp(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(i&&Ff(t,i),e.controller.draw(),i&&zf(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Lf(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,i){const r=Um.modes[t];return"function"===typeof r?r(this,e,n,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let i=n.filter(e=>e&&e._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=np(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const i=n?"show":"hide",r=this.getDatasetMeta(e),s=r.controller._resolveAnimations(void 0,i);Ch(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(r,{visible:n}),this.update(t=>t.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Xp.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Of(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete tv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};mh(this.options.events,e=>n(e,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(n,i)=>{e[n]&&(t.removeEventListener(this,n,i),delete e[n])},r=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",s)};s=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():s()}unbindEvents(){mh(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},mh(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const i=n?"set":"remove";let r,s,a,o;for("dataset"===t&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,o=e.length;a<o;++a){s=e[a];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(e=>{let{datasetIndex:t,index:n}=e;const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[n],index:n}});!gh(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const i=this.options.hover,r=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),s=r(t,e),a=n?e:r(e,t);s.length&&this.updateHoverStyle(s,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:i=[],options:r}=this,s=t,a=this._getActiveElements(e,i,n,s),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,i){return n&&"mouseout"!==e.type?i?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,ph(r.onHover,[e,a,this],this),o&&ph(r.onClick,[e,a,this],this));const c=!gh(a,i);return(c||t)&&(this._active=a,this._updateHoverStyles(a,i,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,i){if("mouseout"===e.type)return[];if(!n)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}}function sv(){return mh(rv.instances,e=>e._plugins.invalidate())}function av(e,t,n,i){const r=Qf(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-t)/2,a=Math.min(s,i*t/2),o=e=>{const t=(n-Math.min(s,e))*i/2;return Jh(e,0,Math.min(s,t))};return{outerStart:o(r.outerStart),outerEnd:o(r.outerEnd),innerStart:Jh(r.innerStart,0,a),innerEnd:Jh(r.innerEnd,0,a)}}function ov(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function lv(e,t,n,i,r,s){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+i+n-c,0),h=u>0?u+i+n+c:0;let f=0;const p=r-l;if(i){const e=((u>0?u-i:0)+(d>0?d-i:0))/2;f=(p-(0!==e?p*e/(e+i):p))/2}const m=(p-Math.max(.001,p*d-n/Ih)/d)/2,g=l+m+f,v=r-m-f,{outerStart:y,outerEnd:b,innerStart:x,innerEnd:_}=av(t,h,d,v-g),w=d-y,k=d-b,S=g+y/w,N=v-b/k,C=h+x,T=h+_,E=g+x/C,I=v-_/T;if(e.beginPath(),s){const t=(S+N)/2;if(e.arc(a,o,d,S,t),e.arc(a,o,d,t,N),b>0){const t=ov(k,N,a,o);e.arc(t.x,t.y,b,N,v+Oh)}const n=ov(T,v,a,o);if(e.lineTo(n.x,n.y),_>0){const t=ov(T,I,a,o);e.arc(t.x,t.y,_,v+Oh,I+Math.PI)}const i=(v-_/h+(g+x/h))/2;if(e.arc(a,o,h,v-_/h,i,!0),e.arc(a,o,h,i,g+x/h,!0),x>0){const t=ov(C,E,a,o);e.arc(t.x,t.y,x,E+Math.PI,g-Oh)}const r=ov(w,g,a,o);if(e.lineTo(r.x,r.y),y>0){const t=ov(w,S,a,o);e.arc(t.x,t.y,y,g-Oh,S)}}else{e.moveTo(a,o);const t=Math.cos(S)*d+a,n=Math.sin(S)*d+o;e.lineTo(t,n);const i=Math.cos(N)*d+a,r=Math.sin(N)*d+o;e.lineTo(i,r)}e.closePath()}function cv(e,t,n,i,r){const{fullCircles:s,startAngle:a,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h,borderRadius:f}=l,p="inner"===l.borderAlign;if(!c)return;e.setLineDash(d||[]),e.lineDashOffset=h,p?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let m=t.endAngle;if(s){lv(e,t,n,i,m,r);for(let t=0;t<s;++t)e.stroke();isNaN(o)||(m=a+(o%Ph||Ph))}p&&function(e,t,n){const{startAngle:i,pixelMargin:r,x:s,y:a,outerRadius:o,innerRadius:l}=t;let c=r/o;e.beginPath(),e.arc(s,a,o,i-c,n+c),l>r?(c=r/l,e.arc(s,a,l,n+c,i-c,!0)):e.arc(s,a,r,n+Oh,i-Oh),e.closePath(),e.clip()}(e,t,m),l.selfJoin&&m-a>=Ih&&0===f&&"miter"!==u&&function(e,t,n){const{startAngle:i,x:r,y:s,outerRadius:a,innerRadius:o,options:l}=t,{borderWidth:c,borderJoinStyle:u}=l,d=Math.min(c/a,$h(i-n));if(e.beginPath(),e.arc(r,s,a-c/2,i+d/2,n-d/2),o>0){const t=Math.min(c/o,$h(i-n));e.arc(r,s,o+c/2,n-t/2,i+t/2,!0)}else{const t=Math.min(c/2,a*$h(i-n));if("round"===u)e.arc(r,s,t,n-Ih/2,i+Ih/2,!0);else if("bevel"===u){const a=2*t*t,o=-a*Math.cos(n+Ih/2)+r,l=-a*Math.sin(n+Ih/2)+s,c=a*Math.cos(i+Ih/2)+r,u=a*Math.sin(i+Ih/2)+s;e.lineTo(o,l),e.lineTo(c,u)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,m),s||(lv(e,t,n,i,m,r),e.stroke())}o(rv,"defaults",Pf),o(rv,"instances",tv),o(rv,"overrides",Nf),o(rv,"registry",Pg),o(rv,"version","4.5.1"),o(rv,"getChart",nv);class uv extends vg{constructor(e){super(),o(this,"circumference",void 0),o(this,"endAngle",void 0),o(this,"fullCircles",void 0),o(this,"innerRadius",void 0),o(this,"outerRadius",void 0),o(this,"pixelMargin",void 0),o(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.getProps(["x","y"],n),{angle:r,distance:s}=Yh(i,{x:e,y:t}),{startAngle:a,endAngle:o,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=(this.options.spacing+this.options.borderWidth)/2,h=hh(u,o-a),f=Qh(r,a,o)&&a!==o,p=h>=Ph||f,m=Xh(s,l+d,c+d);return p&&m}getCenterPoint(e){const{x:t,y:n,startAngle:i,endAngle:r,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(i+r)/2,u=(s+a+l+o)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,i=(t.offset||0)/4,r=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>Ph?Math.floor(n/Ph):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*i,Math.sin(a)*i);const o=i*(1-Math.sin(Math.min(Ih,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,i,r){const{fullCircles:s,startAngle:a,circumference:o}=t;let l=t.endAngle;if(s){lv(e,t,n,i,l,r);for(let t=0;t<s;++t)e.fill();isNaN(o)||(l=a+(o%Ph||Ph))}lv(e,t,n,i,l,r),e.fill()}(e,this,o,r,s),cv(e,this,o,r,s),e.restore()}}function dv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=hh(n.borderCapStyle,t.borderCapStyle),e.setLineDash(hh(n.borderDash,t.borderDash)),e.lineDashOffset=hh(n.borderDashOffset,t.borderDashOffset),e.lineJoin=hh(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=hh(n.borderWidth,t.borderWidth),e.strokeStyle=hh(n.borderColor,t.borderColor)}function hv(e,t,n){e.lineTo(n.x,n.y)}function fv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length,{start:r=0,end:s=i-1}=n,{start:a,end:o}=t,l=Math.max(r,a),c=Math.min(s,o),u=r<a&&s<a||r>o&&s>o;return{count:i,start:l,loop:t.loop,ilen:c<l&&!u?i+c-l:c-l}}function pv(e,t,n,i){const{points:r,options:s}=t,{count:a,start:o,loop:l,ilen:c}=fv(r,n,i),u=function(e){return e.stepped?Uf:e.tension||"monotone"===e.cubicInterpolationMode?Wf:hv}(s);let d,h,f,{move:p=!0,reverse:m}=i||{};for(d=0;d<=c;++d)h=r[(o+(m?c-d:d))%a],h.skip||(p?(e.moveTo(h.x,h.y),p=!1):u(e,f,h,m,s.stepped),f=h);return l&&(h=r[(o+(m?c:0))%a],u(e,f,h,m,s.stepped)),!!l}function mv(e,t,n,i){const r=t.points,{count:s,start:a,ilen:o}=fv(r,n,i),{move:l=!0,reverse:c}=i||{};let u,d,h,f,p,m,g=0,v=0;const y=e=>(a+(c?o-e:e))%s,b=()=>{f!==p&&(e.lineTo(g,p),e.lineTo(g,f),e.lineTo(g,m))};for(l&&(d=r[y(0)],e.moveTo(d.x,d.y)),u=0;u<=o;++u){if(d=r[y(u)],d.skip)continue;const t=d.x,n=d.y,i=0|t;i===h?(n<f?f=n:n>p&&(p=n),g=(v*g+t)/++v):(b(),e.lineTo(t,n),h=i,v=0,f=p=n),m=n}b()}function gv(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?mv:pv}o(uv,"id","arc"),o(uv,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),o(uv,"defaultRoutes",{backgroundColor:"backgroundColor"}),o(uv,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const vv="function"===typeof Path2D;function yv(e,t,n,i){vv&&!t.options.segment?function(e,t,n,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,i)&&r.closePath()),dv(e,t.options),e.stroke(r)}(e,t,n,i):function(e,t,n,i){const{segments:r,options:s}=t,a=gv(t);for(const o of r)dv(e,s,o.style),e.beginPath(),a(e,t,o,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}(e,t,n,i)}class bv extends vg{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;kp(this._points,n,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,i=e.options.spanGaps,r=n.length;if(!r)return[];const s=!!e._loop,{start:a,end:o}=function(e,t,n,i){let r=0,s=t-1;if(n&&!i)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(s+=r);s>r&&e[s%t].skip;)s--;return s%=t,{start:r,end:s}}(n,r,s,i);return Yp(e,!0===i?[{start:a,end:o,loop:s}]:function(e,t,n,i){const r=e.length,s=[];let a,o=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%r];n.skip||n.stop?l.skip||(i=!1,s.push({start:t%r,end:(a-1)%r,loop:i}),t=o=n.stop?a:null):(o=a,l.skip&&(t=a)),l=n}return null!==o&&s.push({start:t%r,end:o%r,loop:i}),s}(n,a,o<a?o+r:o,!!e._fullLoop&&0===a&&o===r-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,i=e[t],r=this.points,s=qp(this,{property:t,start:i,end:i});if(!s.length)return;const a=[],o=function(e){return e.stepped?Lp:e.tension||"monotone"===e.cubicInterpolationMode?Fp:Ap}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],d=r[c],h=r[u];if(d===h){a.push(d);continue}const f=o(d,h,Math.abs((i-d[t])/(h[t]-d[t])),n.stepped);f[t]=e[t],a.push(f)}return 1===a.length?a[0]:a}pathSegment(e,t,n){return gv(this)(e,this,t,n)}path(e,t,n){const i=this.segments,r=gv(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const a of i)s&=r(e,this,a,{start:t,end:t+n-1});return!!s}draw(e,t,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),yv(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function xv(e,t,n,i){const r=e.options,{[n]:s}=e.getProps([n],i);return Math.abs(t-s)<r.radius+r.hitRadius}o(bv,"id","line"),o(bv,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),o(bv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),o(bv,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class _v extends vg{constructor(e){super(),o(this,"parsed",void 0),o(this,"skip",void 0),o(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.options,{x:r,y:s}=this.getProps(["x","y"],n);return Math.pow(e-r,2)+Math.pow(t-s,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return xv(this,e,"x",t)}inYRange(e,t){return xv(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!Lf(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Df(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function wv(e,t){const{x:n,y:i,base:r,width:s,height:a}=e.getProps(["x","y","base","width","height"],t);let o,l,c,u,d;return e.horizontal?(d=a/2,o=Math.min(n,r),l=Math.max(n,r),c=i-d,u=i+d):(d=s/2,o=n-d,l=n+d,c=Math.min(i,r),u=Math.max(i,r)),{left:o,top:c,right:l,bottom:u}}function kv(e,t,n,i){return e?0:Jh(t,n,i)}function Sv(e){const t=wv(e),n=t.right-t.left,i=t.bottom-t.top,r=function(e,t,n){const i=e.options.borderWidth,r=e.borderSkipped,s=Jf(i);return{t:kv(r.top,s.top,0,n),r:kv(r.right,s.right,0,t),b:kv(r.bottom,s.bottom,0,n),l:kv(r.left,s.left,0,t)}}(e,n/2,i/2),s=function(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,s=Xf(r),a=Math.min(t,n),o=e.borderSkipped,l=i||ch(r);return{topLeft:kv(!l||o.top||o.left,s.topLeft,0,a),topRight:kv(!l||o.top||o.right,s.topRight,0,a),bottomLeft:kv(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:kv(!l||o.bottom||o.right,s.bottomRight,0,a)}}(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function Nv(e,t,n,i){const r=null===t,s=null===n,a=e&&!(r&&s)&&wv(e,i);return a&&(r||Xh(t,a.left,a.right))&&(s||Xh(n,a.top,a.bottom))}function Cv(e,t){e.rect(t.x,t.y,t.w,t.h)}function Tv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-i,a=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+i,y:e.y+r,w:e.w+s,h:e.h+a,radius:e.radius}}o(_v,"id","point"),o(_v,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),o(_v,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class Ev extends vg{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:s}=Sv(this),a=(o=s.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?qf:Cv;var o;e.save(),s.w===r.w&&s.h===r.h||(e.beginPath(),a(e,Tv(s,t,r)),e.clip(),a(e,Tv(r,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,Tv(r,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,n){return Nv(this,e,t,n)}inXRange(e,t){return Nv(this,e,null,t)}inYRange(e,t){return Nv(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+i)/2:t,y:r?n:(n+i)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}o(Ev,"id","bar"),o(Ev,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),o(Ev,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Iv=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}};class Pv extends vg{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=ph(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,i=ep(n.font),r=i.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=Iv(n,r);let l,c;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,r,a,o)+10):(c=this.maxHeight,l=this._fitCols(s,i,a,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,i){const{ctx:r,maxWidth:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+a;let u=e;r.textAlign="left",r.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach((e,f)=>{const p=n+t/2+r.measureText(e.text).width;(0===f||l[l.length-1]+p+2*a>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,h+=c,d++),o[f]={left:0,top:h,row:d,width:p,height:i},l[l.length-1]+=p+a}),u}_fitCols(e,t,n,i){const{ctx:r,maxHeight:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let u=a,d=0,h=0,f=0,p=0;return this.legendItems.forEach((e,s)=>{const{itemWidth:m,itemHeight:g}=function(e,t,n,i,r){const s=function(e,t,n,i){let r=e.text;r&&"string"!==typeof r&&(r=r.reduce((e,t)=>e.length>t.length?e:t));return t+n.size/2+i.measureText(r).width}(i,e,t,n),a=function(e,t,n){let i=e;"string"!==typeof t.text&&(i=Mv(t,n));return i}(r,i,t.lineHeight);return{itemWidth:s,itemHeight:a}}(n,t,r,e,i);s>0&&h+g+2*a>c&&(u+=d+a,l.push({width:d,height:h}),f+=d+a,p++,d=h=0),o[s]={left:f,top:h,col:p,width:m,height:g},d=Math.max(d,m),h+=g+a}),u+=d,l.push({width:d,height:h}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:i},rtl:r}}=this,s=zp(r,this.left,this.width);if(this.isHorizontal()){let r=0,a=cf(n,this.left+i,this.right-this.lineWidths[r]);for(const o of t)r!==o.row&&(r=o.row,a=cf(n,this.left+i,this.right-this.lineWidths[r])),o.top+=this.top+e+i,o.left=s.leftForLtr(s.x(a),o.width),a+=o.width+i}else{let r=0,a=cf(n,this.top+e+i,this.bottom-this.columnSizes[r].height);for(const o of t)o.col!==r&&(r=o.col,a=cf(n,this.top+e+i,this.bottom-this.columnSizes[r].height)),o.top=a,o.left+=this.left+i,o.left=s.leftForLtr(s.x(o.left),o.width),a+=o.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Ff(e,this),this._draw(),zf(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:i}=this,{align:r,labels:s}=e,a=Pf.color,o=zp(e.rtl,this.left,this.width),l=ep(s.font),{padding:c}=s,u=l.size,d=u/2;let h;this.drawTitle(),i.textAlign=o.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:m}=Iv(s,u),g=this.isHorizontal(),v=this._computeTitleHeight();h=g?{x:cf(r,this.left+c,this.right-n[0]),y:this.top+c+v,line:0}:{x:this.left+c,y:cf(r,this.top+v+c,this.bottom-t[0].height),line:0},Up(this.ctx,e.textDirection);const y=m+c;this.legendItems.forEach((b,x)=>{i.strokeStyle=b.fontColor,i.fillStyle=b.fontColor;const _=i.measureText(b.text).width,w=o.textAlign(b.textAlign||(b.textAlign=s.textAlign)),k=f+d+_;let S=h.x,N=h.y;o.setWidth(this.width),g?x>0&&S+k+c>this.right&&(N=h.y+=y,h.line++,S=h.x=cf(r,this.left+c,this.right-n[h.line])):x>0&&N+y>this.bottom&&(S=h.x=S+t[h.line].width+c,h.line++,N=h.y=cf(r,this.top+v+c,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;i.save();const r=hh(n.lineWidth,1);if(i.fillStyle=hh(n.fillStyle,a),i.lineCap=hh(n.lineCap,"butt"),i.lineDashOffset=hh(n.lineDashOffset,0),i.lineJoin=hh(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=hh(n.strokeStyle,a),i.setLineDash(hh(n.lineDash,[])),s.usePointStyle){const a={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},l=o.xPlus(e,f/2);Af(i,a,l,t+d,s.pointStyleWidth&&f)}else{const s=t+Math.max((u-p)/2,0),a=o.leftForLtr(e,f),l=Xf(n.borderRadius);i.beginPath(),Object.values(l).some(e=>0!==e)?qf(i,{x:a,y:s,w:f,h:p,radius:l}):i.rect(a,s,f,p),i.fill(),0!==r&&i.stroke()}i.restore()}(o.x(S),N,b),S=((e,t,n,i)=>e===(i?"left":"right")?n:"center"===e?(t+n)/2:t)(w,S+f+d,g?S+k:this.right,e.rtl),function(e,t,n){Hf(i,n.text,e,t+m/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(S),N,b),g)h.x+=k+c;else if("string"!==typeof b.text){const e=l.lineHeight;h.y+=Mv(b,e)+c}else h.y+=y}),Wp(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=ep(t.font),i=Zf(t.padding);if(!t.display)return;const r=zp(e.rtl,this.left,this.width),s=this.ctx,a=t.position,o=n.size/2,l=i.top+o;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=cf(e.align,u,this.right-d);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+cf(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=cf(a,u,u+d);s.textAlign=r.textAlign(lf(a)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,Hf(s,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=ep(e.font),n=Zf(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,i,r;if(Xh(e,this.left,this.right)&&Xh(t,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],Xh(e,i.left,i.left+i.width)&&Xh(t,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const s=this._hoveredItem,a=(r=n,null!==(i=s)&&null!==r&&i.datasetIndex===r.datasetIndex&&i.index===r.index);s&&!a&&ph(t.onLeave,[e,s,this],this),this._hoveredItem=n,n&&!a&&ph(t.onHover,[e,n,this],this)}else n&&ph(t.onClick,[e,n,this],this);var i,r}}function Mv(e,t){return t*(e.text?e.text.length:0)}var jv={id:"legend",_element:Pv,start(e,t,n){const i=e.legend=new Pv({ctx:e.ctx,options:n,chart:e});Zm.configure(e,i,n),Zm.addBox(e,i)},stop(e){Zm.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;Zm.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:a,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(n?0:void 0),c=Zf(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Rv extends vg{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const i=lh(n.text)?n.text.length:1;this._padding=Zf(n.padding);const r=i*ep(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:i,right:r,options:s}=this,a=s.align;let o,l,c,u=0;return this.isHorizontal()?(l=cf(a,n,r),c=t+e,o=r-n):("left"===s.position?(l=n+e,c=cf(a,i,t),u=-.5*Ih):(l=r-e,c=cf(a,t,i),u=.5*Ih),o=i-t),{titleX:l,titleY:c,maxWidth:o,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=ep(t.font),i=n.lineHeight/2+this._padding.top,{titleX:r,titleY:s,maxWidth:a,rotation:o}=this._drawArgs(i);Hf(e,t.text,0,0,n,{color:t.color,maxWidth:a,rotation:o,textAlign:lf(t.align),textBaseline:"middle",translation:[r,s]})}}var Ov={id:"title",_element:Rv,start(e,t,n){!function(e,t){const n=new Rv({ctx:e.ctx,options:t,chart:e});Zm.configure(e,n,t),Zm.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;Zm.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;Zm.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const Dv={average(e){if(!e.length)return!1;let t,n,i=new Set,r=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();i.add(e.x),r+=e.y,++s}}if(0===s||0===i.size)return!1;return{x:[...i].reduce((e,t)=>e+t)/i.size,y:r/s}},nearest(e,t){if(!e.length)return!1;let n,i,r,s=t.x,a=t.y,o=Number.POSITIVE_INFINITY;for(n=0,i=e.length;n<i;++n){const i=e[n].element;if(i&&i.hasValue()){const e=Gh(t,i.getCenterPoint());e<o&&(o=e,r=i)}}if(r){const e=r.tooltipPosition();s=e.x,a=e.y}return{x:s,y:a}}};function Av(e,t){return t&&(lh(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Lv(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Fv(e,t){const{element:n,datasetIndex:i,index:r}=t,s=e.getDatasetMeta(i).controller,{label:a,value:o}=s.getLabelAndValue(r);return{chart:e,label:a,parsed:s.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:o,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function zv(e,t){const n=e.chart.ctx,{body:i,footer:r,title:s}=e,{boxWidth:a,boxHeight:o}=t,l=ep(t.bodyFont),c=ep(t.titleFont),u=ep(t.footerFont),d=s.length,h=r.length,f=i.length,p=Zf(t.padding);let m=p.height,g=0,v=i.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(v+=e.beforeBody.length+e.afterBody.length,d&&(m+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),v){m+=f*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(v-f)*l.lineHeight+(v-1)*t.bodySpacing}h&&(m+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let y=0;const b=function(e){g=Math.max(g,n.measureText(e).width+y)};return n.save(),n.font=c.string,mh(e.title,b),n.font=l.string,mh(e.beforeBody.concat(e.afterBody),b),y=t.displayColors?a+2+t.boxPadding:0,mh(i,e=>{mh(e.before,b),mh(e.lines,b),mh(e.after,b)}),y=0,n.font=u.string,mh(e.footer,b),n.restore(),g+=p.width,{width:g,height:m}}function Uv(e,t,n,i){const{x:r,width:s}=n,{width:a,chartArea:{left:o,right:l}}=e;let c="center";return"center"===i?c=r<=(o+l)/2?"left":"right":r<=s/2?c="left":r>=a-s/2&&(c="right"),function(e,t,n,i){const{x:r,width:s}=i,a=n.caretSize+n.caretPadding;return"left"===e&&r+s+a>t.width||"right"===e&&r-s-a<0||void 0}(c,e,t,n)&&(c="center"),c}function Wv(e,t,n){const i=n.yAlign||t.yAlign||function(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||Uv(e,t,n,i),yAlign:i}}function Vv(e,t,n,i){const{caretSize:r,caretPadding:s,cornerRadius:a}=e,{xAlign:o,yAlign:l}=n,c=r+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=Xf(a);let p=function(e,t){let{x:n,width:i}=e;return"right"===t?n-=i:"center"===t&&(n-=i/2),n}(t,o);const m=function(e,t,n){let{y:i,height:r}=e;return"top"===t?i+=n:i-="bottom"===t?r+n:r/2,i}(t,l,c);return"center"===l?"left"===o?p+=c:"right"===o&&(p-=c):"left"===o?p-=Math.max(u,h)+r:"right"===o&&(p+=Math.max(d,f)+r),{x:Jh(p,0,i.width-t.width),y:Jh(m,0,i.height-t.height)}}function Bv(e,t,n){const i=Zf(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-i.right:e.x+i.left}function Hv(e){return Av([],Lv(e))}function qv(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const Yv={beforeTitle:sh,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:sh,beforeBody:sh,beforeLabel:sh,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return oh(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:sh,afterBody:sh,beforeFooter:sh,footer:sh,afterFooter:sh};function Gv(e,t,n,i){const r=e[t].call(n,i);return"undefined"===typeof r?Yv[t].call(n,i):r}class Kv extends vg{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&t.options.animation&&n.animations,r=new nm(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,np(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,i=Gv(n,"beforeTitle",this,e),r=Gv(n,"title",this,e),s=Gv(n,"afterTitle",this,e);let a=[];return a=Av(a,Lv(i)),a=Av(a,Lv(r)),a=Av(a,Lv(s)),a}getBeforeBody(e,t){return Hv(Gv(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,i=[];return mh(e,e=>{const t={before:[],lines:[],after:[]},r=qv(n,e);Av(t.before,Lv(Gv(r,"beforeLabel",this,e))),Av(t.lines,Gv(r,"label",this,e)),Av(t.after,Lv(Gv(r,"afterLabel",this,e))),i.push(t)}),i}getAfterBody(e,t){return Hv(Gv(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,i=Gv(n,"beforeFooter",this,e),r=Gv(n,"footer",this,e),s=Gv(n,"afterFooter",this,e);let a=[];return a=Av(a,Lv(i)),a=Av(a,Lv(r)),a=Av(a,Lv(s)),a}_createItems(e){const t=this._active,n=this.chart.data,i=[],r=[],s=[];let a,o,l=[];for(a=0,o=t.length;a<o;++a)l.push(Fv(this.chart,t[a]));return e.filter&&(l=l.filter((t,i,r)=>e.filter(t,i,r,n))),e.itemSort&&(l=l.sort((t,i)=>e.itemSort(t,i,n))),mh(l,t=>{const n=qv(e.callbacks,t);i.push(Gv(n,"labelColor",this,t)),r.push(Gv(n,"labelPointStyle",this,t)),s.push(Gv(n,"labelTextColor",this,t))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),i=this._active;let r,s=[];if(i.length){const e=Dv[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=zv(this,n),a=Object.assign({},e,t),o=Wv(this.chart,n,a),l=Vv(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,r={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,i){const r=this.getCaretPosition(e,n,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,n){const{xAlign:i,yAlign:r}=this,{caretSize:s,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:u}=Xf(a),{x:d,y:h}=e,{width:f,height:p}=t;let m,g,v,y,b,x;return"center"===r?(b=h+p/2,"left"===i?(m=d,g=m-s,y=b+s,x=b-s):(m=d+f,g=m+s,y=b-s,x=b+s),v=m):(g="left"===i?d+Math.max(o,c)+s:"right"===i?d+f-Math.max(l,u)-s:this.caretX,"top"===r?(y=h,b=y-s,m=g-s,v=g+s):(y=h+p,b=y+s,m=g+s,v=g-s),x=y),{x1:m,x2:g,x3:v,y1:y,y2:b,y3:x}}drawTitle(e,t,n){const i=this.title,r=i.length;let s,a,o;if(r){const l=zp(n.rtl,this.x,this.width);for(e.x=Bv(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=ep(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,o=0;o<r;++o)t.fillText(i[o],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+a,o+1===r&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,i,r){const s=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=r,c=ep(r.bodyFont),u=Bv(this,"left",r),d=i.x(u),h=o<c.lineHeight?(c.lineHeight-o)/2:0,f=t.y+h;if(r.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=i.leftForLtr(d,l)+l/2,c=f+o/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Df(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,Df(e,t,n,c)}else{e.lineWidth=ch(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=i.leftForLtr(d,l),n=i.leftForLtr(i.xPlus(d,1),l-2),a=Xf(s.borderRadius);Object.values(a).some(e=>0!==e)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,qf(e,{x:t,y:f,w:l,h:o,radius:a}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),qf(e,{x:n,y:f+1,w:l-2,h:o-2,radius:a}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(t,f,l,o),e.strokeRect(t,f,l,o),e.fillStyle=s.backgroundColor,e.fillRect(n,f+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:i}=this,{bodySpacing:r,bodyAlign:s,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,u=ep(n.bodyFont);let d=u.lineHeight,h=0;const f=zp(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+h),e.y+d/2),e.y+=d+r},m=f.textAlign(s);let g,v,y,b,x,_,w;for(t.textAlign=s,t.textBaseline="middle",t.font=u.string,e.x=Bv(this,m,n),t.fillStyle=n.bodyColor,mh(this.beforeBody,p),h=a&&"right"!==m?"center"===s?l/2+c:l+2+c:0,b=0,_=i.length;b<_;++b){for(g=i[b],v=this.labelTextColors[b],t.fillStyle=v,mh(g.before,p),y=g.lines,a&&y.length&&(this._drawColorBox(t,e,b,f,n),d=Math.max(u.lineHeight,o)),x=0,w=y.length;x<w;++x)p(y[x]),d=u.lineHeight;mh(g.after,p)}h=0,d=u.lineHeight,mh(this.afterBody,p),e.y-=r}drawFooter(e,t,n){const i=this.footer,r=i.length;let s,a;if(r){const o=zp(n.rtl,this.x,this.width);for(e.x=Bv(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",s=ep(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,a=0;a<r;++a)t.fillText(i[a],o.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,i){const{xAlign:r,yAlign:s}=this,{x:a,y:o}=e,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=Xf(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(a+u,o),"top"===s&&this.drawCaret(e,t,n,i),t.lineTo(a+l-d,o),t.quadraticCurveTo(a+l,o,a+l,o+d),"center"===s&&"right"===r&&this.drawCaret(e,t,n,i),t.lineTo(a+l,o+c-f),t.quadraticCurveTo(a+l,o+c,a+l-f,o+c),"bottom"===s&&this.drawCaret(e,t,n,i),t.lineTo(a+h,o+c),t.quadraticCurveTo(a,o+c,a,o+c-h),"center"===s&&"left"===r&&this.drawCaret(e,t,n,i),t.lineTo(a,o+u),t.quadraticCurveTo(a,o,a+u,o),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=Dv[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=zv(this,e),a=Object.assign({},n,this._size),o=Wv(t,e,a),l=Vv(e,a,o,t);i._to===l.x&&r._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=Zf(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,i,t),Up(e,t.textDirection),r.y+=s.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),Wp(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,i=e.map(e=>{let{datasetIndex:t,index:n}=e;const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[n],index:n}}),r=!gh(n,i),s=this._positionChanged(i,t);(r||s)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],s=this._getActiveElements(e,r,t,n),a=this._positionChanged(s,e),o=t||!gh(s,r)||a;return o&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,i){const r=this.options;if("mouseout"===e.type)return[];if(!i)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const s=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:i,options:r}=this,s=Dv[r.position].call(this,e,t);return!1!==s&&(n!==s.x||i!==s.y)}}o(Kv,"positioners",Dv);var $v={id:"tooltip",_element:Kv,positioners:Dv,afterInit(e,t,n){n&&(e.tooltip=new Kv({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",c(c({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Yv},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function Qv(e,t,n,i){const r=e.indexOf(t);if(-1===r)return((e,t,n,i)=>("string"===typeof t?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,i);return r!==e.lastIndexOf(t)?n:r}function Jv(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Xv extends Tg{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:i}of t)e[n]===i&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(oh(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:Jh(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:Qv(n,e,hh(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===e&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)i.push({value:s});return i}getLabelForValue(e){return Jv.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Zv(e,t){const n=[],{bounds:i,step:r,min:s,max:a,precision:o,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=e,h=r||1,f=c-1,{min:p,max:m}=t,g=!oh(s),v=!oh(a),y=!oh(l),b=(m-p)/(u+1);let x,_,w,k,S=Uh((m-p)/f/h)*h;if(S<1e-14&&!g&&!v)return[{value:p},{value:m}];k=Math.ceil(m/S)-Math.floor(p/S),k>f&&(S=Uh(k*S/f/h)*h),oh(o)||(x=Math.pow(10,o),S=Math.ceil(S*x)/x),"ticks"===i?(_=Math.floor(p/S)*S,w=Math.ceil(m/S)*S):(_=p,w=m),g&&v&&r&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((a-s)/r,S/1e3)?(k=Math.round(Math.min((a-s)/S,c)),S=(a-s)/k,_=s,w=a):y?(_=g?s:_,w=v?a:w,k=l-1,S=(w-_)/k):(k=(w-_)/S,k=zh(k,Math.round(k),S/1e3)?Math.round(k):Math.ceil(k));const N=Math.max(qh(S),qh(_));x=Math.pow(10,oh(o)?N:o),_=Math.round(_*x)/x,w=Math.round(w*x)/x;let C=0;for(g&&(d&&_!==s?(n.push({value:s}),_<s&&C++,zh(Math.round((_+C*S)*x)/x,s,ey(s,b,e))&&C++):_<s&&C++);C<k;++C){const e=Math.round((_+C*S)*x)/x;if(v&&e>a)break;n.push({value:e})}return v&&d&&w!==a?n.length&&zh(n[n.length-1].value,a,ey(a,b,e))?n[n.length-1].value=a:n.push({value:a}):v&&w!==a||n.push({value:w}),n}function ey(e,t,n){let{horizontal:i,minRotation:r}=n;const s=Bh(r),a=(i?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/a,o)}o(Xv,"id","category"),o(Xv,"defaults",{ticks:{callback:Jv}});class ty extends Tg{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return oh(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const s=e=>i=t?i:e,a=e=>r=n?r:e;if(e){const e=Fh(i),t=Fh(r);e<0&&t<0?a(0):e>0&&t>0&&s(0)}if(i===r){let t=0===r?1:Math.abs(.05*r);a(r+t),e||s(i-t)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:i}=e;return i?(t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(i," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=Zv({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&Vh(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-t)/Math.max(e.length-1,1)/2;t-=i,n+=i}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return wf(e,this.chart.options.locale,this.options.ticks.format)}}class ny extends ty{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=uh(e)?e:0,this.max=uh(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=Bh(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}o(ny,"id","linear"),o(ny,"defaults",{ticks:{callback:Sf.formatters.numeric}});const iy=e=>Math.floor(Lh(e)),ry=(e,t)=>Math.pow(10,iy(e)+t);function sy(e){return 1===e/Math.pow(10,iy(e))}function ay(e,t,n){const i=Math.pow(10,n),r=Math.floor(e/i);return Math.ceil(t/i)-r}function oy(e,t){let{min:n,max:i}=t;n=dh(e.min,n);const r=[],s=iy(n);let a=function(e,t){let n=iy(t-e);for(;ay(e,t,n)>10;)n++;for(;ay(e,t,n)<10;)n--;return Math.min(n,iy(e))}(n,i),o=a<0?Math.pow(10,Math.abs(a)):1;const l=Math.pow(10,a),c=s>a?Math.pow(10,s):0,u=Math.round((n-c)*o)/o,d=Math.floor((n-c)/l/10)*l*10;let h=Math.floor((u-d)/Math.pow(10,a)),f=dh(e.min,Math.round((c+d+h*Math.pow(10,a))*o)/o);for(;f<i;)r.push({value:f,major:sy(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(a++,h=2,o=a>=0?1:o),f=Math.round((c+d+h*Math.pow(10,a))*o)/o;const p=dh(e.max,f);return r.push({value:p,major:sy(p),significand:h}),r}class ly extends Tg{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=ty.prototype.parse.apply(this,[e,t]);if(0!==n)return uh(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=uh(e)?Math.max(0,e):null,this.max=uh(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!uh(this._userMin)&&(this.min=e===ry(this.min,0)?ry(this.min,-1):ry(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,i=this.max;const r=t=>n=e?n:t,s=e=>i=t?i:e;n===i&&(n<=0?(r(1),s(10)):(r(ry(n,-1)),s(ry(i,1)))),n<=0&&r(ry(i,-1)),i<=0&&s(ry(n,1)),this.min=n,this.max=i}buildTicks(){const e=this.options,t=oy({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&Vh(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":wf(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Lh(e),this._valueRange=Lh(this.max)-Lh(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Lh(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function cy(e){const t=e.ticks;if(t.display&&e.display){const e=Zf(t.backdropPadding);return hh(t.font&&t.font.size,Pf.font.size)+e.height}return 0}function uy(e,t,n){return n=lh(n)?n:[n],{w:jf(e,t.string,n),h:n.length*t.lineHeight}}function dy(e,t,n,i,r){return e===i||e===r?{start:t-n/2,end:t+n/2}:e<i||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function hy(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],r=[],s=e._pointLabels.length,a=e.options.pointLabels,o=a.centerPointLabels?Ih/s:0;for(let l=0;l<s;l++){const s=a.setContext(e.getPointLabelContext(l));r[l]=s.padding;const c=e.getPointPosition(l,e.drawingArea+r[l],o),u=ep(s.font),d=uy(e.ctx,u,e._pointLabels[l]);i[l]=d;const h=$h(e.getIndexAngle(l)+o),f=Math.round(Hh(h));fy(n,t,h,dy(f,c.x,d.w,0,180),dy(f,c.y,d.h,90,270))}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const i=[],r=e._pointLabels.length,s=e.options,{centerPointLabels:a,display:o}=s.pointLabels,l={extra:cy(s)/2,additionalAngle:a?Ih/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=t[u];const r=py(e,u,l);i.push(r),"auto"===o&&(r.visible=my(r,c),r.visible&&(c=r))}return i}(e,i,r)}function fy(e,t,n,i,r){const s=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let o=0,l=0;i.start<t.l?(o=(t.l-i.start)/s,e.l=Math.min(e.l,t.l-o)):i.end>t.r&&(o=(i.end-t.r)/s,e.r=Math.max(e.r,t.r+o)),r.start<t.t?(l=(t.t-r.start)/a,e.t=Math.min(e.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/a,e.b=Math.max(e.b,t.b+l))}function py(e,t,n){const i=e.drawingArea,{extra:r,additionalAngle:s,padding:a,size:o}=n,l=e.getPointPosition(t,i+r+a,s),c=Math.round(Hh($h(l.angle+Oh))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,o.h,c),d=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,o.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+o.w,bottom:u+o.h}}function my(e,t){if(!t)return!0;const{left:n,top:i,right:r,bottom:s}=e;return!(Lf({x:n,y:i},t)||Lf({x:n,y:s},t)||Lf({x:r,y:i},t)||Lf({x:r,y:s},t))}function gy(e,t,n){const{left:i,top:r,right:s,bottom:a}=n,{backdropColor:o}=t;if(!oh(o)){const n=Xf(t.borderRadius),l=Zf(t.backdropPadding);e.fillStyle=o;const c=i-l.left,u=r-l.top,d=s-i+l.width,h=a-r+l.height;Object.values(n).some(e=>0!==e)?(e.beginPath(),qf(e,{x:c,y:u,w:d,h:h,radius:n}),e.fill()):e.fillRect(c,u,d,h)}}function vy(e,t,n,i){const{ctx:r}=e;if(n)r.arc(e.xCenter,e.yCenter,t,0,Ph);else{let n=e.getPointPosition(0,t);r.moveTo(n.x,n.y);for(let s=1;s<i;s++)n=e.getPointPosition(s,t),r.lineTo(n.x,n.y)}}o(ly,"id","logarithmic"),o(ly,"defaults",{ticks:{callback:Sf.formatters.logarithmic,major:{enabled:!0}}});class yy extends ty{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Zf(cy(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=uh(e)&&!isNaN(e)?e:0,this.max=uh(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/cy(this.options))}generateTickLabels(e){ty.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const n=ph(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?hy(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,i))}getIndexAngle(e){return $h(e*(Ph/(this._pointLabels.length||1))+Bh(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(oh(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(oh(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return np(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.getIndexAngle(e)-Oh+n;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:i,bottom:r}=this._pointLabelItems[e];return{left:t,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),vy(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:i,border:r}=t,s=this._pointLabels.length;let a,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let r=t-1;r>=0;r--){const t=e._pointLabelItems[r];if(!t.visible)continue;const s=i.setContext(e.getPointLabelContext(r));gy(n,s,t);const a=ep(s.font),{x:o,y:l,textAlign:c}=t;Hf(n,e._pointLabels[r],o,l+a.lineHeight/2,a,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),i.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),a=i.setContext(n),l=r.setContext(n);!function(e,t,n,i,r){const s=e.ctx,a=t.circular,{color:o,lineWidth:l}=t;!a&&!i||!o||!l||n<0||(s.save(),s.strokeStyle=o,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),vy(e,n,a,i),s.closePath(),s.stroke(),s.restore())}(this,a,o,s,l)}}),n.display){for(e.save(),a=s-1;a>=0;a--){const i=n.setContext(this.getPointLabelContext(a)),{color:r,lineWidth:s}=i;s&&r&&(e.lineWidth=s,e.strokeStyle=r,e.setLineDash(i.borderDash),e.lineDashOffset=i.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((i,a)=>{if(0===a&&this.min>=0&&!t.reverse)return;const o=n.setContext(this.getContext(a)),l=ep(o.font);if(r=this.getDistanceFromCenterForValue(this.ticks[a].value),o.showLabelBackdrop){e.font=l.string,s=e.measureText(i.label).width,e.fillStyle=o.backdropColor;const t=Zf(o.backdropPadding);e.fillRect(-s/2-t.left,-r-l.size/2-t.top,s+t.width,l.size+t.height)}Hf(e,i.label,0,-r,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})}),e.restore()}drawTitle(){}}o(yy,"id","radialLinear"),o(yy,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Sf.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),o(yy,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),o(yy,"descriptors",{angleLines:{_fallback:"grid"}});const by={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},xy=Object.keys(by);function _y(e,t){return e-t}function wy(e,t){if(oh(t))return null;const n=e._adapter,{parser:i,round:r,isoWeekday:s}=e._parseOpts;let a=t;return"function"===typeof i&&(a=i(a)),uh(a)||(a="string"===typeof i?n.parse(a,i):n.parse(a)),null===a?null:(r&&(a="week"!==r||!Wh(s)&&!0!==s?n.startOf(a,r):n.startOf(a,"isoWeek",s)),+a)}function ky(e,t,n,i){const r=xy.length;for(let s=xy.indexOf(e);s<r-1;++s){const e=by[xy[s]],r=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(r*e.size))<=i)return xy[s]}return xy[r-1]}function Sy(e,t,n){if(n){if(n.length){const{lo:i,hi:r}=Zh(n,t);e[n[i]>=t?n[i]:n[r]]=!0}}else e[t]=!0}function Ny(e,t,n){const i=[],r={},s=t.length;let a,o;for(a=0;a<s;++a)o=t[a],r[o]=a,i.push({value:o,major:!1});return 0!==s&&n?function(e,t,n,i){const r=e._adapter,s=+r.startOf(t[0].value,i),a=t[t.length-1].value;let o,l;for(o=s;o<=a;o=+r.add(o,1,i))l=n[o],l>=0&&(t[l].major=!0);return t}(e,i,r,n):i}class Cy extends Tg{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),i=this._adapter=new Rm(e.adapters.date);i.init(t),_h(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:wy(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:i,max:r,minDefined:s,maxDefined:a}=this.getUserBounds();function o(e){s||isNaN(e.min)||(i=Math.min(i,e.min)),a||isNaN(e.max)||(r=Math.max(r,e.max))}s&&a||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),i=uh(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),r=uh(r)&&!isNaN(r)?r:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,s=function(e,t,n){let i=0,r=e.length;for(;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}(i,r,this.max);return this._unit=t.unit||(n.autoSkip?ky(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(e,t,n,i,r){for(let s=xy.length-1;s>=xy.indexOf(n);s--){const n=xy[s];if(by[n].common&&e._adapter.diff(r,i,n)>=t-1)return n}return xy[n?xy.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=xy.indexOf(e)+1,n=xy.length;t<n;++t)if(by[xy[t]].common)return xy[t]}(this._unit):void 0,this.initOffsets(i),e.reverse&&s.reverse(),Ny(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0,r=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),i=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),r=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;i=Jh(i,0,s),r=Jh(r,0,s),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const e=this._adapter,t=this.min,n=this.max,i=this.options,r=i.time,s=r.unit||ky(r.minUnit,t,n,this._getLabelCapacity(t)),a=hh(i.ticks.stepSize,1),o="week"===s&&r.isoWeekday,l=Wh(o)||!0===o,c={};let u,d,h=t;if(l&&(h=+e.startOf(h,"isoWeek",o)),h=+e.startOf(h,l?"day":s),e.diff(n,t,s)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+s);const f="data"===i.ticks.source&&this.getDataTimestamps();for(u=h,d=0;u<n;u=+e.add(u,a,s),d++)Sy(c,u,f);return u!==n&&"ticks"!==i.bounds&&1!==d||Sy(c,u,f),Object.keys(c).sort(_y).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,i=this._unit,r=t||n[i];return this._adapter.format(e,r)}_tickFormatFunction(e,t,n,i){const r=this.options,s=r.ticks.callback;if(s)return ph(s,[e,t,n],this);const a=r.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&a[o],u=l&&a[l],d=n[t],h=l&&u&&d&&d.major;return this._adapter.format(e,i||(h?u:c))}generateTickLabels(e){let t,n,i;for(t=0,n=e.length;t<n;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,i=Bh(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),s=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*s,h:n*s+a*r}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,Ny(this,[e],this._majorUnit),i),s=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,t=i.length;e<t;++e)n=n.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const i=this.getLabels();for(t=0,n=i.length;t<n;++t)e.push(wy(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return sf(e.sort(_y))}}function Ty(e,t,n){let i,r,s,a,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=ef(e,"pos",t)),({pos:i,time:s}=e[o]),({pos:r,time:a}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=ef(e,"time",t)),({time:i,pos:s}=e[o]),({time:r,pos:a}=e[l]));const c=r-i;return c?s+(a-s)*(t-i)/c:s}o(Cy,"id","time"),o(Cy,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class Ey extends Cy{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Ty(t,this.min),this._tableRange=Ty(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,i=[],r=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;++s)l=e[s],l>=t&&l<=n&&i.push(l);if(i.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,a=i.length;s<a;++s)c=i[s+1],o=i[s-1],l=i[s],Math.round((c+o)/2)!==l&&r.push({time:l,pos:s/(a-1)});return r}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Ty(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return Ty(this._table,n*this._tableRange+this._minPos,!0)}}o(Ey,"id","timeseries"),o(Ey,"defaults",Cy.defaults);const Iy=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],Py="label";function My(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function jy(e,t){e.labels=t}function Ry(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Py;const i=[];e.datasets=t.map(t=>{const r=e.datasets.find(e=>e[n]===t[n]);return r&&t.data&&!i.includes(r)?(i.push(r),Object.assign(r,t),r):c({},t)})}function Oy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Py;const n={labels:[],datasets:[]};return jy(n,e.labels),Ry(n,e.datasets,t),n}function Dy(e,t){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:a,type:o,data:l,options:d,plugins:h=[],fallbackContent:f,updateMode:p}=e,g=m(e,Iy),v=(0,i.useRef)(null),y=(0,i.useRef)(null),b=()=>{v.current&&(y.current=new rv(v.current,{type:o,data:Oy(l,a),options:d&&c({},d),plugins:h}),My(t,y.current))},x=()=>{My(t,null),y.current&&(y.current.destroy(),y.current=null)};return(0,i.useEffect)(()=>{!s&&y.current&&d&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(y.current,d)},[s,d]),(0,i.useEffect)(()=>{!s&&y.current&&jy(y.current.config.data,l.labels)},[s,l.labels]),(0,i.useEffect)(()=>{!s&&y.current&&l.datasets&&Ry(y.current.config.data,l.datasets,a)},[s,l.datasets]),(0,i.useEffect)(()=>{y.current&&(s?(x(),setTimeout(b)):y.current.update(p))},[s,d,l.labels,l.datasets,p]),(0,i.useEffect)(()=>{y.current&&(x(),setTimeout(b))},[o]),(0,i.useEffect)(()=>(b(),()=>x()),[]),(0,u.jsx)("canvas",c(c({ref:v,role:"img",height:n,width:r},g),{},{children:f}))}const Ay=(0,i.forwardRef)(Dy);function Ly(e,t){return rv.register(t),(0,i.forwardRef)((t,n)=>(0,u.jsx)(Ay,c(c({},t),{},{ref:n,type:e})))}const Fy=Ly("line",Cm),zy=Ly("bar",km),Uy=Ly("doughnut",Nm),Wy=Ly("pie",Em);function Vy(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function By(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Hy(e){By(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===s(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function qy(e,t){return By(2,arguments),function(e,t){By(2,arguments);var n=Hy(e),i=Vy(t);return isNaN(i)?new Date(NaN):i?(n.setDate(n.getDate()+i),n):n}(e,-Vy(t))}function Yy(e,t){By(2,arguments);var n=Hy(e),i=Hy(t);return n.getTime()>i.getTime()}function Gy(e){if(By(1,arguments),!function(e){return By(1,arguments),e instanceof Date||"object"===s(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!==typeof e)return!1;var t=Hy(e);return!isNaN(Number(t))}function Ky(e,t){return By(2,arguments),function(e,t){By(2,arguments);var n=Hy(e).getTime(),i=Vy(t);return new Date(n+i)}(e,-Vy(t))}function $y(e){By(1,arguments);var t=Hy(e),n=t.getUTCDay(),i=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-i),t.setUTCHours(0,0,0,0),t}function Qy(e){By(1,arguments);var t=Hy(e),n=t.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(n+1,0,4),i.setUTCHours(0,0,0,0);var r=$y(i),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var a=$y(s);return t.getTime()>=r.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function Jy(e){By(1,arguments);var t=Hy(e),n=$y(t).getTime()-function(e){By(1,arguments);var t=Qy(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),$y(n)}(t).getTime();return Math.round(n/6048e5)+1}var Xy={};function Zy(){return Xy}function eb(e,t){var n,i,r,s,a,o,l,c;By(1,arguments);var u=Zy(),d=Vy(null!==(n=null!==(i=null!==(r=null!==(s=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==s?s:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(o=a.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==r?r:u.weekStartsOn)&&void 0!==i?i:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Hy(e),f=h.getUTCDay(),p=(f<d?7:0)+f-d;return h.setUTCDate(h.getUTCDate()-p),h.setUTCHours(0,0,0,0),h}function tb(e,t){var n,i,r,s,a,o,l,c;By(1,arguments);var u=Hy(e),d=u.getUTCFullYear(),h=Zy(),f=Vy(null!==(n=null!==(i=null!==(r=null!==(s=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(o=a.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==r?r:h.firstWeekContainsDate)&&void 0!==i?i:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(d+1,0,f),p.setUTCHours(0,0,0,0);var m=eb(p,t),g=new Date(0);g.setUTCFullYear(d,0,f),g.setUTCHours(0,0,0,0);var v=eb(g,t);return u.getTime()>=m.getTime()?d+1:u.getTime()>=v.getTime()?d:d-1}function nb(e,t){By(1,arguments);var n=Hy(e),i=eb(n,t).getTime()-function(e,t){var n,i,r,s,a,o,l,c;By(1,arguments);var u=Zy(),d=Vy(null!==(n=null!==(i=null!==(r=null!==(s=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(o=a.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==r?r:u.firstWeekContainsDate)&&void 0!==i?i:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1),h=tb(e,t),f=new Date(0);return f.setUTCFullYear(h,0,d),f.setUTCHours(0,0,0,0),eb(f,t)}(n,t).getTime();return Math.round(i/6048e5)+1}function ib(e,t){for(var n=e<0?"-":"",i=Math.abs(e).toString();i.length<t;)i="0"+i;return n+i}const rb={y:function(e,t){var n=e.getUTCFullYear(),i=n>0?n:1-n;return ib("yy"===t?i%100:i,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):ib(n+1,2)},d:function(e,t){return ib(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return ib(e.getUTCHours()%12||12,t.length)},H:function(e,t){return ib(e.getUTCHours(),t.length)},m:function(e,t){return ib(e.getUTCMinutes(),t.length)},s:function(e,t){return ib(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,i=e.getUTCMilliseconds();return ib(Math.floor(i*Math.pow(10,n-3)),t.length)}};var sb="midnight",ab="noon",ob="morning",lb="afternoon",cb="evening",ub="night",db={G:function(e,t,n){var i=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});default:return n.era(i,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var i=e.getUTCFullYear(),r=i>0?i:1-i;return n.ordinalNumber(r,{unit:"year"})}return rb.y(e,t)},Y:function(e,t,n,i){var r=tb(e,i),s=r>0?r:1-r;return"YY"===t?ib(s%100,2):"Yo"===t?n.ordinalNumber(s,{unit:"year"}):ib(s,t.length)},R:function(e,t){return ib(Qy(e),t.length)},u:function(e,t){return ib(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return ib(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,n){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return ib(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,n){var i=e.getUTCMonth();switch(t){case"M":case"MM":return rb.M(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){var i=e.getUTCMonth();switch(t){case"L":return String(i+1);case"LL":return ib(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,n,i){var r=nb(e,i);return"wo"===t?n.ordinalNumber(r,{unit:"week"}):ib(r,t.length)},I:function(e,t,n){var i=Jy(e);return"Io"===t?n.ordinalNumber(i,{unit:"week"}):ib(i,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):rb.d(e,t)},D:function(e,t,n){var i=function(e){By(1,arguments);var t=Hy(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var i=n-t.getTime();return Math.floor(i/864e5)+1}(e);return"Do"===t?n.ordinalNumber(i,{unit:"dayOfYear"}):ib(i,t.length)},E:function(e,t,n){var i=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,n,i){var r=e.getUTCDay(),s=(r-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return ib(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,n,i){var r=e.getUTCDay(),s=(r-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return ib(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,n){var i=e.getUTCDay(),r=0===i?7:i;switch(t){case"i":return String(r);case"ii":return ib(r,t.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,n){var i=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){var i,r=e.getUTCHours();switch(i=12===r?ab:0===r?sb:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){var i,r=e.getUTCHours();switch(i=r>=17?cb:r>=12?lb:r>=4?ob:ub,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var i=e.getUTCHours()%12;return 0===i&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return rb.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):rb.H(e,t)},K:function(e,t,n){var i=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(i,{unit:"hour"}):ib(i,t.length)},k:function(e,t,n){var i=e.getUTCHours();return 0===i&&(i=24),"ko"===t?n.ordinalNumber(i,{unit:"hour"}):ib(i,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):rb.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):rb.s(e,t)},S:function(e,t){return rb.S(e,t)},X:function(e,t,n,i){var r=(i._originalDate||e).getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return fb(r);case"XXXX":case"XX":return pb(r);default:return pb(r,":")}},x:function(e,t,n,i){var r=(i._originalDate||e).getTimezoneOffset();switch(t){case"x":return fb(r);case"xxxx":case"xx":return pb(r);default:return pb(r,":")}},O:function(e,t,n,i){var r=(i._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+hb(r,":");default:return"GMT"+pb(r,":")}},z:function(e,t,n,i){var r=(i._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+hb(r,":");default:return"GMT"+pb(r,":")}},t:function(e,t,n,i){var r=i._originalDate||e;return ib(Math.floor(r.getTime()/1e3),t.length)},T:function(e,t,n,i){return ib((i._originalDate||e).getTime(),t.length)}};function hb(e,t){var n=e>0?"-":"+",i=Math.abs(e),r=Math.floor(i/60),s=i%60;if(0===s)return n+String(r);var a=t||"";return n+String(r)+a+ib(s,2)}function fb(e,t){return e%60===0?(e>0?"-":"+")+ib(Math.abs(e)/60,2):pb(e,t)}function pb(e,t){var n=t||"",i=e>0?"-":"+",r=Math.abs(e);return i+ib(Math.floor(r/60),2)+n+ib(r%60,2)}const mb=db;var gb=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},vb=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},yb={p:vb,P:function(e,t){var n,i=e.match(/(P+)(p+)?/)||[],r=i[1],s=i[2];if(!s)return gb(e,t);switch(r){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",gb(r,t)).replace("{{time}}",vb(s,t))}};const bb=yb;var xb=["D","DD"],_b=["YY","YYYY"];function wb(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var kb={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const Sb=function(e,t,n){var i,r=kb[e];return i="string"===typeof r?r:1===t?r.one:r.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function Nb(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Cb={date:Nb({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Nb({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Nb({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var Tb={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};const Eb=function(e,t,n,i){return Tb[e]};function Ib(e){return function(t,n){var i;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){var r=e.defaultFormattingWidth||e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):r;i=e.formattingValues[s]||e.formattingValues[r]}else{var a=e.defaultWidth,o=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;i=e.values[o]||e.values[a]}return i[e.argumentCallback?e.argumentCallback(t):t]}}const Pb={ordinalNumber:function(e,t){var n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Ib({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Ib({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Ib({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Ib({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Ib({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function Mb(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.width,r=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],s=t.match(r);if(!s)return null;var a,o=s[0],l=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(l,function(e){return e.test(o)}):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(l,function(e){return e.test(o)});return a=e.valueCallback?e.valueCallback(c):c,{value:a=n.valueCallback?n.valueCallback(a):a,rest:t.slice(o.length)}}}var jb,Rb={ordinalNumber:(jb={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(jb.matchPattern);if(!n)return null;var i=n[0],r=e.match(jb.parsePattern);if(!r)return null;var s=jb.valueCallback?jb.valueCallback(r[0]):r[0];return{value:s=t.valueCallback?t.valueCallback(s):s,rest:e.slice(i.length)}}),era:Mb({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Mb({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Mb({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Mb({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Mb({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};const Ob={code:"en-US",formatDistance:Sb,formatLong:Cb,formatRelative:Eb,localize:Pb,match:Rb,options:{weekStartsOn:0,firstWeekContainsDate:1}};var Db=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ab=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Lb=/^'([^]*?)'?$/,Fb=/''/g,zb=/[a-zA-Z]/;function Ub(e,t,n){var i,r,s,a,o,l,c,u,d,h,f,p,m,g,v,y,b,x;By(2,arguments);var _=String(t),w=Zy(),k=null!==(i=null!==(r=null===n||void 0===n?void 0:n.locale)&&void 0!==r?r:w.locale)&&void 0!==i?i:Ob,S=Vy(null!==(s=null!==(a=null!==(o=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==o?o:w.firstWeekContainsDate)&&void 0!==a?a:null===(d=w.locale)||void 0===d||null===(h=d.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==s?s:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var N=Vy(null!==(f=null!==(p=null!==(m=null!==(g=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==g?g:null===n||void 0===n||null===(v=n.locale)||void 0===v||null===(y=v.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==m?m:w.weekStartsOn)&&void 0!==p?p:null===(b=w.locale)||void 0===b||null===(x=b.options)||void 0===x?void 0:x.weekStartsOn)&&void 0!==f?f:0);if(!(N>=0&&N<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!k.localize)throw new RangeError("locale must contain localize property");if(!k.formatLong)throw new RangeError("locale must contain formatLong property");var C=Hy(e);if(!Gy(C))throw new RangeError("Invalid time value");var T=function(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}(C),E=Ky(C,T),I={firstWeekContainsDate:S,weekStartsOn:N,locale:k,_originalDate:C};return _.match(Ab).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,bb[t])(e,k.formatLong):e}).join("").match(Db).map(function(i){if("''"===i)return"'";var r=i[0];if("'"===r)return function(e){var t=e.match(Lb);if(!t)return e;return t[1].replace(Fb,"'")}(i);var s,a=mb[r];if(a)return null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||(s=i,-1===_b.indexOf(s))||wb(i,t,String(e)),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!function(e){return-1!==xb.indexOf(e)}(i)||wb(i,t,String(e)),a(E,i,k.localize,I);if(r.match(zb))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return i}).join("")}const Wb=e=>{let{setActiveTab:t}=e;const{getUserDataPath:n,currentUser:r}=h(),[s,a]=(0,i.useState)([]),[o,l]=(0,i.useState)([]),[d,f]=(0,i.useState)(!0);(0,i.useEffect)(()=>{const e=n("workouts"),t=n("bodyMetrics");if(e&&t){if(r){try{const e=localStorage.getItem("gymtracker_workouts_".concat(r.uid));if(e){const t=JSON.parse(e),n=Object.keys(t).map(e=>c({id:e},t[e])).sort((e,t)=>new Date(t.date)-new Date(e.date));a(n)}const t=localStorage.getItem("gymtracker_metrics_".concat(r.uid));if(t){const e=JSON.parse(t),n=Object.keys(e).map(t=>c({id:t},e[t])).sort((e,t)=>new Date(t.date)-new Date(e.date));l(n)}}catch(gn){console.error("Error loading data from localStorage:",gn)}f(!1)}}else f(!1)},[n,r]);const p=()=>{if(0===s.length)return 0;let e=0,t=new Date;for(let n=0;n<s.length;n++){const i=new Date(s[n].date);if(!(Math.floor((t-i)/864e5)<=e+1))break;e++,t=i}return e},m=(()=>{var e,t;const n=qy(new Date,7),i=qy(new Date,30),r=s.filter(e=>Yy(new Date(e.date),n)),a=s.filter(e=>Yy(new Date(e.date),i)),l=s.reduce((e,t)=>e+(t.totalVolume||0),0),c=s.length>0?Math.round(l/s.length):0,u=(null===(e=o.find(e=>e.weight))||void 0===e?void 0:e.weight)||0,d=u-(o.length>1&&(null===(t=o[1])||void 0===t?void 0:t.weight)||u);return{totalWorkouts:s.length,weeklyWorkouts:r.length,monthlyWorkouts:a.length,totalVolume:l,avgVolume:c,currentWeight:u,weightChange:d,streak:p()}})();return d?(0,u.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,u.jsx)("div",{className:"spinner"})}):(0,u.jsxs)("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6 md:space-y-8 animate-fade-in",children:[(0,u.jsxs)("div",{className:"text-center mb-6 md:mb-8",children:[(0,u.jsx)("h1",{className:"text-3xl md:text-4xl font-bold gradient-text mb-2",children:"Welcome Back!"}),(0,u.jsx)("p",{className:"text-dark-400 text-base md:text-lg",children:"Here's your fitness journey overview"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 mb-6 md:mb-8",children:[(0,u.jsxs)("div",{className:"stat-card p-4 md:p-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,u.jsx)(S,{className:"text-primary-500",size:20}),(0,u.jsx)("span",{className:"text-xl md:text-2xl font-bold text-primary-400",children:m.weeklyWorkouts})]}),(0,u.jsx)("p",{className:"text-dark-400 text-xs md:text-sm",children:"This Week"})]}),(0,u.jsxs)("div",{className:"stat-card p-4 md:p-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,u.jsx)(bd,{className:"text-secondary-500",size:20}),(0,u.jsx)("span",{className:"text-xl md:text-2xl font-bold text-secondary-400",children:m.streak})]}),(0,u.jsx)("p",{className:"text-dark-400 text-xs md:text-sm",children:"Day Streak"})]}),(0,u.jsxs)("div",{className:"stat-card p-4 md:p-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,u.jsx)(_,{className:"text-accent-500",size:20}),(0,u.jsx)("span",{className:"text-xl md:text-2xl font-bold text-accent-400",children:m.avgVolume})]}),(0,u.jsx)("p",{className:"text-dark-400 text-xs md:text-sm",children:"Avg Volume"})]}),(0,u.jsxs)("div",{className:"stat-card p-4 md:p-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,u.jsx)(xd,{className:"text-purple-500",size:20}),(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{className:"text-xl md:text-2xl font-bold text-purple-400",children:m.currentWeight}),0!==m.weightChange&&(m.weightChange>0?(0,u.jsx)(_d,{className:"text-red-400",size:16}):(0,u.jsx)(wd,{className:"text-green-400",size:16}))]})]}),(0,u.jsx)("p",{className:"text-dark-400 text-xs md:text-sm",children:"Weight (lbs)"})]})]}),(0,u.jsxs)("div",{className:"card-glass p-4 md:p-6 mb-6",children:[(0,u.jsxs)("h3",{className:"text-lg md:text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,u.jsx)(bd,{className:"text-primary-500",size:20}),"Quick Actions"]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,u.jsxs)("button",{onClick:()=>t("logger"),className:"quick-action-btn bg-gradient-to-r from-primary-600/20 to-primary-700/20 border-primary-500/30",children:[(0,u.jsx)(S,{size:24,className:"mr-3"}),(0,u.jsxs)("div",{className:"text-left",children:[(0,u.jsx)("div",{className:"font-semibold",children:"Log Workout"}),(0,u.jsx)("div",{className:"text-sm text-dark-400",children:"Start training session"})]})]}),(0,u.jsxs)("button",{onClick:()=>t("metrics"),className:"quick-action-btn bg-gradient-to-r from-secondary-600/20 to-secondary-700/20 border-secondary-500/30",children:[(0,u.jsx)(kd,{size:24,className:"mr-3"}),(0,u.jsxs)("div",{className:"text-left",children:[(0,u.jsx)("div",{className:"font-semibold",children:"Body Metrics"}),(0,u.jsx)("div",{className:"text-sm text-dark-400",children:"Track measurements"})]})]}),(0,u.jsxs)("button",{onClick:()=>t("charts"),className:"quick-action-btn bg-gradient-to-r from-accent-600/20 to-accent-700/20 border-accent-500/30",children:[(0,u.jsx)(b,{size:24,className:"mr-3"}),(0,u.jsxs)("div",{className:"text-left",children:[(0,u.jsx)("div",{className:"font-semibold",children:"Analytics"}),(0,u.jsx)("div",{className:"text-sm text-dark-400",children:"View progress"})]})]})]}),(0,u.jsxs)("div",{className:"mt-6 p-4 bg-dark-800/50 rounded-xl",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,u.jsx)("span",{className:"font-medium text-base",children:"Weekly Goal Progress"}),(0,u.jsxs)("span",{className:"text-sm text-dark-400 font-semibold",children:[m.weeklyWorkouts,"/4 workouts"]})]}),(0,u.jsx)("div",{className:"w-full bg-dark-700 rounded-full h-3",children:(0,u.jsx)("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 h-3 rounded-full transition-all duration-500",style:{width:"".concat(Math.min(m.weeklyWorkouts/4*100,100),"%")}})}),(0,u.jsx)("p",{className:"text-sm text-dark-400 mt-2",children:m.weeklyWorkouts>=4?"\ud83c\udf89 Goal achieved this week!":"".concat(4-m.weeklyWorkouts," more workouts to reach your goal!")})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8",children:[(0,u.jsxs)("div",{className:"lg:col-span-2 card-glass p-4 md:p-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[(0,u.jsxs)("h3",{className:"text-lg md:text-xl font-semibold flex items-center gap-2",children:[(0,u.jsx)(Sd,{className:"text-primary-500",size:20}),"Recent Activity"]}),(0,u.jsx)("span",{className:"text-xs md:text-sm text-dark-400",children:"Last 14 days"})]}),(0,u.jsx)("div",{className:"chart-container",children:(0,u.jsx)(Fy,{data:(()=>{const e=Array.from({length:14},(e,t)=>{const n=qy(new Date,13-t),i=s.filter(e=>Ub(new Date(e.date),"yyyy-MM-dd")===Ub(n,"yyyy-MM-dd"));return{date:Ub(n,"MMM dd"),workouts:i.length,volume:i.reduce((e,t)=>e+(t.totalVolume||0),0)}});return{labels:e.map(e=>e.date),datasets:[{label:"Volume",data:e.map(e=>e.volume),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]}})(),options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{display:!1},y:{display:!1}},elements:{point:{radius:0}}}})})]}),(0,u.jsxs)("div",{className:"card-glass p-4 md:p-6",children:[(0,u.jsxs)("h3",{className:"text-lg md:text-xl font-semibold mb-4 md:mb-6 flex items-center gap-2",children:[(0,u.jsx)(b,{className:"text-secondary-500",size:20}),"Focus Areas"]}),(0,u.jsx)("div",{className:"chart-container",children:(0,u.jsx)(Uy,{data:(()=>{const e={};s.forEach(t=>{t.exercises&&t.exercises.forEach(t=>{const n=t.muscleGroup||"Other";e[n]=(e[n]||0)+1})});return{labels:Object.keys(e),datasets:[{data:Object.values(e),backgroundColor:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#F97316","#06B6D4","#84CC16"].slice(0,Object.keys(e).length),borderWidth:0}]}})(),options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:"#94a3b8",padding:20,usePointStyle:!0}}},cutout:"70%"}})})]})]}),(0,u.jsxs)("div",{className:"card-glass p-4 md:p-6",children:[(0,u.jsxs)("h3",{className:"text-lg md:text-xl font-semibold mb-4 md:mb-6 flex items-center gap-2",children:[(0,u.jsx)(Nd,{className:"text-accent-500",size:20}),"Recent Workouts"]}),(0,u.jsx)("div",{className:"space-y-3 md:space-y-4",children:s.length>0?s.slice(0,5).map((e,t)=>{var n;return(0,u.jsx)("div",{className:"exercise-card",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("h4",{className:"font-medium text-dark-100 text-base md:text-lg",children:e.name}),(0,u.jsxs)("p",{className:"text-sm text-dark-400",children:[Ub(new Date(e.date),"MMM dd, yyyy")," \u2022 ",(null===(n=e.exercises)||void 0===n?void 0:n.length)||0," exercises"]})]}),(0,u.jsxs)("div",{className:"text-right",children:[(0,u.jsx)("div",{className:"text-lg md:text-xl font-semibold text-primary-400",children:e.totalVolume||0}),(0,u.jsx)("div",{className:"text-xs text-dark-400",children:"volume"})]})]})},e.id)}):(0,u.jsxs)("div",{className:"text-center py-8 md:py-12 text-dark-400",children:[(0,u.jsx)(Sd,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,u.jsx)("h4",{className:"text-lg md:text-xl font-medium text-dark-200 mb-2",children:"Welcome to GymTracker!"}),(0,u.jsx)("p",{className:"mb-6 text-base",children:"Ready to start your fitness journey?"}),(0,u.jsx)("button",{onClick:()=>t("logger"),className:"btn-primary text-base md:text-lg py-3 px-8",children:"Log Your First Workout"})]})})]}),(0,u.jsxs)("div",{className:"card-glass p-4 md:p-6",children:[(0,u.jsxs)("h3",{className:"text-lg md:text-xl font-semibold mb-4 md:mb-6 flex items-center gap-2",children:[(0,u.jsx)(b,{className:"text-primary-500",size:20}),"This Month"]}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6",children:[(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-2xl md:text-3xl font-bold text-primary-400 mb-1",children:m.monthlyWorkouts}),(0,u.jsx)("div",{className:"text-xs md:text-sm text-dark-400",children:"Workouts"})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsxs)("div",{className:"text-2xl md:text-3xl font-bold text-secondary-400 mb-1",children:[Math.round(m.totalVolume/1e3),"K"]}),(0,u.jsx)("div",{className:"text-xs md:text-sm text-dark-400",children:"Volume"})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-2xl md:text-3xl font-bold text-accent-400 mb-1",children:s.reduce((e,t)=>{var n;return e+((null===(n=t.exercises)||void 0===n?void 0:n.length)||0)},0)}),(0,u.jsx)("div",{className:"text-xs md:text-sm text-dark-400",children:"Exercises"})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-2xl md:text-3xl font-bold text-purple-400 mb-1",children:Math.round(m.monthlyWorkouts>0?m.totalVolume/m.monthlyWorkouts:0)}),(0,u.jsx)("div",{className:"text-xs md:text-sm text-dark-400",children:"Avg/Workout"})]})]})]})]})},Vb=y("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),Bb=y("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Hb=y("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),qb=(e,t)=>1===t?e:Math.round(e*(36/(37-t))),Yb=(e,t,n)=>e*t*n,Gb=["Chest","Back","Shoulders","Arms","Legs","Core","Cardio"],Kb={Chest:["Bench Press","Incline Press","Dumbbell Press","Push-ups","Chest Fly","Dips"],Back:["Deadlift","Pull-ups","Rows","Lat Pulldown","T-Bar Row","Face Pulls"],Shoulders:["Overhead Press","Lateral Raises","Rear Delt Fly","Arnold Press","Upright Row"],Arms:["Bicep Curls","Tricep Dips","Close Grip Press","Hammer Curls","Tricep Extension"],Legs:["Squat","Leg Press","Lunges","Calf Raises","Romanian Deadlift","Leg Curls"],Core:["Plank","Crunches","Russian Twists","Dead Bug","Mountain Climbers"],Cardio:["Treadmill","Cycling","Rowing","Elliptical","Stair Climber"]},$b=[{name:"Push Day",exercises:["Bench Press","Overhead Press","Lateral Raises","Tricep Dips"]},{name:"Pull Day",exercises:["Deadlift","Pull-ups","Rows","Bicep Curls"]},{name:"Leg Day",exercises:["Squat","Romanian Deadlift","Leg Press","Calf Raises"]},{name:"Upper Body",exercises:["Bench Press","Rows","Overhead Press","Pull-ups"]},{name:"Full Body",exercises:["Squat","Bench Press","Rows","Overhead Press"]}],Qb=()=>{var e;const{getUserDataPath:t,currentUser:n}=h(),[r,s]=(0,i.useState)({name:"",date:(new Date).toISOString().split("T")[0],exercises:[]}),[a,o]=(0,i.useState)({name:"",muscleGroup:"",sets:3,reps:8,weight:0}),[l,d]=(0,i.useState)(!1),[f,p]=(0,i.useState)(!1),[m,g]=(0,i.useState)(!1),[v,y]=(0,i.useState)(0),[b,x]=(0,i.useState)(!1),w=function(){y(arguments.length>0&&void 0!==arguments[0]?arguments[0]:90),x(!0);const e=setInterval(()=>{y(t=>t<=1?(clearInterval(e),x(!1),navigator.vibrate&&navigator.vibrate([200,100,200]),0):t-1)},1e3)},k=(e,t,n)=>{s(i=>c(c({},i),{},{exercises:i.exercises.map((i,r)=>{if(r===e){const e=c(c({},i),{},{[t]:n});return e.volume=Yb(e.sets,e.reps,e.weight),e.oneRepMax=qb(e.weight,e.reps),e}return i})}))},S=r.exercises.reduce((e,t)=>e+t.volume,0),C=r.exercises.length;return(0,u.jsxs)("div",{className:"max-w-4xl mx-auto p-4 md:p-6 space-y-6 animate-fade-in",children:[b&&(0,u.jsx)("div",{className:"fixed top-20 right-4 z-40 bg-gradient-to-r from-secondary-600 to-secondary-700 text-white p-4 rounded-2xl shadow-2xl animate-pulse",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsxs)("div",{className:"text-2xl font-bold",children:[Math.floor(v/60),":",(v%60).toString().padStart(2,"0")]}),(0,u.jsx)("div",{className:"text-sm opacity-90",children:"Rest Time"}),(0,u.jsx)("button",{onClick:()=>{y(0),x(!1)},className:"mt-2 px-3 py-1 bg-white/20 rounded-lg text-xs font-medium",children:"Skip"})]})}),(0,u.jsxs)("div",{className:"text-center mb-6",children:[(0,u.jsx)("h1",{className:"text-3xl md:text-4xl font-bold gradient-text mb-2",children:"Log Workout"}),(0,u.jsx)("p",{className:"text-dark-400 text-base md:text-lg",children:"Track your training session"})]}),(0,u.jsx)("div",{className:"flex justify-center mb-6",children:(0,u.jsxs)("div",{className:"bg-dark-800/50 rounded-2xl p-1 flex",children:[(0,u.jsx)("button",{onClick:()=>g(!1),className:"px-6 py-3 rounded-xl font-medium transition-all duration-200 ".concat(m?"text-dark-300 hover:text-white":"bg-primary-600 text-white shadow-lg"),children:"Detailed"}),(0,u.jsx)("button",{onClick:()=>g(!0),className:"px-6 py-3 rounded-xl font-medium transition-all duration-200 ".concat(m?"bg-primary-600 text-white shadow-lg":"text-dark-300 hover:text-white"),children:"Quick Add"})]})}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:[(0,u.jsxs)("div",{className:"stat-card p-4",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,u.jsx)(T,{className:"text-primary-500",size:20}),(0,u.jsx)("span",{className:"text-xl font-bold text-primary-400",children:C})]}),(0,u.jsx)("p",{className:"text-dark-400 text-xs",children:"Exercises"})]}),(0,u.jsxs)("div",{className:"stat-card p-4",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,u.jsx)(_,{className:"text-secondary-500",size:20}),(0,u.jsx)("span",{className:"text-xl font-bold text-secondary-400",children:S})]}),(0,u.jsx)("p",{className:"text-dark-400 text-xs",children:"Volume"})]}),(0,u.jsxs)("div",{className:"stat-card p-4",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,u.jsx)(bd,{className:"text-accent-500",size:20}),(0,u.jsx)("span",{className:"text-xl font-bold text-accent-400",children:C>0?Math.round(S/C):0})]}),(0,u.jsx)("p",{className:"text-dark-400 text-xs",children:"Avg/Ex"})]}),(0,u.jsxs)("div",{className:"stat-card p-4",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,u.jsx)(Vb,{className:"text-purple-500",size:20}),(0,u.jsx)("span",{className:"text-xl font-bold text-purple-400",children:Math.round(3.5*C)})]}),(0,u.jsx)("p",{className:"text-dark-400 text-xs",children:"Est. Min"})]})]}),(0,u.jsxs)("div",{className:"card-glass p-4 md:p-6",children:[(0,u.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-dark-300",children:"Workout Name"}),(0,u.jsx)("input",{type:"text",value:r.name,onChange:e=>s(t=>c(c({},t),{},{name:e.target.value})),className:"input-field text-lg",placeholder:"e.g., Push Day, Upper Body"})]}),(0,u.jsxs)("div",{className:"md:w-40",children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-dark-300",children:"Date"}),(0,u.jsx)("input",{type:"date",value:r.date,onChange:e=>s(t=>c(c({},t),{},{date:e.target.value})),className:"input-field"})]})]}),(0,u.jsxs)("div",{className:"mt-4",children:[(0,u.jsx)("button",{onClick:()=>d(!l),className:"btn-secondary text-sm w-full md:w-auto",children:l?"Hide Templates":"\u26a1 Quick Templates"}),l&&(0,u.jsx)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:$b.map(e=>(0,u.jsxs)("button",{onClick:()=>(e=>{const t=e.exercises.map(e=>{const t=Object.keys(Kb).find(t=>Kb[t].includes(e))||"Other";return{name:e,muscleGroup:t,sets:3,reps:8,weight:0,volume:0,oneRepMax:0}});s(n=>c(c({},n),{},{name:e.name,exercises:t})),d(!1),alert("".concat(e.name," template loaded!"))})(e),className:"p-4 bg-dark-800/50 hover:bg-dark-700/50 rounded-xl text-left transition-all duration-200 border border-dark-700 hover:border-primary-500",children:[(0,u.jsx)("div",{className:"font-medium text-dark-100 text-lg",children:e.name}),(0,u.jsxs)("div",{className:"text-sm text-dark-400 mt-1",children:[e.exercises.length," exercises"]})]},e.name))})]})]}),m?(0,u.jsx)("div",{className:"space-y-4",children:(0,u.jsxs)("div",{className:"card-glass p-4",children:[(0,u.jsxs)("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,u.jsx)(bd,{className:"text-secondary-500",size:24}),"Quick Add Exercises"]}),Gb.map(e=>{var t;return(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsxs)("h4",{className:"text-lg font-medium text-dark-200 mb-3 flex items-center gap-2",children:[(0,u.jsx)("div",{className:"w-3 h-3 bg-primary-500 rounded-full"}),e]}),(0,u.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:null===(t=Kb[e])||void 0===t?void 0:t.map(t=>(0,u.jsxs)("button",{onClick:()=>((e,t)=>{const n={name:e,muscleGroup:t,sets:3,reps:8,weight:0,volume:0,oneRepMax:0};s(e=>c(c({},e),{},{exercises:[...e.exercises,n]})),n.weight>0&&w()})(t,e),className:"p-4 bg-dark-800/50 hover:bg-primary-600/20 rounded-xl text-left transition-all duration-200 border border-dark-700 hover:border-primary-500 text-lg font-medium",children:["+ ",t]},t))})]},e)})]})}):(0,u.jsxs)("div",{className:"card-glass p-4 md:p-6",children:[(0,u.jsxs)("h3",{className:"text-xl font-semibold mb-6 flex items-center gap-2",children:[(0,u.jsx)(Bb,{className:"text-secondary-500",size:24}),"Add Exercise"]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-dark-300",children:"Muscle Group"}),(0,u.jsxs)("select",{value:a.muscleGroup,onChange:e=>o(t=>c(c({},t),{},{muscleGroup:e.target.value,name:""})),className:"select-field text-lg",children:[(0,u.jsx)("option",{value:"",children:"Select muscle group"}),Gb.map(e=>(0,u.jsx)("option",{value:e,children:e},e))]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-dark-300",children:"Exercise"}),(0,u.jsxs)("select",{value:a.name,onChange:e=>o(t=>c(c({},t),{},{name:e.target.value})),className:"select-field text-lg",disabled:!a.muscleGroup,children:[(0,u.jsx)("option",{value:"",children:"Select exercise"}),a.muscleGroup&&(null===(e=Kb[a.muscleGroup])||void 0===e?void 0:e.map(e=>(0,u.jsx)("option",{value:e,children:e},e)))]})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-base md:text-sm font-medium mb-2 text-dark-300",children:"Sets"}),(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("button",{type:"button",onClick:()=>o(e=>c(c({},e),{},{sets:Math.max(1,e.sets-1)})),className:"w-14 h-14 md:w-12 md:h-12 bg-dark-700 hover:bg-dark-600 rounded-xl flex items-center justify-center text-2xl md:text-xl font-bold transition-colors border border-dark-600",children:"-"}),(0,u.jsx)("input",{type:"number",min:"1",max:"10",value:a.sets,onChange:e=>o(t=>c(c({},t),{},{sets:parseInt(e.target.value)||1})),className:"input-field text-center text-2xl md:text-xl font-bold flex-1 min-h-[56px] md:min-h-[48px]"}),(0,u.jsx)("button",{type:"button",onClick:()=>o(e=>c(c({},e),{},{sets:Math.min(10,e.sets+1)})),className:"w-14 h-14 md:w-12 md:h-12 bg-dark-700 hover:bg-dark-600 rounded-xl flex items-center justify-center text-2xl md:text-xl font-bold transition-colors border border-dark-600",children:"+"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-base md:text-sm font-medium mb-2 text-dark-300",children:"Reps"}),(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("button",{type:"button",onClick:()=>o(e=>c(c({},e),{},{reps:Math.max(1,e.reps-1)})),className:"w-14 h-14 md:w-12 md:h-12 bg-dark-700 hover:bg-dark-600 rounded-xl flex items-center justify-center text-2xl md:text-xl font-bold transition-colors border border-dark-600",children:"-"}),(0,u.jsx)("input",{type:"number",min:"1",max:"50",value:a.reps,onChange:e=>o(t=>c(c({},t),{},{reps:parseInt(e.target.value)||1})),className:"input-field text-center text-2xl md:text-xl font-bold flex-1 min-h-[56px] md:min-h-[48px]"}),(0,u.jsx)("button",{type:"button",onClick:()=>o(e=>c(c({},e),{},{reps:Math.min(50,e.reps+1)})),className:"w-14 h-14 md:w-12 md:h-12 bg-dark-700 hover:bg-dark-600 rounded-xl flex items-center justify-center text-2xl md:text-xl font-bold transition-colors border border-dark-600",children:"+"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-base md:text-sm font-medium mb-2 text-dark-300",children:"Weight (lbs)"}),(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("button",{type:"button",onClick:()=>o(e=>c(c({},e),{},{weight:Math.max(0,e.weight-5)})),className:"w-14 h-14 md:w-12 md:h-12 bg-dark-700 hover:bg-dark-600 rounded-xl flex items-center justify-center text-2xl md:text-xl font-bold transition-colors border border-dark-600",children:"-"}),(0,u.jsx)("input",{type:"number",min:"0",step:"5",value:a.weight,onChange:e=>o(t=>c(c({},t),{},{weight:parseFloat(e.target.value)||0})),className:"input-field text-center text-2xl md:text-xl font-bold flex-1 min-h-[56px] md:min-h-[48px]"}),(0,u.jsx)("button",{type:"button",onClick:()=>o(e=>c(c({},e),{},{weight:e.weight+5})),className:"w-14 h-14 md:w-12 md:h-12 bg-dark-700 hover:bg-dark-600 rounded-xl flex items-center justify-center text-2xl md:text-xl font-bold transition-colors border border-dark-600",children:"+"})]})]})]}),a.name&&(0,u.jsx)("div",{className:"bg-dark-800/30 rounded-xl p-4 mb-6 border border-dark-700",children:(0,u.jsxs)("div",{className:"flex justify-between items-center",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"font-medium text-dark-100 text-lg",children:a.name}),(0,u.jsxs)("div",{className:"text-sm text-dark-400",children:[a.sets," sets \xd7 ",a.reps," reps @ ",a.weight," lbs"]})]}),(0,u.jsxs)("div",{className:"text-right",children:[(0,u.jsxs)("div",{className:"text-sm text-primary-400",children:["Volume: ",Yb(a.sets,a.reps,a.weight)]}),(0,u.jsxs)("div",{className:"text-xs text-secondary-400",children:["Est. 1RM: ",qb(a.weight,a.reps)," lbs"]})]})]})}),(0,u.jsxs)("button",{onClick:()=>{if(!a.name||!a.muscleGroup)return void alert("Please select exercise and muscle group");const e=c(c({},a),{},{volume:Yb(a.sets,a.reps,a.weight),oneRepMax:qb(a.weight,a.reps)});s(t=>c(c({},t),{},{exercises:[...t.exercises,e]})),o({name:"",muscleGroup:"",sets:3,reps:8,weight:0}),e.weight>0&&w()},disabled:!a.name||!a.muscleGroup,className:"w-full btn-primary text-lg py-4 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,u.jsx)(Bb,{size:24}),"Add Exercise"]})]}),r.exercises.length>0&&(0,u.jsxs)("div",{className:"card-glass p-4 md:p-6",children:[(0,u.jsxs)("h3",{className:"text-xl font-semibold mb-6 flex items-center gap-2",children:[(0,u.jsx)(T,{className:"text-accent-500",size:24}),"Exercises (",r.exercises.length,")"]}),(0,u.jsx)("div",{className:"space-y-4",children:r.exercises.map((e,t)=>(0,u.jsxs)("div",{className:"bg-dark-800/50 rounded-xl p-4 border border-dark-700",children:[(0,u.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,u.jsx)("div",{className:"flex-1",children:(0,u.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,u.jsx)("div",{className:"font-medium text-dark-100 text-lg",children:e.name}),(0,u.jsx)("span",{className:"px-2 py-1 bg-primary-500/20 text-primary-400 text-xs rounded-full",children:e.muscleGroup})]})}),(0,u.jsx)("button",{onClick:()=>(e=>{s(t=>c(c({},t),{},{exercises:t.exercises.filter((t,n)=>n!==e)}))})(t),className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors",children:(0,u.jsx)(N,{size:20})})]}),(0,u.jsxs)("div",{className:"grid grid-cols-3 gap-2 md:gap-3 mb-3",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-xs text-dark-400 mb-1 block",children:"Sets"}),(0,u.jsx)("input",{type:"number",min:"1",value:e.sets,onChange:e=>k(t,"sets",parseInt(e.target.value)||1),className:"w-full px-2 md:px-3 py-3 md:py-2 bg-dark-700 border border-dark-600 rounded-lg text-center font-bold text-lg md:text-base min-h-[48px] md:min-h-[40px]"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-xs text-dark-400 mb-1 block",children:"Reps"}),(0,u.jsx)("input",{type:"number",min:"1",value:e.reps,onChange:e=>k(t,"reps",parseInt(e.target.value)||1),className:"w-full px-2 md:px-3 py-3 md:py-2 bg-dark-700 border border-dark-600 rounded-lg text-center font-bold text-lg md:text-base min-h-[48px] md:min-h-[40px]"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"text-xs text-dark-400 mb-1 block",children:"Weight"}),(0,u.jsx)("input",{type:"number",min:"0",step:"5",value:e.weight,onChange:e=>k(t,"weight",parseFloat(e.target.value)||0),className:"w-full px-2 md:px-3 py-3 md:py-2 bg-dark-700 border border-dark-600 rounded-lg text-center font-bold text-lg md:text-base min-h-[48px] md:min-h-[40px]"})]})]}),(0,u.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,u.jsxs)("span",{className:"text-secondary-400",children:["Volume: ",e.volume]}),(0,u.jsxs)("span",{className:"text-accent-400",children:["Est. 1RM: ",e.oneRepMax," lbs"]})]}),(0,u.jsxs)("div",{className:"flex gap-1 md:gap-2 mt-3",children:[(0,u.jsx)("button",{onClick:()=>w(60),className:"flex-1 py-3 md:py-2 px-2 md:px-3 bg-secondary-600/20 hover:bg-secondary-600/30 text-secondary-400 rounded-lg text-sm font-medium transition-colors min-h-[44px] md:min-h-[36px]",children:"1min"}),(0,u.jsx)("button",{onClick:()=>w(90),className:"flex-1 py-3 md:py-2 px-2 md:px-3 bg-secondary-600/20 hover:bg-secondary-600/30 text-secondary-400 rounded-lg text-sm font-medium transition-colors min-h-[44px] md:min-h-[36px]",children:"1.5min"}),(0,u.jsx)("button",{onClick:()=>w(180),className:"flex-1 py-3 md:py-2 px-2 md:px-3 bg-secondary-600/20 hover:bg-secondary-600/30 text-secondary-400 rounded-lg text-sm font-medium transition-colors min-h-[44px] md:min-h-[36px]",children:"3min"})]})]},t))})]}),(0,u.jsx)("button",{onClick:async()=>{if(r.name&&0!==r.exercises.length)if(n){p(!0);try{const i=c(c({},r),{},{timestamp:Date.now(),totalVolume:r.exercises.reduce((e,t)=>e+t.volume,0)}),a="workout-".concat(Date.now()),o=JSON.parse(localStorage.getItem("gymtracker_workouts_".concat(n.uid))||"{}");o[a]=i,localStorage.setItem("gymtracker_workouts_".concat(n.uid),JSON.stringify(o));try{const e=t("workouts");if(e){const t=Da(Ra(gd,e));await Aa(t,i)}}catch(e){console.warn("Firebase save failed, data saved locally:",e)}s({name:"",date:(new Date).toISOString().split("T")[0],exercises:[]}),alert("\ud83c\udf89 Workout saved successfully!")}catch(gn){console.error("Error saving workout:",gn),alert("Error saving workout")}finally{p(!1)}}else alert("Please log in to save workouts");else alert("Please add workout name and exercises")},disabled:!r.name||0===r.exercises.length||f,className:"w-full btn-secondary text-xl py-6 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 rounded-2xl",children:f?(0,u.jsx)("div",{className:"spinner"}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Hb,{size:28}),"Save Workout"]})})]})},Jb=y("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Xb=y("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Zb=y("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);rv.register(Xv,ny,_v,bv,Ev,Ov,$v,jv,uv);const ex=()=>{var e,t,n;const{currentUser:r}=h(),[s,a]=(0,i.useState)([]),[o,l]=(0,i.useState)(""),[d,f]=(0,i.useState)("30"),[p,m]=(0,i.useState)("strength"),[g,v]=(0,i.useState)(!0);(0,i.useEffect)(()=>{if(r){try{const e=localStorage.getItem("gymtracker_workouts_".concat(r.uid));if(e){const t=JSON.parse(e),n=Object.keys(t).map(e=>c({id:e},t[e])).sort((e,t)=>new Date(e.date)-new Date(e.date));a(n)}}catch(gn){console.error("Error loading workouts:",gn)}v(!1)}else v(!1)},[r]);const y=[...new Set(s.flatMap(e=>{var t;return(null===(t=e.exercises)||void 0===t?void 0:t.map(e=>e.name))||[]}))].sort(),x=s.filter(e=>{const t=new Date(e.date),n=new Date;return n.setDate(n.getDate()-parseInt(d)),t>=n}),w=()=>{const e={};x.forEach(t=>{if(t.exercises){const n=(e=>{const t=(e=>e.reduce((e,t)=>{const n=t.muscleGroup||"Other";return e[n]||(e[n]=[]),e[n].push(t),e},{}))(e),n={};return Object.keys(t).forEach(e=>{n[e]=t[e].reduce((e,t)=>e+Yb(t.sets,t.reps,t.weight),0)}),n})(t.exercises);Object.keys(n).forEach(t=>{e[t]=(e[t]||0)+n[t]})}});const t=Object.keys(e),n=Object.values(e);return 0===t.length?{labels:[],datasets:[{data:[],backgroundColor:[],borderWidth:0,hoverOffset:10}]}:{labels:t,datasets:[{data:n,backgroundColor:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#F97316","#06B6D4","#84CC16"].slice(0,t.length),borderWidth:0,hoverOffset:10}]}},k={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"#f8fafc",usePointStyle:!0,padding:20,font:{size:12,weight:"500"}}},tooltip:{backgroundColor:"rgba(30, 41, 59, 0.9)",titleColor:"#f8fafc",bodyColor:"#cbd5e1",borderColor:"#475569",borderWidth:1,cornerRadius:8,displayColors:!0}},scales:{x:{ticks:{color:"#94a3b8",font:{size:11}},grid:{color:"rgba(71, 85, 105, 0.3)",drawBorder:!1}},y:{ticks:{color:"#94a3b8",font:{size:11}},grid:{color:"rgba(71, 85, 105, 0.3)",drawBorder:!1}}},elements:{point:{hoverRadius:8}}},N=c(c({},k),{},{plugins:c(c({},k.plugins),{},{legend:{display:!1}})});return g?(0,u.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,u.jsx)("div",{className:"spinner"})}):(0,u.jsxs)("div",{className:"max-w-7xl mx-auto p-6 space-y-8 animate-fade-in",children:[(0,u.jsxs)("div",{className:"text-center mb-8",children:[(0,u.jsx)("h1",{className:"text-4xl font-bold gradient-text mb-2",children:"Progress Analytics"}),(0,u.jsx)("p",{className:"text-dark-400 text-lg",children:"Visualize your fitness journey"})]}),(0,u.jsxs)("div",{className:"card-glass p-6",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,u.jsx)(Jb,{className:"text-primary-500",size:24}),(0,u.jsx)("h3",{className:"text-xl font-semibold",children:"Filters & Options"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-dark-300",children:"Time Range"}),(0,u.jsxs)("select",{value:d,onChange:e=>f(e.target.value),className:"select-field",children:[(0,u.jsx)("option",{value:"7",children:"Last 7 days"}),(0,u.jsx)("option",{value:"30",children:"Last 30 days"}),(0,u.jsx)("option",{value:"90",children:"Last 3 months"}),(0,u.jsx)("option",{value:"365",children:"Last year"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-dark-300",children:"Chart Type"}),(0,u.jsxs)("select",{value:p,onChange:e=>m(e.target.value),className:"select-field",children:[(0,u.jsx)("option",{value:"strength",children:"Strength Progress"}),(0,u.jsx)("option",{value:"volume",children:"Volume Analysis"}),(0,u.jsx)("option",{value:"distribution",children:"Muscle Distribution"})]})]}),"strength"===p&&(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-dark-300",children:"Exercise"}),(0,u.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"select-field",children:[(0,u.jsx)("option",{value:"",children:"Select exercise"}),y.map(e=>(0,u.jsx)("option",{value:e,children:e},e))]})]}),(0,u.jsx)("div",{className:"flex items-end",children:(0,u.jsxs)("button",{className:"btn-accent text-sm flex items-center gap-2",children:[(0,u.jsx)(Xb,{size:16}),"Export Data"]})})]})]}),(0,u.jsxs)("div",{className:"card-glass p-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2",children:["strength"===p&&(0,u.jsx)(_d,{className:"text-primary-500",size:24}),"volume"===p&&(0,u.jsx)(b,{className:"text-accent-500",size:24}),"distribution"===p&&(0,u.jsx)(Zb,{className:"text-secondary-500",size:24}),(0,u.jsxs)("h3",{className:"text-xl font-semibold",children:["strength"===p&&"Strength Progression","volume"===p&&"Volume Analysis","distribution"===p&&"Muscle Group Distribution"]})]}),(0,u.jsxs)("span",{className:"text-sm text-dark-400",children:[x.length," workouts"]})]}),(0,u.jsx)("div",{className:"chart-container",children:"strength"===p&&o?(0,u.jsx)(Fy,{data:(()=>{if(!o)return{labels:[],datasets:[]};const e=[];return x.forEach(t=>{var n;const i=null===(n=t.exercises)||void 0===n?void 0:n.find(e=>e.name===o);i&&e.push({date:t.date,weight:i.weight,oneRepMax:i.oneRepMax,volume:i.volume})}),{labels:e.map(e=>Ub(new Date(e.date),"MMM dd")),datasets:[{label:"Weight (lbs)",data:e.map(e=>e.weight),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0,pointBackgroundColor:"rgb(59, 130, 246)",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:6},{label:"Est. 1RM (lbs)",data:e.map(e=>e.oneRepMax),borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",tension:.4,fill:!1,pointBackgroundColor:"rgb(34, 197, 94)",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:6}]}})(),options:k}):"volume"===p?(0,u.jsx)(zy,{data:(()=>{const e=x.map(e=>({date:e.date,volume:e.totalVolume||0}));return{labels:e.map(e=>Ub(new Date(e.date),"MMM dd")),datasets:[{label:"Total Volume",data:e.map(e=>e.volume),backgroundColor:"rgba(245, 158, 11, 0.8)",borderColor:"rgb(245, 158, 11)",borderWidth:2,borderRadius:8,borderSkipped:!1}]}})(),options:N}):"distribution"===p?(0,u.jsx)(Wy,{data:w(),options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:"#f8fafc",padding:20,usePointStyle:!0,font:{size:12,weight:"500"}}},tooltip:{backgroundColor:"rgba(30, 41, 59, 0.9)",titleColor:"#f8fafc",bodyColor:"#cbd5e1",borderColor:"#475569",borderWidth:1,cornerRadius:8}},cutout:"60%"}}):(0,u.jsx)("div",{className:"flex items-center justify-center h-full text-dark-400",children:"strength"===p?"Select an exercise to view strength progression":"Select a chart type to view analytics"})})]}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,u.jsxs)("div",{className:"stat-card hover:scale-105 transition-transform duration-200",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,u.jsx)(S,{className:"text-primary-500",size:20}),(0,u.jsx)("span",{className:"text-2xl font-bold text-primary-400",children:x.length})]}),(0,u.jsx)("p",{className:"text-dark-400 text-xs",children:"Total Workouts"})]}),(0,u.jsxs)("div",{className:"stat-card hover:scale-105 transition-transform duration-200",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,u.jsx)(_,{className:"text-secondary-500",size:20}),(0,u.jsx)("span",{className:"text-2xl font-bold text-secondary-400",children:x.reduce((e,t)=>{var n;return e+((null===(n=t.exercises)||void 0===n?void 0:n.length)||0)},0)})]}),(0,u.jsx)("p",{className:"text-dark-400 text-xs",children:"Total Exercises"})]}),(0,u.jsxs)("div",{className:"stat-card hover:scale-105 transition-transform duration-200",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,u.jsx)(b,{className:"text-accent-500",size:20}),(0,u.jsxs)("span",{className:"text-2xl font-bold text-accent-400",children:[Math.round(x.reduce((e,t)=>e+(t.totalVolume||0),0)/1e3),"K"]})]}),(0,u.jsx)("p",{className:"text-dark-400 text-xs",children:"Total Volume"})]}),(0,u.jsxs)("div",{className:"stat-card hover:scale-105 transition-transform duration-200",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,u.jsx)(_d,{className:"text-purple-500",size:20}),(0,u.jsx)("span",{className:"text-2xl font-bold text-purple-400",children:x.length>0?Math.round(x.reduce((e,t)=>e+(t.totalVolume||0),0)/x.length):0})]}),(0,u.jsx)("p",{className:"text-dark-400 text-xs",children:"Avg Volume/Workout"})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,u.jsxs)("div",{className:"card-glass p-6",children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,u.jsx)(_d,{className:"text-primary-500",size:20}),"Recent Trends"]}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center p-3 bg-dark-800/50 rounded-lg",children:[(0,u.jsx)("span",{className:"text-dark-300",children:"Weekly Average"}),(0,u.jsxs)("span",{className:"text-primary-400 font-semibold",children:[Math.round(x.length/(parseInt(d)/7))," workouts"]})]}),(0,u.jsxs)("div",{className:"flex justify-between items-center p-3 bg-dark-800/50 rounded-lg",children:[(0,u.jsx)("span",{className:"text-dark-300",children:"Most Trained"}),(0,u.jsx)("span",{className:"text-secondary-400 font-semibold",children:(()=>{const e=w();if(!e.datasets[0]||!e.labels||0===e.labels.length)return"N/A";try{return e.labels.reduce((t,n,i,r)=>e.datasets[0].data[i]>e.datasets[0].data[r.indexOf(t)]?n:t)}catch(gn){return"N/A"}})()})]}),(0,u.jsxs)("div",{className:"flex justify-between items-center p-3 bg-dark-800/50 rounded-lg",children:[(0,u.jsx)("span",{className:"text-dark-300",children:"Peak Volume Day"}),(0,u.jsx)("span",{className:"text-accent-400 font-semibold",children:x.length>0?Ub(new Date(x.reduce((e,t)=>(t.totalVolume||0)>(e.totalVolume||0)?t:e).date),"MMM dd"):"N/A"})]})]})]}),(0,u.jsxs)("div",{className:"card-glass p-6",children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,u.jsx)(_,{className:"text-secondary-500",size:20}),"Performance Metrics"]}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center p-3 bg-dark-800/50 rounded-lg",children:[(0,u.jsx)("span",{className:"text-dark-300",children:"Consistency Score"}),(0,u.jsxs)("span",{className:"text-secondary-400 font-semibold",children:[Math.round(x.length/parseInt(d)*100),"%"]})]}),(0,u.jsxs)("div",{className:"flex justify-between items-center p-3 bg-dark-800/50 rounded-lg",children:[(0,u.jsx)("span",{className:"text-dark-300",children:"Volume Growth"}),(0,u.jsxs)("span",{className:"text-accent-400 font-semibold",children:[x.length>=2?Math.round((((null===(e=x[x.length-1])||void 0===e?void 0:e.totalVolume)||0)-((null===(t=x[0])||void 0===t?void 0:t.totalVolume)||0))/Math.max((null===(n=x[0])||void 0===n?void 0:n.totalVolume)||1,1)*100):0,"%"]})]}),(0,u.jsxs)("div",{className:"flex justify-between items-center p-3 bg-dark-800/50 rounded-lg",children:[(0,u.jsx)("span",{className:"text-dark-300",children:"Exercise Variety"}),(0,u.jsxs)("span",{className:"text-purple-400 font-semibold",children:[y.length," exercises"]})]})]})]})]})]})},tx=y("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),nx=()=>{var e,t;const{currentUser:n}=h(),[r,s]=(0,i.useState)([]),[a,o]=(0,i.useState)({date:(new Date).toISOString().split("T")[0],weight:"",bodyFat:"",notes:""}),[l,d]=(0,i.useState)(null),[f,p]=(0,i.useState)(!1),[m,g]=(0,i.useState)(!0);(0,i.useEffect)(()=>{if(n){try{const e=localStorage.getItem("gymtracker_metrics_".concat(n.uid));if(e){const t=JSON.parse(e),n=Object.keys(t).map(e=>c({id:e},t[e])).sort((e,t)=>new Date(t.date)-new Date(e.date));s(n)}}catch(gn){console.error("Error loading metrics:",gn)}g(!1)}else g(!1)},[n]);const v=async e=>{const t=Date.now(),n=(i=vd,r="progress-photos/".concat(t,"_").concat(e.name),Jo(i=we(i),r));var i,r;const s=await function(e,t,n){return Go(e=we(e),t,n)}(n,e);return await function(e){return Ko(e=we(e))}(s.ref)},y={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"#F9FAFB"}}},scales:{x:{ticks:{color:"#9CA3AF"},grid:{color:"#374151"}},y:{ticks:{color:"#9CA3AF"},grid:{color:"#374151"}}}};if(m)return(0,u.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,u.jsx)("div",{className:"text-lg",children:"Loading metrics..."})});const b=(()=>{const e=r.filter(e=>e.weight).slice(0,5);if(e.length<2)return null;const t=e[0].weight-e[e.length-1].weight;return{change:Math.abs(t).toFixed(1),direction:t>0?"up":t<0?"down":"stable"}})(),x=(()=>{const e=r.filter(e=>e.bodyFat).slice(0,5);if(e.length<2)return null;const t=e[0].bodyFat-e[e.length-1].bodyFat;return{change:Math.abs(t).toFixed(1),direction:t>0?"up":t<0?"down":"stable"}})();return(0,u.jsxs)("div",{className:"max-w-6xl mx-auto p-4",children:[(0,u.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Body Metrics & Progress"}),(0,u.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Log New Metrics"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Date"}),(0,u.jsx)("input",{type:"date",value:a.date,onChange:e=>o(t=>c(c({},t),{},{date:e.target.value})),className:"w-full p-2 bg-gray-700 rounded border border-gray-600 focus:border-blue-500"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Weight (lbs)"}),(0,u.jsx)("input",{type:"number",step:"0.1",value:a.weight,onChange:e=>o(t=>c(c({},t),{},{weight:e.target.value})),className:"w-full p-2 bg-gray-700 rounded border border-gray-600 focus:border-blue-500",placeholder:"e.g., 180.5"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Body Fat %"}),(0,u.jsx)("input",{type:"number",step:"0.1",value:a.bodyFat,onChange:e=>o(t=>c(c({},t),{},{bodyFat:e.target.value})),className:"w-full p-2 bg-gray-700 rounded border border-gray-600 focus:border-blue-500",placeholder:"e.g., 15.2"})]})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Notes"}),(0,u.jsx)("textarea",{value:a.notes,onChange:e=>o(t=>c(c({},t),{},{notes:e.target.value})),className:"w-full p-2 bg-gray-700 rounded border border-gray-600 focus:border-blue-500",rows:"2",placeholder:"Optional notes about your progress..."})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Progress Photo"}),(0,u.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];t&&d(t)},className:"w-full p-2 bg-gray-700 rounded border border-gray-600 focus:border-blue-500"}),l&&(0,u.jsxs)("div",{className:"mt-2 text-sm text-green-400",children:["Selected: ",l.name]})]}),(0,u.jsx)("button",{onClick:async()=>{if(a.weight||a.bodyFat||l)if(n){p(!0);try{let i=null;if(l)try{i=await v(l)}catch(e){console.warn("Photo upload failed:",e)}const r=c(c({},a),{},{weight:parseFloat(a.weight)||null,bodyFat:parseFloat(a.bodyFat)||null,photoUrl:i,timestamp:Date.now()}),u="metric-".concat(Date.now()),h=JSON.parse(localStorage.getItem("gymtracker_metrics_".concat(n.uid))||"{}");h[u]=r,localStorage.setItem("gymtracker_metrics_".concat(n.uid),JSON.stringify(h));try{const e=Da(Ra(gd,"users/".concat(n.uid,"/bodyMetrics")));await Aa(e,r)}catch(t){console.warn("Firebase save failed, data saved locally:",t)}o({date:(new Date).toISOString().split("T")[0],weight:"",bodyFat:"",notes:""}),d(null),alert("Metrics saved successfully!");const f=JSON.parse(localStorage.getItem("gymtracker_metrics_".concat(n.uid))||"{}"),p=Object.keys(f).map(e=>c({id:e},f[e])).sort((e,t)=>new Date(t.date)-new Date(e.date));s(p)}catch(gn){console.error("Error saving metrics:",gn),alert("Error saving metrics")}finally{p(!1)}}else alert("Please log in to save metrics")},disabled:f||!a.weight&&!a.bodyFat&&!l,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white py-2 px-4 rounded flex items-center justify-center gap-2",children:f?(0,u.jsx)(u.Fragment,{children:"Uploading..."}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Hb,{size:20}),"Save Metrics"]})})]}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,u.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[(0,u.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:(null===(e=r.find(e=>e.weight))||void 0===e?void 0:e.weight)||"--"}),(0,u.jsx)("div",{className:"text-sm text-gray-400",children:"Current Weight (lbs)"}),b&&(0,u.jsxs)("div",{className:"text-xs flex items-center justify-center gap-1 mt-1 ".concat("up"===b.direction?"text-red-400":"down"===b.direction?"text-green-400":"text-gray-400"),children:["up"===b.direction?(0,u.jsx)(_d,{size:12}):"down"===b.direction?(0,u.jsx)(wd,{size:12}):null,b.change," lbs"]})]}),(0,u.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[(0,u.jsxs)("div",{className:"text-2xl font-bold text-green-400",children:[(null===(t=r.find(e=>e.bodyFat))||void 0===t?void 0:t.bodyFat)||"--","%"]}),(0,u.jsx)("div",{className:"text-sm text-gray-400",children:"Current Body Fat"}),x&&(0,u.jsxs)("div",{className:"text-xs flex items-center justify-center gap-1 mt-1 ".concat("up"===x.direction?"text-red-400":"down"===x.direction?"text-green-400":"text-gray-400"),children:["up"===x.direction?(0,u.jsx)(_d,{size:12}):"down"===x.direction?(0,u.jsx)(wd,{size:12}):null,x.change,"%"]})]}),(0,u.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[(0,u.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:r.length}),(0,u.jsx)("div",{className:"text-sm text-gray-400",children:"Total Entries"})]}),(0,u.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[(0,u.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:r.filter(e=>e.photoUrl).length}),(0,u.jsx)("div",{className:"text-sm text-gray-400",children:"Progress Photos"})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,u.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Weight Progression"}),(0,u.jsx)("div",{className:"chart-container",children:(0,u.jsx)(Fy,{data:(()=>{const e=r.filter(e=>e.weight).reverse().slice(-30);return{labels:e.map(e=>Ub(new Date(e.date),"MMM dd")),datasets:[{label:"Weight (lbs)",data:e.map(e=>e.weight),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.1,fill:!0}]}})(),options:y})})]}),(0,u.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Body Fat Progression"}),(0,u.jsx)("div",{className:"chart-container",children:(0,u.jsx)(Fy,{data:(()=>{const e=r.filter(e=>e.bodyFat).reverse().slice(-30);return{labels:e.map(e=>Ub(new Date(e.date),"MMM dd")),datasets:[{label:"Body Fat %",data:e.map(e=>e.bodyFat),borderColor:"rgb(16, 185, 129)",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.1,fill:!0}]}})(),options:y})})]})]}),(0,u.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,u.jsx)(tx,{size:20}),"Progress Photos"]}),r.filter(e=>e.photoUrl).length>0?(0,u.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:r.filter(e=>e.photoUrl).slice(0,12).map(e=>(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("img",{src:e.photoUrl,alt:"Progress ".concat(Ub(new Date(e.date),"MMM dd, yyyy")),className:"w-full h-48 object-cover rounded-lg"}),(0,u.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-75 text-white p-2 rounded-b-lg",children:[(0,u.jsx)("div",{className:"text-sm font-medium",children:Ub(new Date(e.date),"MMM dd, yyyy")}),e.weight&&(0,u.jsxs)("div",{className:"text-xs",children:[e.weight," lbs"]})]})]},e.id))}):(0,u.jsx)("div",{className:"text-center text-gray-400 py-8",children:"No progress photos yet. Upload your first photo above!"})]})]})},ix=y("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]),rx=()=>{var e,t;const{currentUser:n}=h(),[r,s]=(0,i.useState)([]),[a,o]=(0,i.useState)({}),[l,d]=(0,i.useState)(!0),[f,p]=(0,i.useState)("All");(0,i.useEffect)(()=>{if(n){try{const e=localStorage.getItem("gymtracker_workouts_".concat(n.uid));if(e){const t=JSON.parse(e),n=Object.keys(t).map(e=>c({id:e},t[e]));s(n),m(n)}}catch(gn){console.error("Error loading workouts:",gn)}d(!1)}else d(!1)},[n]);const m=e=>{const t={};e.forEach(e=>{e.exercises&&e.exercises.forEach(n=>{const i=n.name;t[i]?(n.weight>t[i].maxWeight.weight&&(t[i].maxWeight={weight:n.weight,reps:n.reps,date:e.date,workoutName:e.name,oneRepMax:n.oneRepMax}),n.volume>t[i].maxVolume.volume&&(t[i].maxVolume={volume:n.volume,sets:n.sets,reps:n.reps,weight:n.weight,date:e.date,workoutName:e.name}),n.oneRepMax>t[i].maxOneRepMax.oneRepMax&&(t[i].maxOneRepMax={oneRepMax:n.oneRepMax,weight:n.weight,reps:n.reps,date:e.date,workoutName:e.name}),t[i].totalSessions++,new Date(e.date)<new Date(t[i].firstPerformed)&&(t[i].firstPerformed=e.date),new Date(e.date)>new Date(t[i].lastPerformed)&&(t[i].lastPerformed=e.date)):t[i]={exerciseName:n.name,muscleGroup:n.muscleGroup,maxWeight:{weight:n.weight,reps:n.reps,date:e.date,workoutName:e.name,oneRepMax:n.oneRepMax},maxVolume:{volume:n.volume,sets:n.sets,reps:n.reps,weight:n.weight,date:e.date,workoutName:e.name},maxOneRepMax:{oneRepMax:n.oneRepMax,weight:n.weight,reps:n.reps,date:e.date,workoutName:e.name},totalSessions:1,firstPerformed:e.date,lastPerformed:e.date}})}),o(t)},g=["All",...new Set(Object.values(a).map(e=>e.muscleGroup))].filter(Boolean),v="All"===f?Object.values(a):Object.values(a).filter(e=>e.muscleGroup===f),y=[...v].sort((e,t)=>t.maxWeight.weight-e.maxWeight.weight),b=[...v].sort((e,t)=>t.maxOneRepMax.oneRepMax-e.maxOneRepMax.oneRepMax),x=[...v].sort((e,t)=>t.maxVolume.volume-e.maxVolume.volume),_=Object.values(a).filter(e=>{const t=new Date;return t.setDate(t.getDate()-30),new Date(e.maxWeight.date)>=t||new Date(e.maxOneRepMax.date)>=t||new Date(e.maxVolume.date)>=t}).sort((e,t)=>{const n=Math.max(new Date(e.maxWeight.date),new Date(e.maxOneRepMax.date),new Date(e.maxVolume.date));return Math.max(new Date(t.maxWeight.date),new Date(t.maxOneRepMax.date),new Date(t.maxVolume.date))-n});return l?(0,u.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,u.jsx)("div",{className:"text-lg",children:"Loading personal records..."})}):(0,u.jsxs)("div",{className:"max-w-6xl mx-auto p-4",children:[(0,u.jsxs)("h2",{className:"text-2xl font-bold mb-6 text-center flex items-center justify-center gap-2",children:[(0,u.jsx)(k,{className:"text-yellow-400",size:28}),"Personal Records"]}),(0,u.jsx)("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:(0,u.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,u.jsx)("label",{className:"text-sm font-medium mr-4 self-center",children:"Filter by muscle group:"}),g.map(e=>(0,u.jsx)("button",{onClick:()=>p(e),className:"px-3 py-1 rounded text-sm ".concat(f===e?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:e},e))]})}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,u.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[(0,u.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:Object.keys(a).length}),(0,u.jsx)("div",{className:"text-sm text-gray-400",children:"Total Exercises"})]}),(0,u.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[(0,u.jsx)("div",{className:"text-2xl font-bold text-green-400",children:_.length}),(0,u.jsx)("div",{className:"text-sm text-gray-400",children:"Recent PRs (30 days)"})]}),(0,u.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[(0,u.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:(null===(e=y[0])||void 0===e?void 0:e.maxWeight.weight)||0}),(0,u.jsx)("div",{className:"text-sm text-gray-400",children:"Heaviest Weight (lbs)"})]}),(0,u.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[(0,u.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:(null===(t=b[0])||void 0===t?void 0:t.maxOneRepMax.oneRepMax)||0}),(0,u.jsx)("div",{className:"text-sm text-gray-400",children:"Highest 1RM (lbs)"})]})]}),_.length>0&&(0,u.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,u.jsx)(_d,{className:"text-green-400",size:20}),"Recent Personal Records (Last 30 Days)"]}),(0,u.jsx)("div",{className:"space-y-3",children:_.slice(0,5).map((e,t)=>(0,u.jsx)("div",{className:"bg-gray-700 rounded p-3",children:(0,u.jsxs)("div",{className:"flex justify-between items-start",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"font-medium text-yellow-400",children:e.exerciseName}),(0,u.jsx)("div",{className:"text-sm text-gray-300",children:e.muscleGroup})]}),(0,u.jsxs)("div",{className:"text-right",children:[(0,u.jsxs)("div",{className:"text-sm font-medium",children:["Max Weight: ",e.maxWeight.weight," lbs \xd7 ",e.maxWeight.reps]}),(0,u.jsx)("div",{className:"text-xs text-gray-400",children:Ub(new Date(e.maxWeight.date),"MMM dd, yyyy")})]})]})},e.exerciseName))})]}),(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,u.jsx)(ix,{className:"text-blue-400",size:20}),"Top Weights"]}),(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"w-full text-sm",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{className:"border-b border-gray-700",children:[(0,u.jsx)("th",{className:"text-left p-2",children:"Exercise"}),(0,u.jsx)("th",{className:"text-left p-2",children:"Muscle Group"}),(0,u.jsx)("th",{className:"text-left p-2",children:"Max Weight"}),(0,u.jsx)("th",{className:"text-left p-2",children:"Reps"}),(0,u.jsx)("th",{className:"text-left p-2",children:"Est. 1RM"}),(0,u.jsx)("th",{className:"text-left p-2",children:"Date"})]})}),(0,u.jsx)("tbody",{children:y.slice(0,10).map((e,t)=>(0,u.jsxs)("tr",{className:"border-b border-gray-700 hover:bg-gray-700",children:[(0,u.jsx)("td",{className:"p-2 font-medium",children:e.exerciseName}),(0,u.jsx)("td",{className:"p-2 text-gray-400",children:e.muscleGroup}),(0,u.jsxs)("td",{className:"p-2 text-blue-400 font-bold",children:[e.maxWeight.weight," lbs"]}),(0,u.jsx)("td",{className:"p-2",children:e.maxWeight.reps}),(0,u.jsxs)("td",{className:"p-2 text-green-400",children:[e.maxWeight.oneRepMax," lbs"]}),(0,u.jsx)("td",{className:"p-2 text-gray-400",children:Ub(new Date(e.maxWeight.date),"MMM dd, yyyy")})]},e.exerciseName))})]})})]}),(0,u.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,u.jsx)(k,{className:"text-green-400",size:20}),"Top Estimated 1RMs"]}),(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"w-full text-sm",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{className:"border-b border-gray-700",children:[(0,u.jsx)("th",{className:"text-left p-2",children:"Exercise"}),(0,u.jsx)("th",{className:"text-left p-2",children:"Muscle Group"}),(0,u.jsx)("th",{className:"text-left p-2",children:"Est. 1RM"}),(0,u.jsx)("th",{className:"text-left p-2",children:"From Weight"}),(0,u.jsx)("th",{className:"text-left p-2",children:"Reps"}),(0,u.jsx)("th",{className:"text-left p-2",children:"Date"})]})}),(0,u.jsx)("tbody",{children:b.slice(0,10).map((e,t)=>(0,u.jsxs)("tr",{className:"border-b border-gray-700 hover:bg-gray-700",children:[(0,u.jsx)("td",{className:"p-2 font-medium",children:e.exerciseName}),(0,u.jsx)("td",{className:"p-2 text-gray-400",children:e.muscleGroup}),(0,u.jsxs)("td",{className:"p-2 text-green-400 font-bold",children:[e.maxOneRepMax.oneRepMax," lbs"]}),(0,u.jsxs)("td",{className:"p-2",children:[e.maxOneRepMax.weight," lbs"]}),(0,u.jsx)("td",{className:"p-2",children:e.maxOneRepMax.reps}),(0,u.jsx)("td",{className:"p-2 text-gray-400",children:Ub(new Date(e.maxOneRepMax.date),"MMM dd, yyyy")})]},e.exerciseName))})]})})]}),(0,u.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,u.jsx)(_d,{className:"text-purple-400",size:20}),"Top Single-Exercise Volumes"]}),(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"w-full text-sm",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{className:"border-b border-gray-700",children:[(0,u.jsx)("th",{className:"text-left p-2",children:"Exercise"}),(0,u.jsx)("th",{className:"text-left p-2",children:"Muscle Group"}),(0,u.jsx)("th",{className:"text-left p-2",children:"Max Volume"}),(0,u.jsx)("th",{className:"text-left p-2",children:"Sets \xd7 Reps \xd7 Weight"}),(0,u.jsx)("th",{className:"text-left p-2",children:"Date"})]})}),(0,u.jsx)("tbody",{children:x.slice(0,10).map((e,t)=>(0,u.jsxs)("tr",{className:"border-b border-gray-700 hover:bg-gray-700",children:[(0,u.jsx)("td",{className:"p-2 font-medium",children:e.exerciseName}),(0,u.jsx)("td",{className:"p-2 text-gray-400",children:e.muscleGroup}),(0,u.jsx)("td",{className:"p-2 text-purple-400 font-bold",children:e.maxVolume.volume}),(0,u.jsxs)("td",{className:"p-2",children:[e.maxVolume.sets," \xd7 ",e.maxVolume.reps," \xd7 ",e.maxVolume.weight," lbs"]}),(0,u.jsx)("td",{className:"p-2 text-gray-400",children:Ub(new Date(e.maxVolume.date),"MMM dd, yyyy")})]},e.exerciseName))})]})})]})]})]})},sx=y("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ax=y("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function ox(e){By(1,arguments);var t=Hy(e);return t.setHours(0,0,0,0),t}function lx(e,t){By(2,arguments);var n=ox(e),i=ox(t);return n.getTime()===i.getTime()}function cx(e,t){By(2,arguments);var n=Hy(e),i=Vy(t);if(isNaN(i))return new Date(NaN);if(!i)return n;var r=n.getDate(),s=new Date(n.getTime());return s.setMonth(n.getMonth()+i+1,0),r>=s.getDate()?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const ux=()=>{const{currentUser:e}=h(),[t,n]=(0,i.useState)([]),[r,s]=(0,i.useState)(new Date),[a,o]=(0,i.useState)(new Date),[l,d]=(0,i.useState)(!0);(0,i.useEffect)(()=>{if(e){try{const t=localStorage.getItem("gymtracker_workouts_".concat(e.uid));if(t){const e=JSON.parse(t),i=Object.keys(e).map(t=>c({id:t},e[t]));n(i)}}catch(gn){console.error("Error loading workouts:",gn)}d(!1)}else d(!1)},[e]);const f=function(e,t){var n;By(1,arguments);var i=e||{},r=Hy(i.start),s=Hy(i.end).getTime();if(!(r.getTime()<=s))throw new RangeError("Invalid interval");var a=[],o=r;o.setHours(0,0,0,0);var l=Number(null!==(n=null===t||void 0===t?void 0:t.step)&&void 0!==n?n:1);if(l<1||isNaN(l))throw new RangeError("`options.step` must be a number greater than 1");for(;o.getTime()<=s;)a.push(Hy(o)),o.setDate(o.getDate()+l),o.setHours(0,0,0,0);return a}({start:function(e){By(1,arguments);var t=Hy(e);return t.setDate(1),t.setHours(0,0,0,0),t}(r),end:function(e){By(1,arguments);var t=Hy(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}(r)}),p=e=>t.filter(t=>lx(new Date(t.date),e)),m=p(a),g=(()=>{const e=t.filter(e=>function(e,t){By(2,arguments);var n=Hy(e),i=Hy(t);return n.getFullYear()===i.getFullYear()&&n.getMonth()===i.getMonth()}(new Date(e.date),r)),n=e.reduce((e,t)=>e+(t.totalVolume||0),0),i=e.reduce((e,t)=>{var n;return e+((null===(n=t.exercises)||void 0===n?void 0:n.length)||0)},0),s=e.length>0?Math.round(n/e.length):0;return{workouts:e.length,totalVolume:n,totalExercises:i,avgVolume:s,activeDays:new Set(e.map(e=>Ub(new Date(e.date),"yyyy-MM-dd"))).size}})();return l?(0,u.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,u.jsx)("div",{className:"spinner"})}):(0,u.jsxs)("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-6 md:space-y-8 animate-fade-in",children:[(0,u.jsxs)("div",{className:"text-center mb-6 md:mb-8",children:[(0,u.jsx)("h1",{className:"text-3xl md:text-4xl font-bold gradient-text mb-2",children:"Workout Calendar"}),(0,u.jsx)("p",{className:"text-dark-400 text-base md:text-lg",children:"Track your training consistency"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4 mb-6 md:mb-8",children:[(0,u.jsxs)("div",{className:"stat-card p-3 md:p-4",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,u.jsx)(S,{className:"text-primary-500",size:18}),(0,u.jsx)("span",{className:"text-lg md:text-xl font-bold text-primary-400",children:g.workouts})]}),(0,u.jsx)("p",{className:"text-dark-400 text-xs",children:"Workouts"})]}),(0,u.jsxs)("div",{className:"stat-card p-3 md:p-4",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,u.jsx)(Sd,{className:"text-secondary-500",size:18}),(0,u.jsx)("span",{className:"text-lg md:text-xl font-bold text-secondary-400",children:g.activeDays})]}),(0,u.jsx)("p",{className:"text-dark-400 text-xs",children:"Active Days"})]}),(0,u.jsxs)("div",{className:"stat-card p-3 md:p-4",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,u.jsx)(_,{className:"text-accent-500",size:18}),(0,u.jsxs)("span",{className:"text-lg md:text-xl font-bold text-accent-400",children:[Math.round(g.totalVolume/1e3),"K"]})]}),(0,u.jsx)("p",{className:"text-dark-400 text-xs",children:"Volume"})]}),(0,u.jsxs)("div",{className:"stat-card p-3 md:p-4",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,u.jsx)(Nd,{className:"text-purple-500",size:18}),(0,u.jsx)("span",{className:"text-lg md:text-xl font-bold text-purple-400",children:g.avgVolume})]}),(0,u.jsx)("p",{className:"text-dark-400 text-xs",children:"Avg Volume"})]}),(0,u.jsxs)("div",{className:"stat-card p-3 md:p-4 col-span-2 md:col-span-1",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,u.jsx)(Sd,{className:"text-pink-500",size:18}),(0,u.jsx)("span",{className:"text-lg md:text-xl font-bold text-pink-400",children:g.totalExercises})]}),(0,u.jsx)("p",{className:"text-dark-400 text-xs",children:"Exercises"})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8",children:[(0,u.jsxs)("div",{className:"lg:col-span-2 card-glass p-4 md:p-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[(0,u.jsx)("button",{onClick:()=>s(function(e,t){return By(2,arguments),cx(e,-Vy(t))}(r,1)),className:"p-3 md:p-2 hover:bg-dark-700 rounded-xl md:rounded-lg transition-colors",children:(0,u.jsx)(sx,{size:24,className:"md:w-5 md:h-5"})}),(0,u.jsx)("h2",{className:"text-xl md:text-2xl font-bold",children:Ub(r,"MMMM yyyy")}),(0,u.jsx)("button",{onClick:()=>s(cx(r,1)),className:"p-3 md:p-2 hover:bg-dark-700 rounded-xl md:rounded-lg transition-colors",children:(0,u.jsx)(ax,{size:24,className:"md:w-5 md:h-5"})})]}),(0,u.jsx)("div",{className:"grid grid-cols-7 gap-1 md:gap-2 mb-3 md:mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,u.jsxs)("div",{className:"text-center text-sm md:text-base font-medium text-dark-400 py-2 md:py-2",children:[(0,u.jsx)("span",{className:"hidden md:inline",children:e}),(0,u.jsx)("span",{className:"md:hidden",children:e.slice(0,1)})]},e))}),(0,u.jsx)("div",{className:"grid grid-cols-7 gap-1 md:gap-2",children:f.map(e=>{const t=p(e),n=lx(e,a),i=function(e){return By(1,arguments),lx(e,Date.now())}(e),r=(e=>{const t=p(e);if(0===t.length)return"";const n=t.reduce((e,t)=>e+(t.totalVolume||0),0);return n>5e3?"bg-green-500":n>3e3?"bg-green-400":n>1e3?"bg-green-300":"bg-green-200"})(e);return(0,u.jsxs)("button",{onClick:()=>o(e),className:"\n                    relative aspect-square p-1 md:p-2 rounded-lg text-sm md:text-base font-medium\n                    transition-all duration-200 hover:scale-105 min-h-[44px] md:min-h-[48px]\n                    ".concat(n?"bg-primary-600 text-white shadow-lg":i?"bg-dark-700 text-white border-2 border-primary-500":"bg-dark-800 hover:bg-dark-700 text-dark-300","\n                  "),children:[(0,u.jsx)("span",{className:"relative z-10 text-base md:text-sm",children:Ub(e,"d")}),t.length>0&&!n&&(0,u.jsx)("div",{className:"absolute inset-1 rounded-md opacity-30 ".concat(r)}),t.length>0&&(0,u.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 md:w-5 md:h-5 bg-secondary-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:t.length})]},e.toISOString())})}),(0,u.jsxs)("div",{className:"mt-4 md:mt-6 flex items-center justify-center gap-3 md:gap-4 text-xs md:text-sm",children:[(0,u.jsxs)("div",{className:"flex items-center gap-1 md:gap-2",children:[(0,u.jsx)("div",{className:"w-3 h-3 bg-green-200 rounded"}),(0,u.jsx)("span",{className:"text-dark-400",children:"Light"})]}),(0,u.jsxs)("div",{className:"flex items-center gap-1 md:gap-2",children:[(0,u.jsx)("div",{className:"w-3 h-3 bg-green-300 rounded"}),(0,u.jsx)("span",{className:"text-dark-400",children:"Moderate"})]}),(0,u.jsxs)("div",{className:"flex items-center gap-1 md:gap-2",children:[(0,u.jsx)("div",{className:"w-3 h-3 bg-green-400 rounded"}),(0,u.jsx)("span",{className:"text-dark-400",children:"Heavy"})]}),(0,u.jsxs)("div",{className:"flex items-center gap-1 md:gap-2",children:[(0,u.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded"}),(0,u.jsx)("span",{className:"text-dark-400",children:"Intense"})]})]})]}),(0,u.jsxs)("div",{className:"card-glass p-4 md:p-6",children:[(0,u.jsxs)("h3",{className:"text-lg md:text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,u.jsx)(S,{className:"text-primary-500",size:20}),(0,u.jsx)("span",{className:"text-base md:text-lg",children:Ub(a,"MMM dd, yyyy")})]}),m.length>0?(0,u.jsx)("div",{className:"space-y-3 md:space-y-4",children:m.map((e,t)=>{var n,i,r;return(0,u.jsxs)("div",{className:"bg-dark-800/50 rounded-lg p-3 md:p-4 hover:bg-dark-700/50 transition-colors",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,u.jsx)("h4",{className:"font-semibold text-dark-100 text-base md:text-lg",children:e.name}),(0,u.jsxs)("span",{className:"text-sm text-primary-400 font-medium",children:[e.totalVolume||0," vol"]})]}),(0,u.jsxs)("div",{className:"text-sm text-dark-400 mb-3",children:[(null===(n=e.exercises)||void 0===n?void 0:n.length)||0," exercises"]}),(0,u.jsxs)("div",{className:"space-y-1",children:[null===(i=e.exercises)||void 0===i?void 0:i.slice(0,3).map((e,t)=>(0,u.jsxs)("div",{className:"text-xs md:text-sm text-dark-400 flex justify-between",children:[(0,u.jsx)("span",{className:"truncate mr-2",children:e.name}),(0,u.jsxs)("span",{className:"flex-shrink-0",children:[e.sets,"\xd7",e.reps," @ ",e.weight,"lbs"]})]},t)),(null===(r=e.exercises)||void 0===r?void 0:r.length)>3&&(0,u.jsxs)("div",{className:"text-xs text-dark-500",children:["+",e.exercises.length-3," more exercises"]})]})]},e.id)})}):(0,u.jsxs)("div",{className:"text-center py-6 md:py-8",children:[(0,u.jsx)(Sd,{size:40,className:"mx-auto mb-4 text-dark-600"}),(0,u.jsx)("p",{className:"text-dark-400 mb-2 text-sm md:text-base",children:"No workouts on this day"}),lx(a,new Date)&&(0,u.jsx)("button",{className:"btn-primary text-sm px-4 py-2",children:"Log Today's Workout"})]}),m.length>0&&(0,u.jsxs)("div",{className:"mt-4 md:mt-6 pt-4 border-t border-dark-700",children:[(0,u.jsx)("h4",{className:"text-sm font-medium text-dark-300 mb-3",children:"Day Summary"}),(0,u.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-lg md:text-xl font-bold text-primary-400",children:m.reduce((e,t)=>e+(t.totalVolume||0),0)}),(0,u.jsx)("div",{className:"text-xs text-dark-400",children:"Total Volume"})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-lg md:text-xl font-bold text-secondary-400",children:m.reduce((e,t)=>{var n;return e+((null===(n=t.exercises)||void 0===n?void 0:n.length)||0)},0)}),(0,u.jsx)("div",{className:"text-xs text-dark-400",children:"Exercises"})]})]})]})]})]})]})},dx=y("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),hx=y("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),fx=y("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),px=y("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),mx=()=>{const{currentUser:e,userProfile:t,updateUserProfile:n,logout:r}=h(),[s,a]=(0,i.useState)({units:"lbs",theme:"dark",notifications:!0,weeklyGoal:4,privacy:"private",autoBackup:!0,soundEffects:!0,emailNotifications:!1}),[o,l]=(0,i.useState)({displayName:"",email:"",bio:"",goals:"",experience:"beginner"}),[d,f]=(0,i.useState)(!1),[p,m]=(0,i.useState)("profile");(0,i.useEffect)(()=>{t&&(a(e=>c(c({},e),t.settings)),l({displayName:t.displayName||"",email:t.email||"",bio:t.bio||"",goals:t.goals||"",experience:t.experience||"beginner"}))},[t]);const g=(e,t)=>{a(n=>c(c({},n),{},{[e]:t}))},v=(e,t)=>{l(n=>c(c({},n),{},{[e]:t}))},y=[{id:"profile",label:"Profile",icon:w},{id:"preferences",label:"Preferences",icon:E},{id:"notifications",label:"Notifications",icon:dx},{id:"data",label:"Data",icon:Xb}];return(0,u.jsxs)("div",{className:"max-w-6xl mx-auto p-6 space-y-8 animate-fade-in",children:[(0,u.jsxs)("div",{className:"text-center mb-8",children:[(0,u.jsx)("h1",{className:"text-4xl font-bold gradient-text mb-2",children:"Settings"}),(0,u.jsx)("p",{className:"text-dark-400 text-lg",children:"Customize your GymTracker experience"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,u.jsx)("div",{className:"lg:col-span-1",children:(0,u.jsxs)("div",{className:"card-glass p-4 sticky top-6",children:[(0,u.jsx)("div",{className:"space-y-2",children:y.map(e=>{const t=e.icon;return(0,u.jsxs)("button",{onClick:()=>m(e.id),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 ".concat(p===e.id?"bg-primary-600 text-white":"text-dark-300 hover:bg-dark-700/50 hover:text-white"),children:[(0,u.jsx)(t,{size:20}),(0,u.jsx)("span",{className:"font-medium",children:e.label})]},e.id)})}),(0,u.jsxs)("div",{className:"mt-6 pt-6 border-t border-dark-700",children:[(0,u.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,u.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-primary-600 to-primary-700 rounded-full flex items-center justify-center",children:(0,u.jsx)(w,{className:"text-white",size:24})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"font-medium text-dark-100",children:o.displayName}),(0,u.jsx)("div",{className:"text-sm text-dark-400",children:o.email})]})]}),(0,u.jsxs)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to sign out?"))try{await r()}catch(gn){console.error("Error signing out:",gn)}},className:"w-full flex items-center gap-2 px-4 py-2 text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:[(0,u.jsx)(hx,{size:16}),"Sign Out"]})]})]})}),(0,u.jsx)("div",{className:"lg:col-span-3",children:(0,u.jsxs)("div",{className:"card-glass p-8",children:["profile"===p&&(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,u.jsx)(w,{className:"text-primary-500",size:24}),(0,u.jsx)("h2",{className:"text-2xl font-semibold",children:"Profile Information"})]}),(0,u.jsxs)("div",{className:"flex items-center gap-6",children:[(0,u.jsx)("div",{className:"w-24 h-24 bg-gradient-to-r from-primary-600 to-primary-700 rounded-full flex items-center justify-center",children:(0,u.jsx)(w,{className:"text-white",size:32})}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("button",{className:"btn-secondary text-sm flex items-center gap-2",children:[(0,u.jsx)(tx,{size:16}),"Change Photo"]}),(0,u.jsx)("p",{className:"text-xs text-dark-400 mt-2",children:"JPG, PNG up to 5MB"})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Display Name"}),(0,u.jsx)("input",{type:"text",value:o.displayName,onChange:e=>v("displayName",e.target.value),className:"input-field",placeholder:"Your display name"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Email"}),(0,u.jsx)("input",{type:"email",value:o.email,onChange:e=>v("email",e.target.value),className:"input-field",placeholder:"Your email address",disabled:!0})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Bio"}),(0,u.jsx)("textarea",{value:o.bio,onChange:e=>v("bio",e.target.value),className:"input-field",rows:"3",placeholder:"Tell us about yourself..."})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Fitness Goals"}),(0,u.jsx)("textarea",{value:o.goals,onChange:e=>v("goals",e.target.value),className:"input-field",rows:"2",placeholder:"What are your fitness goals?"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Experience Level"}),(0,u.jsxs)("select",{value:o.experience,onChange:e=>v("experience",e.target.value),className:"select-field",children:[(0,u.jsx)("option",{value:"beginner",children:"Beginner (0-1 years)"}),(0,u.jsx)("option",{value:"intermediate",children:"Intermediate (1-3 years)"}),(0,u.jsx)("option",{value:"advanced",children:"Advanced (3-5 years)"}),(0,u.jsx)("option",{value:"expert",children:"Expert (5+ years)"})]})]})]})]}),"preferences"===p&&(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,u.jsx)(E,{className:"text-primary-500",size:24}),(0,u.jsx)("h2",{className:"text-2xl font-semibold",children:"Preferences"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Weight Units"}),(0,u.jsxs)("select",{value:s.units,onChange:e=>g("units",e.target.value),className:"select-field",children:[(0,u.jsx)("option",{value:"lbs",children:"Pounds (lbs)"}),(0,u.jsx)("option",{value:"kg",children:"Kilograms (kg)"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Theme"}),(0,u.jsxs)("select",{value:s.theme,onChange:e=>g("theme",e.target.value),className:"select-field",children:[(0,u.jsx)("option",{value:"dark",children:"Dark"}),(0,u.jsx)("option",{value:"light",children:"Light"}),(0,u.jsx)("option",{value:"auto",children:"Auto"})]})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-dark-300 mb-2",children:"Weekly Workout Goal"}),(0,u.jsxs)("div",{className:"flex items-center gap-4",children:[(0,u.jsx)("input",{type:"range",min:"1",max:"7",value:s.weeklyGoal,onChange:e=>g("weeklyGoal",parseInt(e.target.value)),className:"flex-1"}),(0,u.jsxs)("span",{className:"text-primary-400 font-semibold w-16",children:[s.weeklyGoal," workout",1!==s.weeklyGoal?"s":""]})]})]}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"font-medium text-dark-100",children:"Sound Effects"}),(0,u.jsx)("div",{className:"text-sm text-dark-400",children:"Play sounds for actions and achievements"})]}),(0,u.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,u.jsx)("input",{type:"checkbox",checked:s.soundEffects,onChange:e=>g("soundEffects",e.target.checked),className:"sr-only peer"}),(0,u.jsx)("div",{className:"w-11 h-6 bg-dark-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"font-medium text-dark-100",children:"Auto Backup"}),(0,u.jsx)("div",{className:"text-sm text-dark-400",children:"Automatically backup your data"})]}),(0,u.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,u.jsx)("input",{type:"checkbox",checked:s.autoBackup,onChange:e=>g("autoBackup",e.target.checked),className:"sr-only peer"}),(0,u.jsx)("div",{className:"w-11 h-6 bg-dark-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})]})]}),"notifications"===p&&(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,u.jsx)(dx,{className:"text-primary-500",size:24}),(0,u.jsx)("h2",{className:"text-2xl font-semibold",children:"Notifications"})]}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"font-medium text-dark-100",children:"Push Notifications"}),(0,u.jsx)("div",{className:"text-sm text-dark-400",children:"Receive notifications in the app"})]}),(0,u.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,u.jsx)("input",{type:"checkbox",checked:s.notifications,onChange:e=>g("notifications",e.target.checked),className:"sr-only peer"}),(0,u.jsx)("div",{className:"w-11 h-6 bg-dark-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"font-medium text-dark-100",children:"Email Notifications"}),(0,u.jsx)("div",{className:"text-sm text-dark-400",children:"Receive weekly progress reports via email"})]}),(0,u.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,u.jsx)("input",{type:"checkbox",checked:s.emailNotifications,onChange:e=>g("emailNotifications",e.target.checked),className:"sr-only peer"}),(0,u.jsx)("div",{className:"w-11 h-6 bg-dark-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})]})]}),"data"===p&&(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,u.jsx)(Xb,{className:"text-primary-500",size:24}),(0,u.jsx)("h2",{className:"text-2xl font-semibold",children:"Data Management"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{className:"bg-dark-800/30 rounded-lg p-6 border border-dark-700",children:[(0,u.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,u.jsx)(Xb,{className:"text-secondary-500",size:24}),(0,u.jsx)("h3",{className:"font-semibold",children:"Export Data"})]}),(0,u.jsx)("p",{className:"text-sm text-dark-400 mb-4",children:"Download all your workout data, progress photos, and metrics as a JSON file."}),(0,u.jsx)("button",{onClick:()=>{alert("Data export feature coming soon!")},className:"btn-secondary text-sm",children:"Export My Data"})]}),(0,u.jsxs)("div",{className:"bg-dark-800/30 rounded-lg p-6 border border-dark-700",children:[(0,u.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,u.jsx)(fx,{className:"text-accent-500",size:24}),(0,u.jsx)("h3",{className:"font-semibold",children:"Import Data"})]}),(0,u.jsx)("p",{className:"text-sm text-dark-400 mb-4",children:"Import workout data from other fitness apps or previous backups."}),(0,u.jsx)("button",{className:"btn-accent text-sm",children:"Import Data"})]})]}),(0,u.jsxs)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-6",children:[(0,u.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,u.jsx)(px,{className:"text-red-400",size:24}),(0,u.jsx)("h3",{className:"font-semibold text-red-400",children:"Danger Zone"})]}),(0,u.jsx)("p",{className:"text-sm text-dark-400 mb-4",children:"Once you delete your account, there is no going back. Please be certain."}),(0,u.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to delete your account? This action cannot be undone.")&&alert("Account deletion feature coming soon!")},className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors text-sm",children:"Delete Account"})]})]}),(0,u.jsx)("div",{className:"flex justify-end pt-6 border-t border-dark-700",children:(0,u.jsx)("button",{onClick:async()=>{f(!0);try{await n(c(c(c({},t),{},{settings:s},o),{},{updatedAt:Date.now()})),alert("Settings saved successfully!")}catch(gn){console.error("Error saving settings:",gn),alert("Failed to save settings")}finally{f(!1)}},disabled:d,className:"btn-primary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:d?(0,u.jsx)("div",{className:"spinner"}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Hb,{size:20}),"Save Changes"]})})})]})})]})]})},gx=y("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),vx=y("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),yx=y("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),bx=y("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),xx=y("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),_x=e=>{let{onToggleMode:t}=e;const[n,r]=(0,i.useState)(""),[s,a]=(0,i.useState)(""),[o,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)(!1),[f,p]=(0,i.useState)(""),{signin:m,resetPassword:g}=h();return(0,u.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-dark-950 via-dark-900 to-dark-850 p-4",children:(0,u.jsxs)("div",{className:"max-w-md w-full",children:[(0,u.jsxs)("div",{className:"text-center mb-12",children:[(0,u.jsxs)("div",{className:"inline-flex items-center gap-4 mb-8",children:[(0,u.jsx)("div",{className:"p-5 bg-gradient-to-r from-primary-600 to-primary-700 rounded-3xl shadow-2xl shadow-primary-500/25",children:(0,u.jsx)(T,{className:"text-white",size:48})}),(0,u.jsxs)("div",{className:"text-left",children:[(0,u.jsx)("h1",{className:"text-5xl font-bold gradient-text",children:"GymTracker"}),(0,u.jsx)("p",{className:"text-base text-dark-400 mt-2",children:"Professional Fitness Tracking"})]})]}),(0,u.jsxs)("div",{className:"space-y-3",children:[(0,u.jsx)("h2",{className:"text-4xl font-bold text-white",children:"Welcome Back"}),(0,u.jsx)("p",{className:"text-dark-300 text-xl",children:"Sign in to continue your fitness journey"})]})]}),(0,u.jsxs)("div",{className:"card-glass p-10 shadow-2xl border border-dark-600/50",children:[(0,u.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),n&&s){d(!0),p("");try{await m(n,s)}catch(f){console.error("Login error:",f),"Invalid credentials"===f.message?p("Invalid email or password"):f.message.includes("email")?p("Invalid email address"):p("Failed to sign in. Please try again")}finally{d(!1)}}else p("Please fill in all fields")},className:"space-y-8",children:[f&&(0,u.jsx)("div",{className:"error-state p-4 rounded-xl text-center border border-red-500/20",children:(0,u.jsx)("div",{className:"font-medium text-red-400",children:f})}),(0,u.jsxs)("div",{className:"space-y-3",children:[(0,u.jsx)("label",{className:"block text-base font-semibold text-dark-100",children:"Email Address"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)(gx,{className:"absolute left-5 top-1/2 transform -translate-y-1/2 text-dark-400",size:22}),(0,u.jsx)("input",{type:"email",value:n,onChange:e=>r(e.target.value),className:"w-full pl-14 pr-5 py-5 bg-dark-700/50 border border-dark-600 rounded-2xl focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all duration-200 text-white placeholder-dark-400 text-lg font-medium",placeholder:"Enter your email address",required:!0})]})]}),(0,u.jsxs)("div",{className:"space-y-3",children:[(0,u.jsx)("label",{className:"block text-base font-semibold text-dark-100",children:"Password"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)(vx,{className:"absolute left-5 top-1/2 transform -translate-y-1/2 text-dark-400",size:22}),(0,u.jsx)("input",{type:o?"text":"password",value:s,onChange:e=>a(e.target.value),className:"w-full pl-14 pr-14 py-5 bg-dark-700/50 border border-dark-600 rounded-2xl focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all duration-200 text-white placeholder-dark-400 text-lg font-medium",placeholder:"Enter your password",required:!0}),(0,u.jsx)("button",{type:"button",onClick:()=>l(!o),className:"absolute right-5 top-1/2 transform -translate-y-1/2 text-dark-400 hover:text-dark-200 transition-colors",children:o?(0,u.jsx)(yx,{size:22}):(0,u.jsx)(bx,{size:22})})]})]}),(0,u.jsx)("div",{className:"text-right",children:(0,u.jsx)("button",{type:"button",onClick:async()=>{if(n)try{await g(n),alert("Password reset email sent! Check your inbox.")}catch(f){p("Failed to send reset email")}else p("Please enter your email address first")},className:"text-primary-400 hover:text-primary-300 transition-colors font-semibold text-base",children:"Forgot your password?"})}),(0,u.jsx)("button",{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 text-white font-bold py-5 px-8 rounded-2xl transition-all duration-200 shadow-xl hover:shadow-2xl transform hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-4 text-xl",children:c?(0,u.jsx)("div",{className:"w-7 h-7 border-3 border-white border-t-transparent rounded-full animate-spin"}):(0,u.jsxs)(u.Fragment,{children:["Sign In",(0,u.jsx)(xx,{size:24})]})})]}),(0,u.jsx)("div",{className:"mt-10 text-center",children:(0,u.jsxs)("p",{className:"text-dark-300 text-xl",children:["Don't have an account?"," ",(0,u.jsx)("button",{onClick:t,className:"text-primary-400 hover:text-primary-300 font-bold transition-colors",children:"Sign up here"})]})})]}),(0,u.jsx)("div",{className:"mt-10 text-center",children:(0,u.jsx)("p",{className:"text-dark-500 text-base",children:"Secure login powered by advanced encryption"})})]})})},wx=e=>{let{onToggleMode:t}=e;const[n,r]=(0,i.useState)({displayName:"",email:"",password:"",confirmPassword:""}),[s,a]=(0,i.useState)(!1),[o,l]=(0,i.useState)(!1),[d,f]=(0,i.useState)(!1),[p,m]=(0,i.useState)(""),{signup:g}=h(),v=e=>{r(t=>c(c({},t),{},{[e.target.name]:e.target.value}))};return(0,u.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-dark-950 via-dark-900 to-dark-850 p-4",children:(0,u.jsxs)("div",{className:"max-w-md w-full",children:[(0,u.jsxs)("div",{className:"text-center mb-10",children:[(0,u.jsxs)("div",{className:"inline-flex items-center gap-4 mb-6",children:[(0,u.jsx)("div",{className:"p-4 bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl shadow-2xl shadow-primary-500/25",children:(0,u.jsx)(T,{className:"text-white",size:40})}),(0,u.jsxs)("div",{className:"text-left",children:[(0,u.jsx)("h1",{className:"text-4xl font-bold gradient-text",children:"GymTracker"}),(0,u.jsx)("p",{className:"text-base text-dark-400 mt-1",children:"Professional Fitness Tracking"})]})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)("h2",{className:"text-3xl font-bold text-white",children:"Create Account"}),(0,u.jsx)("p",{className:"text-dark-300 text-lg",children:"Start your fitness journey today"})]})]}),(0,u.jsxs)("div",{className:"card-glass p-8 border border-dark-600/50",children:[(0,u.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),n.displayName.trim()?n.email?n.password.length<6?(m("Password must be at least 6 characters"),0):n.password===n.confirmPassword||(m("Passwords do not match"),0):(m("Please enter your email"),0):(m("Please enter your name"),0)){f(!0),m("");try{await g(n.email,n.password,n.displayName)}catch(p){console.error("Signup error:",p),"User already exists"===p.message?m("An account with this email already exists"):p.message.includes("email")?m("Invalid email address"):p.message.includes("password")?m("Password is too weak"):m("Failed to create account. Please try again")}finally{f(!1)}}},className:"space-y-6",children:[p&&(0,u.jsx)("div",{className:"error-state p-4 rounded-xl text-center border border-red-500/20",children:(0,u.jsx)("div",{className:"font-medium text-red-400",children:p})}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)("label",{className:"block text-base font-semibold text-dark-100",children:"Full Name"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)(w,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-dark-400",size:20}),(0,u.jsx)("input",{type:"text",name:"displayName",value:n.displayName,onChange:v,className:"w-full pl-12 pr-4 py-4 bg-dark-700/50 border border-dark-600 rounded-xl focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all duration-200 text-white placeholder-dark-400 text-base font-medium",placeholder:"Enter your full name",required:!0})]})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)("label",{className:"block text-base font-semibold text-dark-100",children:"Email Address"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)(gx,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-dark-400",size:20}),(0,u.jsx)("input",{type:"email",name:"email",value:n.email,onChange:v,className:"w-full pl-12 pr-4 py-4 bg-dark-700/50 border border-dark-600 rounded-xl focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all duration-200 text-white placeholder-dark-400 text-base font-medium",placeholder:"Enter your email address",required:!0})]})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)("label",{className:"block text-base font-semibold text-dark-100",children:"Password"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)(vx,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-dark-400",size:20}),(0,u.jsx)("input",{type:s?"text":"password",name:"password",value:n.password,onChange:v,className:"w-full pl-12 pr-12 py-4 bg-dark-700/50 border border-dark-600 rounded-xl focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all duration-200 text-white placeholder-dark-400 text-base font-medium",placeholder:"Create a password",required:!0}),(0,u.jsx)("button",{type:"button",onClick:()=>a(!s),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-dark-400 hover:text-dark-200 transition-colors",children:s?(0,u.jsx)(yx,{size:20}):(0,u.jsx)(bx,{size:20})})]}),(0,u.jsx)("p",{className:"text-sm text-dark-400 mt-1",children:"Must be at least 6 characters"})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)("label",{className:"block text-base font-semibold text-dark-100",children:"Confirm Password"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)(vx,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-dark-400",size:20}),(0,u.jsx)("input",{type:o?"text":"password",name:"confirmPassword",value:n.confirmPassword,onChange:v,className:"w-full pl-12 pr-12 py-4 bg-dark-700/50 border border-dark-600 rounded-xl focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all duration-200 text-white placeholder-dark-400 text-base font-medium",placeholder:"Confirm your password",required:!0}),(0,u.jsx)("button",{type:"button",onClick:()=>l(!o),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-dark-400 hover:text-dark-200 transition-colors",children:o?(0,u.jsx)(yx,{size:20}):(0,u.jsx)(bx,{size:20})})]})]}),(0,u.jsx)("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 text-white font-bold py-4 px-6 rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-3 text-lg",children:d?(0,u.jsx)("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,u.jsxs)(u.Fragment,{children:["Create Account",(0,u.jsx)(xx,{size:20})]})})]}),(0,u.jsx)("div",{className:"mt-8 text-center",children:(0,u.jsxs)("p",{className:"text-dark-300 text-lg",children:["Already have an account?"," ",(0,u.jsx)("button",{onClick:t,className:"text-primary-400 hover:text-primary-300 font-semibold transition-colors",children:"Sign in here"})]})})]}),(0,u.jsx)("div",{className:"mt-8 text-center",children:(0,u.jsxs)("p",{className:"text-sm text-dark-500",children:["By creating an account, you agree to our"," ",(0,u.jsx)("a",{href:"#",className:"text-primary-400 hover:text-primary-300",children:"Terms of Service"})," ","and"," ",(0,u.jsx)("a",{href:"#",className:"text-primary-400 hover:text-primary-300",children:"Privacy Policy"})]})})]})})},kx=()=>{const[e,t]=(0,i.useState)("dashboard"),[n,r]=(0,i.useState)(!1),{currentUser:s}=h();return(0,u.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-dark-950 via-dark-900 to-dark-850",children:[(0,u.jsxs)("div",{className:"flex",children:[(0,u.jsx)(I,{activeTab:e,setActiveTab:t,isMobileMenuOpen:n,setIsMobileMenuOpen:r}),(0,u.jsxs)("main",{className:"flex-1 md:ml-0 min-h-screen",children:[(0,u.jsx)("header",{className:"glass border-b border-dark-700/50 p-4 md:p-6 backdrop-blur-xl",children:(0,u.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)("div",{className:"md:hidden"})," ",(0,u.jsxs)("div",{className:"hidden md:flex items-center gap-3",children:[(0,u.jsx)("div",{className:"p-2 bg-gradient-to-r from-primary-600 to-primary-700 rounded-lg",children:(0,u.jsx)("span",{className:"text-white text-xl",children:"\ud83d\udcaa"})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-2xl font-bold gradient-text",children:"GymTracker Pro"}),(0,u.jsx)("p",{className:"text-xs text-dark-400",children:"Professional Fitness Tracking"})]})]}),(0,u.jsx)("div",{className:"flex items-center gap-4",children:(0,u.jsxs)("div",{className:"hidden md:flex items-center gap-2 px-3 py-1.5 bg-dark-800/50 rounded-full",children:[(0,u.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,u.jsxs)("span",{className:"text-xs text-dark-300",children:["Welcome, ",(null===s||void 0===s?void 0:s.displayName)||"User"]})]})})]})})}),(0,u.jsx)("div",{className:"relative",children:(()=>{switch(e){case"dashboard":default:return(0,u.jsx)(Wb,{setActiveTab:t});case"logger":return(0,u.jsx)(Qb,{});case"charts":return(0,u.jsx)(ex,{});case"metrics":return(0,u.jsx)(nx,{});case"records":return(0,u.jsx)(rx,{});case"calendar":return(0,u.jsx)(ux,{});case"settings":return(0,u.jsx)(mx,{})}})()})]})]}),n&&(0,u.jsx)("div",{className:"md:hidden fixed inset-0 bg-black/20 backdrop-blur-sm z-30"})]})},Sx=()=>{const[e,t]=(0,i.useState)(!0),{currentUser:n,loading:r}=h();return r?(0,u.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-dark-950 via-dark-900 to-dark-850 flex items-center justify-center",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"spinner mb-4"}),(0,u.jsx)("p",{className:"text-dark-400",children:"Loading..."})]})}):n?(0,u.jsx)(kx,{}):e?(0,u.jsx)(_x,{onToggleMode:()=>t(!1)}):(0,u.jsx)(wx,{onToggleMode:()=>t(!0)})};const Nx=function(){return(0,u.jsx)(p,{children:(0,u.jsx)(Sx,{})})};r.createRoot(document.getElementById("root")).render((0,u.jsx)(i.StrictMode,{children:(0,u.jsx)(Nx,{})}))})();
//# sourceMappingURL=main.daa77d1c.js.map